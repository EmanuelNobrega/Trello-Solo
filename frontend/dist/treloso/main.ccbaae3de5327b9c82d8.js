(self.webpackChunktreloso=self.webpackChunktreloso||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},7716:(e,t,n)=>{"use strict";n.d(t,{deG:()=>cn,tb:()=>$c,AFp:()=>qc,ip1:()=>Uc,CZH:()=>jc,hGG:()=>Uu,z2F:()=>Au,sBO:()=>Ml,Sil:()=>ru,_Vd:()=>al,EJc:()=>Kc,SBq:()=>hl,qLn:()=>Ir,vpe:()=>vc,gxx:()=>Ss,tBr:()=>Rn,XFs:()=>R,OlP:()=>ln,zs3:()=>Us,ZZ4:()=>Rl,aQg:()=>Pl,soG:()=>Wc,YKP:()=>Zl,v3s:()=>Nu,h0i:()=>$l,PXZ:()=>Su,R0b:()=>ou,FiY:()=>Nn,Lbi:()=>Gc,g9A:()=>Hc,n_E:()=>bc,Qsj:()=>fl,FYo:()=>pl,JOm:()=>Nr,Tiy:()=>gl,q3G:()=>wr,tp0:()=>Pn,EAV:()=>Du,Rgc:()=>Bl,dDg:()=>pu,DyG:()=>un,q4F:()=>_l,GfV:()=>yl,s_b:()=>Kl,ifc:()=>F,eFA:()=>Tu,G48:()=>Eu,Gpc:()=>p,f3M:()=>kn,X6Q:()=>bu,_c5:()=>Mu,VLi:()=>gu,c2e:()=>Zc,zSh:()=>Is,wAp:()=>ra,vHH:()=>g,EiD:()=>_r,mCW:()=>er,qzn:()=>Bn,JVY:()=>Hn,pB0:()=>Wn,eBb:()=>$n,L6k:()=>Gn,LAX:()=>Zn,cg1:()=>ea,Tjo:()=>Fu,kL8:()=>ta,yhl:()=>zn,dqk:()=>q,sIi:()=>Ks,CqO:()=>go,QGY:()=>fo,F4k:()=>mo,RDi:()=>Ie,AaK:()=>u,z3N:()=>qn,qOj:()=>qs,TTD:()=>ve,_Bn:()=>il,xp6:()=>ki,uIk:()=>eo,Tol:()=>Do,DjV:()=>Ko,ekj:()=>Oo,Suo:()=>Oc,Xpm:()=>J,lG2:()=>se,Yz7:()=>b,cJS:()=>E,oAB:()=>ne,Yjl:()=>oe,Y36:()=>io,_UZ:()=>co,BQk:()=>ho,ynx:()=>uo,qZA:()=>lo,TgZ:()=>ao,EpF:()=>po,n5z:()=>nn,Ikx:()=>Yo,SDv:()=>Wa,QtT:()=>Ya,pQV:()=>Ka,LFG:()=>In,$8M:()=>sn,NdJ:()=>yo,CRH:()=>Dc,O4$:()=>wt,oxw:()=>wo,ALo:()=>gc,lcZ:()=>yc,Hsn:()=>Co,F$t:()=>Eo,Q6J:()=>so,s9C:()=>So,MGl:()=>To,DdM:()=>uc,VKq:()=>hc,WLB:()=>dc,kEZ:()=>pc,iGM:()=>Nc,MAs:()=>ro,CHM:()=>Ge,LSH:()=>br,kYT:()=>re,Udp:()=>Po,YNc:()=>no,W1O:()=>Vc,_uU:()=>$o,Oqu:()=>Zo,hij:()=>Wo,Gf:()=>Pc});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(8819);function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function c(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(u).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=l({__forward_ref__:l});function p(e){return e.__forward_ref__=p,e.toString=function(){return u(this())},e}function f(e){return m(e)?e():e}function m(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class g extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function v(e,t){const n=t?` in ${t}`:"";throw new g("201",`No provider for ${_(e)} found${n}`)}function w(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function b(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function E(e){return{providers:e.providers||[],imports:e.imports||[]}}function C(e){return S(e,I)||S(e,x)}function S(e,t){return e.hasOwnProperty(t)?e[t]:null}function T(e){return e&&(e.hasOwnProperty(k)||e.hasOwnProperty(A))?e[k]:null}const I=l({"\u0275prov":l}),k=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),A=l({ngInjectorDef:l});var R=(()=>((R=R||{})[R.Default=0]="Default",R[R.Host=1]="Host",R[R.Self=2]="Self",R[R.SkipSelf=4]="SkipSelf",R[R.Optional=8]="Optional",R))();let N;function P(e){const t=N;return N=e,t}function O(e,t,n){const r=C(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void v(u(e),"Injector")}function D(e){return{toString:e}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const M="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,q=M||j||V||U,B={},z=[],H=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),W=l({"\u0275loc":l}),K=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let Q=0;function J(e){return D(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||z,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||F.Emulated,id:"c",styles:e.styles||z,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Q++,n.inputs=ie(e.inputs,t),n.outputs=ie(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(ee):null,n})}function X(e){return ae(e)||function(e){return e[G]||null}(e)}function ee(e){return function(e){return e[$]||null}(e)}const te={};function ne(e){return D(()=>{const t={type:e.type,bootstrap:e.bootstrap||z,declarations:e.declarations||z,imports:e.imports||z,exports:e.exports||z,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(te[e.id]=e.type),t})}function re(e,t){return D(()=>{const n=le(e,!0);n.declarations=t.declarations||z,n.imports=t.imports||z,n.exports=t.exports||z})}function ie(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const se=J;function oe(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ae(e){return e[H]||null}function le(e,t){const n=e[Z]||null;if(!n&&!0===t)throw new Error(`Type ${u(e)} does not have '\u0275mod' property.`);return n}const ce=20,ue=10;function he(e){return Array.isArray(e)&&"object"==typeof e[1]}function de(e){return Array.isArray(e)&&!0===e[1]}function pe(e){return 0!=(8&e.flags)}function fe(e){return 2==(2&e.flags)}function me(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function ye(e,t){return e.hasOwnProperty(K)?e[K]:null}class _e{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ve(){return we}function we(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ee),be}function be(){const e=Ce(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ee(e,t,n,r){const i=Ce(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new _e(l&&l.currentValue,t,o===B),e[r]=t}function Ce(e){return e.__ngSimpleChanges__||null}ve.ngInherit=!0;const Se="http://www.w3.org/2000/svg";let Te;function Ie(e){Te=e}function ke(){return void 0!==Te?Te:"undefined"!=typeof document?document:void 0}function xe(e){return!!e.listen}const Ae={createRenderer:(e,t)=>ke()};function Re(e){for(;Array.isArray(e);)e=e[0];return e}function Ne(e,t){return Re(t[e])}function Pe(e,t){return Re(t[e.index])}function Oe(e,t){return e.data[t]}function De(e,t){return e[t]}function Le(e,t){const n=t[e];return he(n)?n:n[0]}function Fe(e){return 4==(4&e[2])}function Me(e){return 128==(128&e[2])}function Ve(e,t){return null==t?null:e[t]}function Ue(e){e[18]=0}function je(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const qe={lFrame:pt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Be(){return qe.bindingsEnabled}function ze(){return qe.lFrame.lView}function He(){return qe.lFrame.tView}function Ge(e){return qe.lFrame.contextLView=e,e[8]}function $e(){let e=Ze();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ze(){return qe.lFrame.currentTNode}function We(){const e=qe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ke(e,t){const n=qe.lFrame;n.currentTNode=e,n.isParent=t}function Ye(){return qe.lFrame.isParent}function Qe(){qe.lFrame.isParent=!1}function Je(){return qe.isInCheckNoChangesMode}function Xe(e){qe.isInCheckNoChangesMode=e}function et(){const e=qe.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function tt(){return qe.lFrame.bindingIndex}function nt(){return qe.lFrame.bindingIndex++}function rt(e){const t=qe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function it(e){qe.lFrame.inI18n=e}function st(e,t){const n=qe.lFrame;n.bindingIndex=n.bindingRootIndex=e,ot(t)}function ot(e){qe.lFrame.currentDirectiveIndex=e}function at(){return qe.lFrame.currentQueryIndex}function lt(e){qe.lFrame.currentQueryIndex=e}function ct(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ut(e,t,n){if(n&R.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&R.Host||(r=ct(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=qe.lFrame=dt();return r.currentTNode=t,r.lView=e,!0}function ht(e){const t=dt(),n=e[1];qe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function dt(){const e=qe.lFrame,t=null===e?null:e.child;return null===t?pt(e):t}function pt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ft(){const e=qe.lFrame;return qe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const mt=ft;function gt(){const e=ft();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function yt(){return qe.lFrame.selectedIndex}function _t(e){qe.lFrame.selectedIndex=e}function vt(){const e=qe.lFrame;return Oe(e.tView,e.selectedIndex)}function wt(){qe.lFrame.currentNamespace=Se}function bt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Et(e,t,n){Tt(e,t,3,n)}function Ct(e,t,n,r){(3&e[2])===n&&Tt(e,t,n,r)}function St(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Tt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(It(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function It(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const kt=-1;class xt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function At(e,t,n){const r=xe(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];Nt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Rt(e){return 3===e||4===e||6===e}function Nt(e){return 64===e.charCodeAt(0)}function Pt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Ot(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Ot(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Dt(e){return e!==kt}function Lt(e){return 32767&e}function Ft(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Mt=!0;function Vt(e){const t=Mt;return Mt=e,t}let Ut=0;function jt(e,t){const n=Bt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,qt(r.data,e),qt(t,null),qt(r.blueprint,null));const i=zt(e,t),s=e.injectorIndex;if(Dt(i)){const e=Lt(i),n=Ft(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function qt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function zt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return kt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return kt}function Ht(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Ut++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Gt(e,t,n){if(n&R.Optional)return e;v(t,"NodeInjector")}function $t(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&R.Optional):O(t,r,n&R.Optional)}finally{P(s)}}return Gt(r,t,n)}function Zt(e,t,n,r=R.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Kt:t}(n);if("function"==typeof s){if(!ut(t,e,r))return r&R.Host?Gt(i,n,r):$t(t,n,r,i);try{const e=s(r);if(null!=e||r&R.Optional)return e;v(n)}finally{mt()}}else if("number"==typeof s){let i=null,o=Bt(e,t),a=kt,l=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?zt(e,t):t[o+8],a!==kt&&en(r,!1)?(i=t[1],o=Lt(a),t=Ft(a,t)):o=-1);-1!==o;){const e=t[1];if(Xt(s,o,e.data)){const e=Yt(o,t,n,i,r,l);if(e!==Wt)return e}a=t[o+8],a!==kt&&en(r,t[1].data[o+8]===l)&&Xt(s,o,t)?(i=e,o=Lt(a),t=Ft(a,t)):o=-1}}}return $t(t,n,r,i)}const Wt={};function Kt(){return new tn($e(),ze())}function Yt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],l=Qt(a,o,n,null==r?fe(a)&&Mt:r!=o&&0!=(3&a.type),i&R.Host&&s===a);return null!==l?Jt(t,o,l,a):Wt}function Qt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,u=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<u;h++){const e=o[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(i){const e=o[l];if(e&&ge(e)&&e.type===n)return l}return null}function Jt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof xt){const o=i;o.resolving&&function(e,t){throw new g("200",`Circular dependency in DI detected for ${e}`)}(_(s[n]));const a=Vt(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?P(o.injectImpl):null;ut(e,r,R.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=we(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&P(l),Vt(a),o.resolving=!1,mt()}}return i}function Xt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function en(e,t){return!(e&R.Self||e&R.Host&&t)}class tn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Zt(this._tNode,this._lView,e,void 0,t)}}function nn(e){return D(()=>{const t=e.prototype.constructor,n=t[K]||rn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[K]||rn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function rn(e){return m(e)?()=>{const t=rn(f(e));return t&&t()}:ye(e)}function sn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Rt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}($e(),e)}const on="__parameters__";function an(e,t,n){return D(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(on)?e[on]:Object.defineProperty(e,on,{value:[]})[on];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class ln{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=b({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cn=new ln("AnalyzeForEntryComponents"),un=Function;function hn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),hn(r,t)):t!==e&&t.push(r)}return t}function dn(e,t){e.forEach(e=>Array.isArray(e)?dn(e,t):t(e))}function pn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function fn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function mn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function gn(e,t,n){let r=_n(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function yn(e,t){const n=_n(e,t);if(n>=0)return e[1|n]}function _n(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const vn={},wn=/\n/gm,bn="__source",En=l({provide:String,useValue:l});let Cn;function Sn(e){const t=Cn;return Cn=e,t}function Tn(e,t=R.Default){if(void 0===Cn)throw new Error("inject() must be called from an injection context");return null===Cn?O(e,void 0,t):Cn.get(e,t&R.Optional?null:void 0,t)}function In(e,t=R.Default){return(N||Tn)(f(e),t)}const kn=In;function xn(e){const t=[];for(let n=0;n<e.length;n++){const r=f(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(In(e,n))}else t.push(In(r))}return t}function An(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Rn=An(an("Inject",e=>({token:e})),-1),Nn=An(an("Optional"),8),Pn=An(an("SkipSelf"),4);let On;function Dn(e){var t;return(null===(t=function(){if(void 0===On&&(On=null,q.trustedTypes))try{On=q.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return On}())||void 0===t?void 0:t.createHTML(e))||e}class Ln{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fn extends Ln{getTypeName(){return"HTML"}}class Mn extends Ln{getTypeName(){return"Style"}}class Vn extends Ln{getTypeName(){return"Script"}}class Un extends Ln{getTypeName(){return"URL"}}class jn extends Ln{getTypeName(){return"ResourceURL"}}function qn(e){return e instanceof Ln?e.changingThisBreaksApplicationSecurity:e}function Bn(e,t){const n=zn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function zn(e){return e instanceof Ln&&e.getTypeName()||null}function Hn(e){return new Fn(e)}function Gn(e){return new Mn(e)}function $n(e){return new Vn(e)}function Zn(e){return new Un(e)}function Wn(e){return new jn(e)}function Kn(e){const t=new Qn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(e){return!1}}()?new Yn(t):t}class Yn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Qn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Dn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function er(e){return(e=String(e)).match(Jn)||e.match(Xn)?e:"unsafe:"+e}function tr(e){return(e=String(e)).split(",").map(e=>er(e.trim())).join(", ")}function nr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function rr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ir=nr("area,br,col,hr,img,wbr"),sr=nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=nr("rp,rt"),ar=rr(or,sr),lr=rr(ir,rr(sr,nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rr(or,nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ar),cr=nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=nr("srcset"),hr=rr(cr,ur,nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=nr("script,style,template");class pr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!lr.hasOwnProperty(t))return this.sanitizedSomething=!0,!dr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,i=t.toLowerCase();if(!hr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=e.value;cr[i]&&(s=er(s)),ur[i]&&(s=tr(s)),this.buf.push(" ",t,'="',gr(s),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();lr.hasOwnProperty(t)&&!ir.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(gr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mr=/([^\#-~ |!])/g;function gr(e){return e.replace(/&/g,"&amp;").replace(fr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(mr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function _r(e,t){let n=null;try{yr=yr||Kn(e);let r=t?String(t):"";n=yr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==s);return Dn((new pr).sanitizeChildren(vr(n)||n))}finally{if(n){const e=vr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function vr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function br(e){const t=function(){const e=ze();return e&&e[12]}();return t?t.sanitize(wr.URL,e)||"":Bn(e,"URL")?qn(e):er(y(e))}function Er(e,t){e.__ngContext__=t}function Cr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Sr(e){return e.ngOriginalError}function Tr(e,...t){e.error(...t)}class Ir{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||Tr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(Sr(e)):null}_findOriginalError(e){let t=e&&Sr(e);for(;t&&Sr(t);)t=Sr(t);return t||null}}const kr=/^>|^->|<!--|-->|--!>|<!-$/g,xr=/(<|>)/,Ar=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function Rr(e){return e instanceof Function?e():e}var Nr=(()=>((Nr=Nr||{})[Nr.Important=1]="Important",Nr[Nr.DashCase=2]="DashCase",Nr))();let Pr;function Or(e,t){return Pr(e,t)}function Dr(e){const t=e[3];return de(t)?t[3]:t}function Lr(e){return Mr(e[13])}function Fr(e){return Mr(e[4])}function Mr(e){for(;null!==e&&!de(e);)e=e[4];return e}function Vr(e,t,n,r,i){if(null!=r){let s,o=!1;de(r)?s=r:he(r)&&(o=!0,r=r[0]);const a=Re(r);0===e&&null!==n?null==i?Yr(t,n,a):Kr(t,n,a,i||null,!0):1===e&&null!==n?Kr(t,n,a,i||null,!0):2===e?li(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Re(n)&&Vr(t,e,r,s,i);for(let o=ue;o<n.length;o++){const i=n[o];ui(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Ur(e,t){return xe(e)?e.createText(t):e.createTextNode(t)}function jr(e,t,n){xe(e)?e.setValue(t,n):t.textContent=n}function qr(e,t){return e.createComment(function(e){return e.replace(kr,e=>e.replace(xr,"\u200b$1\u200b"))}(t))}function Br(e,t,n){return xe(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function zr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,je(i,-1)),n.splice(r,1)}function Hr(e,t){if(e.length<=ue)return;const n=ue+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&zr(s,r),t>0&&(e[n-1][4]=r[4]);const o=fn(e,ue+t);ui(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Gr(e,t){if(!(256&t[2])){const n=t[11];xe(n)&&n.destroyNode&&ui(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return $r(e[1],e);for(;t;){let n=null;if(he(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)he(t)&&$r(t[1],t),t=t[3];null===t&&(t=e),he(t)&&$r(t[1],t),n=t&&t[4]}t=n}}(t)}}function $r(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof xt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Re(t[e]),a=r[i=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&xe(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&de(t[3])){n!==t[3]&&zr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Zr(e,t,n){return Wr(e,t.parent,n)}function Wr(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===F.None||t===F.Emulated)return null}return Pe(r,n)}function Kr(e,t,n,r,i){xe(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Yr(e,t,n){xe(e)?e.appendChild(t,n):t.appendChild(n)}function Qr(e,t,n,r,i){null!==r?Kr(e,t,n,r,i):Yr(e,t,n)}function Jr(e,t){return xe(e)?e.parentNode(t):t.parentNode}function Xr(e,t,n){return ni(e,t,n)}function ei(e,t,n){return 40&e.type?Pe(e,n):null}let ti,ni=ei;function ri(e,t){ni=e,ti=t}function ii(e,t,n,r){const i=Zr(e,r,t),s=t[11],o=Xr(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Qr(s,i,n[a],o,!1);else Qr(s,i,n,o,!1);void 0!==ti&&ti(s,r,t,n,i)}function si(e,t){if(null!==t){const n=t.type;if(3&n)return Pe(t,e);if(4&n)return ai(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return si(e,n);{const n=e[t.index];return de(n)?ai(-1,n):Re(n)}}if(32&n)return Or(t,e)()||Re(e[t.index]);{const n=oi(e,t);return null!==n?Array.isArray(n)?n[0]:si(Dr(e[16]),n):si(e,t.next)}}return null}function oi(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ai(e,t){const n=ue+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return si(e,r)}return t[7]}function li(e,t,n){const r=Jr(e,t);r&&function(e,t,n,r){xe(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function ci(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Er(Re(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)ci(e,t,n.child,r,i,s,!1),Vr(t,e,i,a,s);else if(32&l){const o=Or(n,r);let l;for(;l=o();)Vr(t,e,i,l,s);Vr(t,e,i,a,s)}else 16&l?hi(e,t,r,n,i,s):Vr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function ui(e,t,n,r,i,s){ci(n,r,e.firstChild,t,i,s,!1)}function hi(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Vr(t,e,i,a[l],s);else ci(e,t,a,o[3],i,s,!0)}function di(e,t,n){xe(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function pi(e,t,n){xe(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function fi(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const mi="ng-template";function gi(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==fi(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function yi(e){return 4===e.type&&e.value!==mi}function _i(e,t,n){return t===(4!==e.type||n?e.value:mi)}function vi(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Rt(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!_i(e,l,n)||""===l&&1===t.length){if(wi(r))return!1;o=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!gi(e.attrs,c,n)){if(wi(r))return!1;o=!0}continue}const u=bi(8&r?"class":l,i,yi(e),n);if(-1===u){if(wi(r))return!1;o=!0;continue}if(""!==c){let e;e=u>s?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==fi(t,c,0)||2&r&&c!==e){if(wi(r))return!1;o=!0}}}}else{if(!o&&!wi(r)&&!wi(l))return!1;if(o&&wi(l))continue;o=!1,r=l|1&r}}return wi(r)||o}function wi(e){return 0==(1&e)}function bi(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ei(e,t,n=!1){for(let r=0;r<t.length;r++)if(vi(e,t[r],n))return!0;return!1}function Ci(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function Si(e,t){return e?":not("+t.trim()+")":t}function Ti(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||wi(o)||(t+=Si(s,i),i=""),r=o,s=s||!wi(r);n++}return""!==i&&(t+=Si(s,i)),t}const Ii={};function ki(e){xi(He(),ze(),yt()+e,Je())}function xi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&Et(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Ct(t,r,0,n)}_t(n)}function Ai(e,t){return e<<17|t<<2}function Ri(e){return e>>17&32767}function Ni(e){return 2|e}function Pi(e){return(131068&e)>>2}function Oi(e,t){return-131069&e|t<<2}function Di(e){return 1|e}function Li(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];lt(i),n.contentQueries(2,t[s],s)}}}function Fi(e,t,n,r,i,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,Ue(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function Mi(e,t,n,r,i){let s=e.data[t];if(null===s)s=Vi(e,t,n,r,i),qe.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=We();s.injectorIndex=null===e?-1:e.injectorIndex}return Ke(s,!0),s}function Vi(e,t,n,r,i){const s=Ze(),o=Ye(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Ui(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ji(e,t,n){ht(t);try{const r=e.viewQuery;null!==r&&ys(1,r,n);const i=e.template;null!==i&&zi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Li(e,t),e.staticViewQueries&&ys(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)ds(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,gt()}}function qi(e,t,n,r){const i=t[2];if(256==(256&i))return;ht(t);const s=Je();try{Ue(t),qe.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&zi(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&Et(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Ct(t,n,0,null),St(t,0)}if(function(e){for(let t=Lr(e);null!==t;t=Fr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&je(r,1),n[2]|=1024}}}(t),function(e){for(let t=Lr(e);null!==t;t=Fr(t))for(let e=ue;e<t.length;e++){const n=t[e],r=n[1];Me(n)&&qi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Li(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&Et(t,n)}else{const n=e.contentHooks;null!==n&&Ct(t,n,1),St(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)_t(~r);else{const i=r,s=n[++e],o=n[++e];st(s,i),o(2,t[i])}}}finally{_t(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)us(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&ys(2,l,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&Et(t,n)}else{const n=e.viewHooks;null!==n&&Ct(t,n,2),St(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,je(t[3],-1))}finally{gt()}}function Bi(e,t,n,r){const i=t[10],s=!Je(),o=Fe(t);try{s&&!o&&i.begin&&i.begin(),o&&ji(e,t,r),qi(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function zi(e,t,n,r,i){const s=yt(),o=2&r;try{_t(-1),o&&t.length>ce&&xi(e,t,ce,Je()),n(r,i)}finally{_t(s)}}function Hi(e,t,n){if(pe(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Gi(e,t,n){Be()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||jt(n,t),Er(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&ss(t,n,r);const l=Jt(t,e,a,n);Er(l,t),null!==o&&as(0,a-i,l,r,0,o),s&&(Le(n.index,t)[8]=l)}}(e,t,n,Pe(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qe.lFrame.currentDirectiveIndex;try{_t(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];ot(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||es(r,i)}}finally{_t(-1),ot(o)}}(e,t,n))}function $i(e,t,n=Pe){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Zi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Wi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Wi(e,t,n,r,i,s,o,a,l,c){const u=ce+r,h=u+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ii);return n}(u,h),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function Ki(e,t,n,r){const i=vs(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&ws(e).push(r,i.length-1))}function Yi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Qi(e,t,n,r,i,s,o,a){const l=Pe(t,n);let c,u=t.inputs;var h;!a&&null!=u&&(c=u[r])?(Es(e,n,c,r,i),fe(t)&&function(e,t){const n=Le(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,xe(s)?s.setProperty(l,r,i):Nt(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ji(e,t,n,r){let i=!1;if(Be()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Ei(n,o.selectors,!1)&&(i||(i=[]),Ht(jt(n,t),e,o.type),ge(o)?(ts(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,rs(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=Ui(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Pt(n.mergedAttrs,c.hostAttrs),is(e,n,t,l,c),ns(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===i||yi(t)?null:ls(n,i);s.push(c),o=Yi(n,l,o),a=Yi(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new g("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=Pt(n.mergedAttrs,n.attrs),i}function Xi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function es(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ts(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ns(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function rs(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function is(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ye(i.type)),o=new xt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Xi(e,t,0,r,Ui(e,n,i.hostVars,Ii),i)}function ss(e,t,n){const r=Pe(t,e),i=Zi(n),s=e[10],o=ps(e,Fi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function os(e,t,n,r,i,s,o){if(null==s)xe(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);xe(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}function as(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function ls(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function cs(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function us(e,t){const n=Le(t,e);if(Me(n)){const e=n[1];80&n[2]?qi(e,n,e.template,n[8]):n[5]>0&&hs(n)}}function hs(e){for(let n=Lr(e);null!==n;n=Fr(n))for(let e=ue;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];qi(e,t,e.template,t[8])}else t[5]>0&&hs(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Le(t[n],e);Me(r)&&r[5]>0&&hs(r)}}function ds(e,t){const n=Le(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),ji(r,n,n[8])}function ps(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function fs(e){for(;e;){e[2]|=64;const t=Dr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ms(e,t,n){const r=t[10];r.begin&&r.begin();try{qi(e,t,e.template,n)}catch(i){throw bs(t,i),i}finally{r.end&&r.end()}}function gs(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Cr(n),i=r[1];Bi(i,r,i.template,n)}}(e[8])}function ys(e,t,n){lt(0),t(e,n)}const _s=(()=>Promise.resolve(null))();function vs(e){return e[7]||(e[7]=[])}function ws(e){return e.cleanup||(e.cleanup=[])}function bs(e,t){const n=e[9],r=n?n.get(Ir,null):null;r&&r.handleError(t)}function Es(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Cs(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=h(i,e):2==s&&(r=h(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Ss=new ln("INJECTOR",-1);class Ts{get(e,t=vn){if(t===vn){const t=new Error(`NullInjectorError: No provider for ${u(e)}!`);throw t.name="NullInjectorError",t}return t}}const Is=new ln("Set Injector scope."),ks={},xs={};let As;function Rs(){return void 0===As&&(As=new Ts),As}function Ns(e,t=null,n=null,r){return new Ps(e,n,t||Rs(),r)}class Ps{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&dn(t,n=>this.processProvider(n,e,t)),dn([e],e=>this.processInjectorType(e,[],i)),this.records.set(Ss,Ls(void 0,this));const s=this.records.get(Is);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:u(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=vn,n=R.Default){this.assertNotDestroyed();const r=Sn(this),i=P(void 0);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof ln)&&C(e);t=n&&this.injectableDefInScope(n)?Ls(Os(e),ks):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?Rs():this.parent).get(e,t=n&R.Optional&&t===vn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(u(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[bn]&&i.unshift(t[bn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=u(t);if(Array.isArray(t))i=t.map(u).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):u(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(wn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{P(i),Sn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(u(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let r=T(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{dn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];dn(r,e=>this.processProvider(e,n,r||z))}}this.injectorDefTypes.add(s);const a=ye(s)||(()=>new s);this.records.set(s,Ls(a,ks));const l=r.providers;if(null!=l&&!o){const t=e;dn(l,e=>this.processProvider(e,t,l))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Ms(e=f(e))?e:f(e&&e.provide);const i=function(e,t,n){return Fs(e)?Ls(void 0,e.useValue):Ls(Ds(e),ks)}(e);if(Ms(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Ls(void 0,ks,!0),t.factory=()=>xn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===ks&&(t.value=xs,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Os(e){const t=C(e),n=null!==t?t.factory:ye(e);if(null!==n)return n;if(e instanceof ln)throw new Error(`Token ${u(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=mn(t,"?");throw new Error(`Can't resolve all parameters for ${u(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[I]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Ds(e,t,n){let r;if(Ms(e)){const t=f(e);return ye(t)||Os(t)}if(Fs(e))r=()=>f(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...xn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>In(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ye(t)||Os(t);r=()=>new t(...xn(e.deps))}var i;return r}function Ls(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Fs(e){return null!==e&&"object"==typeof e&&En in e}function Ms(e){return"function"==typeof e}const Vs=function(e,t,n){return function(e,t=null,n=null,r){const i=Ns(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class Us{static create(e,t){return Array.isArray(e)?Vs(e,t,""):Vs(e.providers,e.parent,e.name||"")}}function js(e,t){bt(Cr(e)[1],$e())}function qs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=Bs(e.inputs),t.declaredInputs=Bs(e.declaredInputs),t.outputs=Bs(e.outputs);const n=i.hostBindings;n&&Gs(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&zs(e,s),o&&Hs(e,o),c(e.inputs,i.inputs),c(e.declaredInputs,i.declaredInputs),c(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===qs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Pt(i.hostAttrs,n=Pt(n,i.hostAttrs))}}(r)}function Bs(e){return e===B?{}:e===z?[]:e}function zs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Hs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Gs(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}Us.THROW_IF_NOT_FOUND=vn,Us.NULL=new Ts,Us.\u0275prov=b({token:Us,providedIn:"any",factory:()=>In(Ss)}),Us.__NG_ELEMENT_ID__=-1;let $s=null;function Zs(){if(!$s){const e=q.Symbol;if(e&&e.iterator)$s=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&($s=n)}}}return $s}class Ws{constructor(e){this.wrapped=e}static wrap(e){return new Ws(e)}static unwrap(e){return Ws.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ws}}function Ks(e){return!!Ys(e)&&(Array.isArray(e)||!(e instanceof Map)&&Zs()in e)}function Ys(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Qs(e,t,n){return e[t]=n}function Js(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Xs(e,t,n,r){const i=Js(e,t,n);return Js(e,t+1,r)||i}function eo(e,t,n,r){const i=ze();return Js(i,nt(),t)&&(He(),function(e,t,n,r,i,s){const o=Pe(e,t);os(t[11],o,s,e.value,n,r,i)}(vt(),i,e,t,n,r)),eo}function to(e,t,n,r){return Js(e,nt(),n)?t+y(n)+r:Ii}function no(e,t,n,r,i,s,o,a){const l=ze(),c=He(),u=e+ce,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,l){const c=t.consts,u=Mi(t,e,4,o||null,Ve(c,a));Ji(t,n,u,Ve(c,l)),bt(t,u);const h=u.tViews=Wi(2,u,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,i,s,o):c.data[u];Ke(h,!1);const d=l[11].createComment("");ii(c,l,d,h),Er(d,l),ps(l,l[u]=cs(d,l,d,h)),me(h)&&Gi(c,l,h),null!=o&&$i(l,h,a)}function ro(e){return De(qe.lFrame.contextLView,ce+e)}function io(e,t=R.Default){const n=ze();return null===n?In(e,t):Zt($e(),n,f(e),t)}function so(e,t,n){const r=ze();return Js(r,nt(),t)&&Qi(He(),vt(),r,e,t,r[11],n,!1),so}function oo(e,t,n,r,i){const s=i?"class":"style";Es(e,n,t.inputs[s],s,r)}function ao(e,t,n,r){const i=ze(),s=He(),o=ce+e,a=i[11],l=i[o]=Br(a,t,qe.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,l=Mi(t,e,2,i,Ve(a,s));return Ji(t,n,l,Ve(a,o)),null!==l.attrs&&Cs(l,l.attrs,!1),null!==l.mergedAttrs&&Cs(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,0,t,n,r):s.data[o];Ke(c,!0);const u=c.mergedAttrs;null!==u&&At(a,l,u);const h=c.classes;null!==h&&pi(a,l,h);const d=c.styles;null!==d&&di(a,l,d),64!=(64&c.flags)&&ii(s,i,l,c),0===qe.lFrame.elementDepthCount&&Er(l,i),qe.lFrame.elementDepthCount++,me(c)&&(Gi(s,i,c),Hi(s,c,i)),null!==r&&$i(i,c)}function lo(){let e=$e();Ye()?Qe():(e=e.parent,Ke(e,!1));const t=e;qe.lFrame.elementDepthCount--;const n=He();n.firstCreatePass&&(bt(n,e),pe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&oo(n,t,ze(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&oo(n,t,ze(),t.stylesWithoutHost,!1)}function co(e,t,n,r){ao(e,t,n,r),lo()}function uo(e,t,n){const r=ze(),i=He(),s=e+ce,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Ve(s,r),a=Mi(t,e,8,"ng-container",o);return null!==o&&Cs(a,o,!0),Ji(t,n,a,Ve(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];Ke(o,!0);const a=r[s]=r[11].createComment("");ii(i,r,a,o),Er(a,r),me(o)&&(Gi(i,r,o),Hi(i,o,r)),null!=n&&$i(r,o)}function ho(){let e=$e();const t=He();Ye()?Qe():(e=e.parent,Ke(e,!1)),t.firstCreatePass&&(bt(t,e),pe(e)&&t.queries.elementEnd(e))}function po(){return ze()}function fo(e){return!!e&&"function"==typeof e.then}function mo(e){return!!e&&"function"==typeof e.subscribe}const go=mo;function yo(e,t,n,r){const i=ze(),s=He(),o=$e();return function(e,t,n,r,i,s,o,a){const l=me(r),c=e.firstCreatePass&&ws(e),u=vs(t);let h=!0;if(3&r.type||a){const d=Pe(r,t),p=a?a(d):d,f=u.length,m=a?e=>a(Re(e[r.index])):r.index;if(xe(n)){let o=null;if(!a&&l&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=vo(r,t,0,s,!1);const e=n.listen(p,i,s);u.push(s,e),c&&c.push(i,m,f,f+1)}}else s=vo(r,t,0,s,!0),p.addEventListener(i,s,o),u.push(s),c&&c.push(i,m,f,o)}else s=vo(r,t,0,s,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),yo}function _o(e,t,n,r){try{return!1!==n(r)}catch(i){return bs(e,i),!1}}function vo(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Le(e.index,t):t;0==(32&t[2])&&fs(o);let a=_o(t,0,r,s),l=n.__ngNextListenerFn__;for(;l;)a=_o(t,0,l,s)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function wo(e=1){return function(e){return(qe.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,qe.lFrame.contextLView))[8]}(e)}function bo(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?Ei(e,s,!0):Ci(r,s))return i}else n=i}return n}function Eo(e){const t=ze()[16][6];if(!t.projection){const n=t.projection=mn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?bo(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Co(e,t=0,n){const r=ze(),i=He(),s=Mi(i,ce+e,16,null,n||null);null===s.projection&&(s.projection=t),Qe(),64!=(64&s.flags)&&function(e,t,n){hi(t[11],0,t,n,Zr(e,n,t),Xr(n.parent||t[6],n,t))}(i,r,s)}function So(e,t,n){return To(e,"",t,"",n),So}function To(e,t,n,r,i){const s=ze(),o=to(s,t,n,r);return o!==Ii&&Qi(He(),vt(),s,e,o,s[11],i,!1),To}function Io(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Ri(s):Pi(s),l=!1;for(;0!==a&&(!1===l||o);){const n=e[a+1];ko(e[a],t)&&(l=!0,e[a+1]=r?Di(n):Ni(n)),a=r?Ri(n):Pi(n)}l&&(e[n+1]=r?Ni(s):Di(s))}function ko(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&_n(e,t)>=0}const xo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ao(e){return e.substring(xo.key,xo.keyEnd)}function Ro(e,t){const n=xo.textEnd;return n===t?-1:(t=xo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,xo.key=t,n),No(e,t,n))}function No(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Po(e,t,n){return Fo(e,t,n,!1),Po}function Oo(e,t){return Fo(e,t,null,!0),Oo}function Do(e){Mo(gn,Lo,e,!0)}function Lo(e,t){for(let n=function(e){return function(e){xo.key=0,xo.keyEnd=0,xo.value=0,xo.valueEnd=0,xo.textEnd=e.length}(e),Ro(e,No(e,0,xo.textEnd))}(t);n>=0;n=Ro(t,n))gn(e,Ao(t),!0)}function Fo(e,t,n,r){const i=ze(),s=He(),o=rt(2);s.firstUpdatePass&&Uo(s,e,o,r),t!==Ii&&Js(i,o,t)&&Bo(s,s.data[yt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=u(qn(e)))),e}(t,n),r,o)}function Mo(e,t,n,r){const i=He(),s=rt(2);i.firstUpdatePass&&Uo(i,null,s,r);const o=ze();if(n!==Ii&&Js(o,s,n)){const a=i.data[yt()];if(Go(a,r)&&!Vo(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=h(e,n||"")),oo(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===Ii&&(i=z);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const d=l<i.length?i[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let f,m=null;u===h?(l+=2,c+=2,d!==p&&(m=h,f=p)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,f=p),null!==m&&Bo(e,t,n,r,m,f,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return z;const r=[],i=qn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function Vo(e,t){return t>=e.expandoStartIndex}function Uo(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[yt()],o=Vo(e,n);Go(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=qe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=qo(n=jo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=jo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Pi(r))return e[Ri(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=jo(null,e,t,n[1],r),n=qo(n,t.attrs,r),function(e,t,n,r){e[Ri(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=qo(r,e[s].hostAttrs,n);return qo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Ri(o),l=Pi(o);e[r]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||_n(e,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const t=Ri(e[a+1]);e[r+1]=Ai(t,a),0!==t&&(e[t+1]=Oi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Ai(a,0),0!==a&&(e[a+1]=Oi(e[a+1],r)),a=r;else e[r+1]=Ai(l,0),0===a?a=r:e[l+1]=Oi(e[l+1],r),l=r;u&&(e[r+1]=Ni(e[r+1])),Io(e,c,r,!0),Io(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&_n(s,t)>=0&&(n[r+1]=Di(n[r+1]))}(t,c,e,r,s),o=Ai(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function jo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=qo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function qo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),gn(e,o,!!n||t[++s]))}return void 0===e?null:e}function Bo(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];Ho(1==(1&c)?zo(l,t,n,i,Pi(c),o):void 0)||(Ho(s)||2==(2&c)&&(s=zo(l,null,n,i,a,o)),function(e,t,n,r,i){const s=xe(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Nr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Nr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ne(yt(),n),i,s))}function zo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),l=s?t[1]:t,c=null===l;let u=n[i+1];u===Ii&&(u=c?z:void 0);let h=c?yn(u,r):l===r?u:void 0;if(s&&!Ho(h)&&(h=yn(t,r)),Ho(h)&&(a=h,o))return a;const d=e[i+1];i=o?Ri(d):Pi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=yn(e,r))}return a}function Ho(e){return void 0!==e}function Go(e,t){return 0!=(e.flags&(t?16:32))}function $o(e,t=""){const n=ze(),r=He(),i=e+ce,s=r.firstCreatePass?Mi(r,i,1,t,null):r.data[i],o=n[i]=Ur(n[11],t);ii(r,n,o,s),Ke(s,!1)}function Zo(e){return Wo("",e,""),Zo}function Wo(e,t,n){const r=ze(),i=to(r,e,t,n);return i!==Ii&&function(e,t,n){const r=Ne(t,e);jr(e[11],r,n)}(r,yt(),i),Wo}function Ko(e,t,n,r,i,s,o,a,l){Mo(gn,Lo,function(e,t,n,r,i,s,o,a,l,c){const u=function(e,t,n,r,i,s){const o=Xs(e,t,n,r);return Xs(e,t+2,i,s)||o}(e,tt(),n,i,o,l);return rt(4),u?t+y(n)+r+y(i)+s+y(o)+a+y(l)+c:Ii}(ze(),e,t,n,r,i,s,o,a,l),!0)}function Yo(e,t,n){const r=ze();return Js(r,nt(),t)&&Qi(He(),vt(),r,e,t,r[11],n,!0),Yo}const Qo=void 0;var Jo=["en",[["a","p"],["AM","PM"],Qo],[["AM","PM"],Qo,Qo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qo,"{1} 'at' {0}",Qo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Xo={};function ea(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=na(t);if(n)return n;const r=t.split("-")[0];if(n=na(r),n)return n;if("en"===r)return Jo;throw new Error(`Missing locale data for the locale "${e}".`)}function ta(e){return ea(e)[ra.PluralCase]}function na(e){return e in Xo||(Xo[e]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[e]),Xo[e]}var ra=(()=>((ra=ra||{})[ra.LocaleId=0]="LocaleId",ra[ra.DayPeriodsFormat=1]="DayPeriodsFormat",ra[ra.DayPeriodsStandalone=2]="DayPeriodsStandalone",ra[ra.DaysFormat=3]="DaysFormat",ra[ra.DaysStandalone=4]="DaysStandalone",ra[ra.MonthsFormat=5]="MonthsFormat",ra[ra.MonthsStandalone=6]="MonthsStandalone",ra[ra.Eras=7]="Eras",ra[ra.FirstDayOfWeek=8]="FirstDayOfWeek",ra[ra.WeekendRange=9]="WeekendRange",ra[ra.DateFormat=10]="DateFormat",ra[ra.TimeFormat=11]="TimeFormat",ra[ra.DateTimeFormat=12]="DateTimeFormat",ra[ra.NumberSymbols=13]="NumberSymbols",ra[ra.NumberFormats=14]="NumberFormats",ra[ra.CurrencyCode=15]="CurrencyCode",ra[ra.CurrencySymbol=16]="CurrencySymbol",ra[ra.CurrencyName=17]="CurrencyName",ra[ra.Currencies=18]="Currencies",ra[ra.Directionality=19]="Directionality",ra[ra.PluralCase=20]="PluralCase",ra[ra.ExtraData=21]="ExtraData",ra))();const ia=["zero","one","two","few","many"],sa="en-US",oa={marker:"element"},aa={marker:"ICU"};var la=(()=>((la=la||{})[la.SHIFT=2]="SHIFT",la[la.APPEND_EAGERLY=1]="APPEND_EAGERLY",la[la.COMMENT=2]="COMMENT",la))();let ca=sa;function ua(e){var t;null==(t=e)&&w("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(ca=e.toLowerCase().replace(/_/g,"-"))}function ha(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ei(e,0,n):Re(n[i])}function da(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)Kr(e,o,n[s[t]],a,!1)}}function pa(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];fa(r)||ma(r,t)&&null===ga(r)&&ya(r,t.index)}}function fa(e){return!(64&e.type)}function ma(e,t){return fa(t)||e.index>t.index}function ga(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function ya(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(ri(ha,da),e.insertBeforeIndex=t)}function _a(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function va(e,t,n){const r=Vi(e,n,64,null,null);return pa(t,r),r}function wa(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let ba=0,Ea=0;function Ca(e,t,n,r){const i=n[11];let s,o=null;for(let a=0;a<t.length;a++){const l=t[a];if("string"==typeof l){const e=t[++a];null===n[e]&&(n[e]=Ur(i,l))}else if("number"==typeof l)switch(1&l){case 0:const c=l>>>17;let u,h;if(null===o&&(o=c,s=Jr(i,r)),c===o?(u=r,h=s):(u=null,h=Re(n[c])),null!==h){const t=(131070&l)>>>1;Kr(i,h,n[t],u,!1);const r=_a(e,t);if(null!==r&&"object"==typeof r){const t=wa(r,n);null!==t&&Ca(e,r.create[t],n,n[r.anchorIdx])}}break;case 1:const d=t[++a],p=t[++a];os(i,Ne(l>>>1,n),null,null,d,p,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${l}"`)}else switch(l){case aa:const e=t[++a],r=t[++a];null===n[r]&&Er(n[r]=qr(i,e),n);break;case oa:const s=t[++a],o=t[++a];null===n[o]&&Er(n[o]=Br(i,s,null),n)}}}function Sa(e,t,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=y(t[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],l=n[++o],c=e.data[a];"string"==typeof c?os(t[11],t[a],null,c,s,i,l):Qi(e,c,t,s,i,t[11],l,!1);break;case 0:const u=t[a];null!==u&&jr(t[11],u,i);break;case 2:Ia(e,_a(e,a),t,i);break;case 3:Ta(e,_a(e,a),r,t)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=_a(e,i>>>2);t[n.currentCaseLViewIndex]<0&&Ta(e,n,r,t)}}s+=a}}function Ta(e,t,n,r){let i=r[t.currentCaseLViewIndex];if(null!==i){let s=ba;i<0&&(i=r[t.currentCaseLViewIndex]=~i,s=-1),Sa(e,r,t.update[i],n,s)}}function Ia(e,t,n,r){const i=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=ta(t)(parseInt(e,10)),r=ia[n];return void 0!==r?r:"other"}(t,ca);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(wa(t,n)!==i&&(ka(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[t.anchorIdx];r&&Ca(e,t.create[i],n,r)}}function ka(e,t,n){let r=wa(t,n);if(null!==r){const i=t.remove[r];for(let t=0;t<i.length;t++){const r=i[t];if(r>0){const e=Ne(r,n);null!==e&&li(n[11],e)}else ka(e,_a(e,~r),n)}}}const xa=/\ufffd(\d+):?\d*\ufffd/gi,Aa=/\ufffd(\d+)\ufffd/,Ra=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Na=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Pa=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Oa=/\uE500/g;function Da(e,t,n,r,i,s,o){const a=Ui(e,r,1,null);let l=a<<la.SHIFT,c=We();t===c&&(c=null),null===c&&(l|=la.APPEND_EAGERLY),o&&(l|=la.COMMENT,void 0===Pr&&(Pr=function(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=wa(e,t);n=null!==i?e.remove[i]:z}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}())),i.push(l,null===s?"":s);const u=Vi(e,a,o?32:1,null===s?"":s,null);pa(n,u);const h=u.index;return Ke(u,!1),null!==c&&t!==c&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(ri(ha,da),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(t))}(c,h),u}function La(e,t,n,r,i,s,o){const a=o.match(xa),l=Da(e,t,n,s,r,a?null:o,!1);a&&Fa(i,o,l.index,null,0,null)}function Fa(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const l=o+2,c=t.split(xa);let u=0;for(let h=0;h<c.length;h++){const t=c[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),u|=Ma(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=u,e[a]=e.length-l,u}function Ma(e){return 1<<Math.min(e,31)}function Va(e){let t,n,r="",i=0,s=!1;for(;null!==(t=Na.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function Ua(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Ui(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(Ma(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const l=i.values;for(let c=0;c<l.length;c++){const s=l[c],u=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=u.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Ba(e,a,t,n,r,i.cases[c],s.join(""),u)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function ja(e){const t=[],n=[];let r=1,i=0;const s=qa(e=e.replace(Ra,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=qa(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function qa(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);Ra.test(n)?r.push(ja(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function Ba(e,t,n,r,i,s,o,a){const l=[],c=[],u=[];t.cases.push(s),t.create.push(l),t.remove.push(c),t.update.push(u);const h=Kn(ke()).getInertBodyElement(o),d=vr(h)||h;return d?za(e,t,n,r,l,c,u,d,i,a,0):0}function za(e,t,n,r,i,s,o,a,l,c,u){let h=0,d=a.firstChild;for(;d;){const a=Ui(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const p=d,f=p.tagName.toLowerCase();if(lr.hasOwnProperty(f)){$a(i,oa,f,l,a),e.data[a]=f;const m=p.attributes;for(let e=0;e<m.length;e++){const t=m.item(e),n=t.name.toLowerCase();t.value.match(xa)?hr.hasOwnProperty(n)&&Fa(o,t.value,a,t.name,0,cr[n]?er:ur[n]?tr:null):Za(i,a,t)}h=za(e,t,n,r,i,s,o,d,a,c,u+1)|h,Ha(s,a,u)}break;case Node.TEXT_NODE:const m=d.textContent||"",g=m.match(xa);$a(i,null,g?"":m,l,a),Ha(s,a,u),g&&(h=Fa(o,m,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=Aa.exec(d.textContent||"");if(y){const t=c[parseInt(y[1],10)];$a(i,aa,"",l,a),Ua(e,n,r,l,t,a),Ga(s,a,u)}}d=d.nextSibling}return h}function Ha(e,t,n){0===n&&e.push(t)}function Ga(e,t,n){0===n&&(e.push(~t),e.push(t))}function $a(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function Za(e,t,n){e.push(t<<1|1,n.name,n.value)}function Wa(e,t,n){(function(e,t,n=-1){const r=He(),i=ze(),s=ce+e,o=Ve(r.consts,t),a=We();r.firstCreatePass&&function(e,t,n,r,i,s){const o=We(),a=[],l=[],c=[[]],u=(h=i=function(e,t){if(function(e){return-1===e}(t))return Va(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return Va(e.substring(n,r))}}(i,s),h.replace(Oa," ")).split(Pa);var h;for(let d=0;d<u.length;d++){let r=u[d];if(0==(1&d)){const s=qa(r);for(let r=0;r<s.length;r++){let u=s[r];if(0==(1&r)){const t=u;""!==t&&La(e,o,c[0],a,l,n,t)}else{const r=u;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ua(e,n,l,t,r,Da(e,o,c[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),ce+Number.parseInt(r.substring(t?2:1)));if(t)c.shift(),Ke(We(),!1);else{const t=va(e,c[0],n);c.unshift([]),Ke(t,!0)}}}e.data[r]={create:a,update:l}}(r,null===a?0:a.index,i,s,o,n);const l=r.data[s],c=Wr(r,a===i[6]?null:a,i);!function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],l=(o&la.COMMENT)===la.COMMENT,c=(o&la.APPEND_EAGERLY)===la.APPEND_EAGERLY,u=o>>>la.SHIFT;let h=e[u];null===h&&(h=e[u]=l?i.createComment(a):Ur(i,a)),c&&null!==n&&Kr(i,n,h,r,!1)}}(i,l.create,c,a&&8&a.type?i[a.index]:null),it(!0)})(e,t,n),it(!1)}function Ka(e){return Js(ze(),nt(),e)&&(ba|=1<<Math.min(Ea,31)),Ea++,Ka}function Ya(e){!function(e,t,n){if(Ea>0){const r=e.data[n];Sa(e,t,Array.isArray(r)?r:r.update,tt()-Ea-1,ba)}ba=0,Ea=0}(He(),ze(),e+ce)}function Qa(e,t,n,r,i){if(e=f(e),Array.isArray(e))for(let s=0;s<e.length;s++)Qa(e[s],t,n,r,i);else{const s=He(),o=ze();let a=Ms(e)?e:f(e.provide),l=Ds(e);const c=$e(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Ms(e)||!e.multi){const r=new xt(l,i,io),p=el(a,t,i?u:u+d,h);-1===p?(Ht(jt(c,o),s,a),Ja(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=el(a,t,u+d,h),f=el(a,t,u,u+d),m=p>=0&&n[p],g=f>=0&&n[f];if(i&&!g||!i&&!m){Ht(jt(c,o),s,a);const u=function(e,t,n,r,i){const s=new xt(e,n,io);return s.multi=[],s.index=t,s.componentProviders=0,Xa(s,i,r&&!n),s}(i?nl:tl,n.length,i,r,l);!i&&g&&(n[f].providerFactory=u),Ja(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),o.push(u)}else Ja(s,e,p>-1?p:f,Xa(n[i?f:p],l,!i&&r));!i&&r&&g&&n[f].componentProviders++}}}function Ja(e,t,n,r){const i=Ms(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Xa(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function el(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function tl(e,t,n,r){return rl(this.multi,[])}function nl(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Jt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),rl(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],rl(i,s);return s}function rl(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function il(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=He();if(r.firstCreatePass){const i=ge(e);Qa(n,r.data,r.blueprint,i,!0),Qa(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class sl{}class ol{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${u(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class al{}function ll(...e){}function cl(e,t){return new hl(Pe(e,t))}al.NULL=new ol;const ul=function(){return cl($e(),ze())};let hl=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=ul,e})();function dl(e){return e instanceof hl?e.nativeElement:e}class pl{}let fl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ml(),e})();const ml=function(){const e=ze(),t=Le($e().index,e);return function(e){return e[11]}(he(t)?t:e)};let gl=(()=>{class e{}return e.\u0275prov=b({token:e,providedIn:"root",factory:()=>null}),e})();class yl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _l=new yl("12.1.5");class vl{constructor(){}supports(e){return Ks(e)}create(e){return new bl(e)}}const wl=(e,t)=>t;class bl{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wl}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<Tl(n,r,i)?t:n,o=Tl(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ks(e))throw new Error(`Error trying to diff '${u(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Zs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new El(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Sl),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class El{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cl{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Sl{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Cl,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tl(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Il{constructor(){}supports(e){return e instanceof Map||Ys(e)}create(){return new kl}}class kl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ys(e)))throw new Error(`Error trying to diff '${u(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new xl(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class xl{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Al(){return new Rl([new vl])}let Rl=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Al()),deps:[[e,new Pn,new Nn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=b({token:e,providedIn:"root",factory:Al}),e})();function Nl(){return new Pl([new Il])}let Pl=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Nl()),deps:[[e,new Pn,new Nn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=b({token:e,providedIn:"root",factory:Nl}),e})();function Ol(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Re(s)),de(s))for(let e=ue;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Ol(t[1],t,n,r)}const o=n.type;if(8&o)Ol(e,t,n.child,r);else if(32&o){const e=Or(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=oi(t,n);if(Array.isArray(e))r.push(...e);else{const n=Dr(t[16]);Ol(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Dl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ol(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(de(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Hr(e,n),fn(t,n))}this._attachedToViewContainer=!1}Gr(this._lView[1],this._lView)}onDestroy(e){Ki(this._lView[1],this._lView,null,e)}markForCheck(){fs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ms(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Xe(!0);try{ms(e,t,n)}finally{Xe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,ui(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Ll extends Dl{constructor(e){super(e),this._view=e}detectChanges(){gs(this._view)}checkNoChanges(){!function(e){Xe(!0);try{gs(e)}finally{Xe(!1)}}(this._view)}get context(){return null}}const Fl=function(e){return function(e,t,n){if(fe(e)&&!n){const n=Le(e.index,t);return new Dl(n,n)}return 47&e.type?new Dl(t[16],t):null}($e(),ze(),16==(16&e))};let Ml=(()=>{class e{}return e.__NG_ELEMENT_ID__=Fl,e})();const Vl=[new Il],Ul=new Rl([new vl]),jl=new Pl(Vl),ql=function(){return Gl($e(),ze())};let Bl=(()=>{class e{}return e.__NG_ELEMENT_ID__=ql,e})();const zl=Bl,Hl=class extends zl{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Fi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),ji(t,n,e),new Dl(n)}};function Gl(e,t){return 4&e.type?new Hl(t,e,cl(e,t)):null}class $l{}class Zl{}const Wl=function(){return ec($e(),ze())};let Kl=(()=>{class e{}return e.__NG_ELEMENT_ID__=Wl,e})();const Yl=Kl,Ql=class extends Yl{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return cl(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){const e=zt(this._hostTNode,this._hostLView);if(Dt(e)){const t=Ft(e,this._hostLView),n=Lt(e);return new tn(t[1].data[n+8],t)}return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Jl(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ue}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get($l,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(de(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Ql(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=ue+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-ue?(t[4]=n[i],pn(n,ue+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=ai(i,s),a=n[11],l=Jr(a,s[7]);return null!==l&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,ui(e,r,n,1,i,s)}(r,s[6],a,n,l,o),e.attachToViewContainerRef(),pn(Xl(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Jl(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Hr(this._lContainer,t);n&&(fn(Xl(this._lContainer),t),Gr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Hr(this._lContainer,t);return n&&null!=fn(Xl(this._lContainer),t)?new Dl(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Jl(e){return e[8]}function Xl(e){return e[8]||(e[8]=[])}function ec(e,t){let n;const r=t[e.index];if(de(r))n=r;else{let i;if(8&e.type)i=Re(r);else{const n=t[11];i=n.createComment("");const r=Pe(e,t);Kr(n,Jr(n,r),i,function(e,t){return xe(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=cs(r,t,i,e),ps(t,n)}return new Ql(n,e,t)}const tc={};class nc extends al{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ae(e);return new sc(t,this.ngModule)}}function rc(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const ic=new ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ar});class sc extends sl{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Ti).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return rc(this.componentDef.inputs)}get outputs(){return rc(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,tc,i);return s!==tc||r===tc?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(pl,Ae),o=i.get(gl,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(xe(e))return e.selectRootElement(t,n===F.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Br(s.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?Se:"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Ar,clean:_s,playerHandler:null,flags:0},d=Wi(0,null,null,1,0,null,null,null,null,null),p=Fi(null,d,h,u,null,null,s,a,o,i);let f,m;ht(p);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Mi(o,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(Cs(a,l,!0),null!==e&&(At(i,e,l),null!==a.classes&&pi(i,e,a.classes),null!==a.styles&&di(i,e,a.styles)));const c=r.createRenderer(e,t),u=Fi(n,Zi(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Ht(jt(a,n),o,t.type),ts(o,a),rs(a,n.length,1)),ps(n,u),n[20]=u}(c,this.componentDef,p,s,a);if(c)if(n)At(a,c,["ng-version",_l.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!wi(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&At(a,c,e),t&&t.length>0&&pi(a,c,t.join(" "))}if(m=Oe(d,ce),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=$e();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),is(e,r,t,Ui(e,t,1,null),n));const i=Jt(t,e,r.directiveStart,r);Er(i,t);const s=Pe(r,t);return s&&Er(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=$e();t.contentQueries(1,o,e.directiveStart)}const a=$e();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(_t(a.index),Xi(n[1],a,0,a.directiveStart,a.directiveEnd,t),es(t,o)),o}(e,this.componentDef,p,h,[js]),ji(d,p,null)}finally{gt()}return new oc(this.componentType,f,cl(m,p),p,m)}}class oc extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Ll(r),this.componentType=e}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ac=new Map;class lc extends $l{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nc(this);const n=le(e),r=e[W]||null;r&&ua(r),this._bootstrapComponents=Rr(n.bootstrap),this._r3Injector=Ns(e,t,[{provide:$l,useValue:this},{provide:al,useValue:this.componentFactoryResolver}],u(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Us.THROW_IF_NOT_FOUND,n=R.Default){return e===Us||e===$l||e===Ss?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class cc extends Zl{constructor(e){super(),this.moduleType=e,null!==le(e)&&function(e){const t=new Set;!function e(n){const r=le(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${u(t)} vs ${u(t.name)}`)}(i,ac.get(i),n),ac.set(i,n));const s=Rr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new lc(this.moduleType,e)}}function uc(e,t,n){const r=et()+e,i=ze();return i[r]===Ii?Qs(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function hc(e,t,n,r){return mc(ze(),et(),e,t,n,r)}function dc(e,t,n,r,i){return function(e,t,n,r,i,s,o){const a=t+n;return Xs(e,a,i,s)?Qs(e,a+2,o?r.call(o,i,s):r(i,s)):fc(e,a+2)}(ze(),et(),e,t,n,r,i)}function pc(e,t,n,r,i,s){return function(e,t,n,r,i,s,o,a){const l=t+n;return function(e,t,n,r,i){const s=Xs(e,t,n,r);return Js(e,t+2,i)||s}(e,l,i,s,o)?Qs(e,l+3,a?r.call(a,i,s,o):r(i,s,o)):fc(e,l+3)}(ze(),et(),e,t,n,r,i,s)}function fc(e,t){const n=e[t];return n===Ii?void 0:n}function mc(e,t,n,r,i,s){const o=t+n;return Js(e,o,i)?Qs(e,o+1,s?r.call(s,i):r(i)):fc(e,o+1)}function gc(e,t){const n=He();let r;const i=e+ce;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new g("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ye(r.type)),o=P(io);try{const e=Vt(!1),t=s();return Vt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,ze(),i,t),t}finally{P(o)}}function yc(e,t,n){const r=e+ce,i=ze(),s=De(i,r);return function(e,t){return Ws.isWrapped(t)&&(t=Ws.unwrap(t),e[tt()]=Ii),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?mc(i,et(),t,s.transform,n,s):s.transform(n))}function _c(e){return t=>{setTimeout(e,void 0,t)}}const vc=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,l=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),l=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(l=_c(l),a&&(a=_c(a)),c&&(c=_c(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof i.w&&e.add(u),u}};function wc(){return this._results[Zs()]()}class bc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Zs(),n=bc.prototype;n[t]||(n[t]=wc)}get changes(){return this._changes||(this._changes=new vc)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=hn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ec{constructor(e){this.queryList=e,this.matches=null}clone(){return new Ec(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Cc(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Mc(e,t).matches&&this.queries[t].setDirty()}}class Sc{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Tc{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Tc(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ic{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ic(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,kc(t,i)),this.matchTNodeWithReadOption(e,t,Qt(t,e,i,!1,!1))}else n===Bl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===hl||r===Kl||r===Bl&&4&t.type)this.addMatch(t.index,-2);else{const n=Qt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function kc(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function xc(e,t,n,r){return-1===n?function(e,t){return 11&e.type?cl(e,t):4&e.type?Gl(e,t):null}(t,e):-2===n?function(e,t,n){return n===hl?cl(t,e):n===Bl?Gl(t,e):n===Kl?ec(t,e):void 0}(e,t,r):Jt(e,e[1],n,t)}function Ac(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:xc(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Rc(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Ac(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=ue;e<o.length;e++){const t=o[e];t[17]===t[3]&&Rc(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Rc(n[1],n,i,r)}}}}}return r}function Nc(e){const t=ze(),n=He(),r=at();lt(r+1);const i=Mc(n,r);if(e.dirty&&Fe(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Rc(n,t,r,[]):Ac(n,t,i,r);e.reset(s,dl),e.notifyOnChanges()}return!0}return!1}function Pc(e,t,n){const r=He();r.firstCreatePass&&(Fc(r,new Sc(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Lc(r,ze(),t)}function Oc(e,t,n,r){const i=He();if(i.firstCreatePass){const s=$e();Fc(i,new Sc(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Lc(i,ze(),n)}function Dc(){return e=ze(),t=at(),e[19].queries[t].queryList;var e,t}function Lc(e,t,n){const r=new bc(4==(4&n));Ki(e,t,r,r.destroy),null===t[19]&&(t[19]=new Cc),t[19].queries.push(new Ec(r))}function Fc(e,t,n){null===e.queries&&(e.queries=new Tc),e.queries.track(new Ic(t,n))}function Mc(e,t){return e.queries.getByIndex(t)}function Vc(e,t){return Gl(e,t)}const Uc=new ln("Application Initializer");let jc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ll,this.reject=ll,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(fo(t))e.push(t);else if(go(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(In(Uc,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const qc=new ln("AppId"),Bc={provide:qc,useFactory:function(){return`${zc()}${zc()}${zc()}`},deps:[]};function zc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hc=new ln("Platform Initializer"),Gc=new ln("Platform ID"),$c=new ln("appBootstrapListener");let Zc=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Wc=new ln("LocaleId"),Kc=new ln("DefaultCurrencyCode");class Yc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Qc=function(e){return new cc(e)},Jc=Qc,Xc=function(e){return Promise.resolve(Qc(e))},eu=function(e){const t=Qc(e),n=Rr(le(e).declarations).reduce((e,t)=>{const n=ae(t);return n&&e.push(new sc(n)),e},[]);return new Yc(t,n)},tu=eu,nu=function(e){return Promise.resolve(eu(e))};let ru=(()=>{class e{constructor(){this.compileModuleSync=Jc,this.compileModuleAsync=Xc,this.compileModuleAndAllComponentsSync=tu,this.compileModuleAndAllComponentsAsync=nu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const iu=(()=>Promise.resolve(0))();function su(e){"undefined"==typeof Zone?iu.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class ou{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vc(!1),this.onMicrotaskEmpty=new vc(!1),this.onStable=new vc(!1),this.onError=new vc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=q.requestAnimationFrame,t=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(q,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,cu(e),e.isCheckStableRunning=!0,lu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),cu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return uu(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),hu(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return uu(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),hu(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,cu(e),lu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ou.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ou.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,au,ll,ll);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const au={};function lu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function cu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function uu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function hu(e){e._nesting--,lu(e)}class du{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vc,this.onMicrotaskEmpty=new vc,this.onStable=new vc,this.onError=new vc}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let pu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ou.assertNotInAngularZone(),su(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())su(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(In(ou))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})(),fu=(()=>{class e{constructor(){this._applications=new Map,_u.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return _u.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();class mu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function gu(e){_u=e}let yu,_u=new mu,vu=!0,wu=!1;function bu(){return wu=!0,vu}function Eu(){if(wu)throw new Error("Cannot enable prod mode after platform setup.");vu=!1}const Cu=new ln("AllowMultipleToken");class Su{constructor(e,t){this.name=e,this.token=t}}function Tu(e,t,n=[]){const r=`Platform: ${t}`,i=new ln(r);return(t=[])=>{let s=Iu();if(!s||s.injector.get(Cu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Is,useValue:"platform"});!function(e){if(yu&&!yu.destroyed&&!yu.injector.get(Cu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");yu=e.get(ku);const t=e.get(Hc,null);t&&t.forEach(e=>e())}(Us.create({providers:e,name:r}))}return function(e){const t=Iu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Iu(){return yu&&!yu.destroyed?yu:null}let ku=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new du:("zone.js"===e?void 0:e)||new ou({enableLongStackTrace:bu(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:ou,useValue:n}];return n.run(()=>{const t=Us.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Ir,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{Ru(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return fo(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(jc);return e.runInitializers(),e.donePromise.then(()=>(ua(i.injector.get(Wc,sa)||sa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=xu({},t);return function(e,t,n){const r=new cc(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Au);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${u(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(In(Us))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function xu(e,t){return Array.isArray(t)?t.reduce(xu,e):Object.assign(Object.assign({},e),t)}let Au=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),c=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{ou.assertNotInAngularZone(),su(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ou.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,c.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof sl?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($l),i=n.create(Us.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(pu,null),a=o&&i.injector.get(fu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ru(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Ru(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get($c,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(In(ou),In(Us),In(Ir),In(al),In(jc))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Ru(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Nu{}class Pu{}const Ou={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Du=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Ou}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Lu(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Lu(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(In(ru),In(Pu,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Lu(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Fu=function(e){return null},Mu=Tu(null,"core",[{provide:Gc,useValue:"unknown"},{provide:ku,deps:[Us]},{provide:fu,deps:[]},{provide:Zc,deps:[]}]),Vu=[{provide:Au,useClass:Au,deps:[ou,Us,Ir,al,jc]},{provide:ic,deps:[ou],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:jc,useClass:jc,deps:[[new Nn,Uc]]},{provide:ru,useClass:ru,deps:[]},Bc,{provide:Rl,useFactory:function(){return Ul},deps:[]},{provide:Pl,useFactory:function(){return jl},deps:[]},{provide:Wc,useFactory:function(e){return ua(e=e||"undefined"!=typeof $localize&&$localize.locale||sa),e},deps:[[new Rn(Wc),new Nn,new Pn]]},{provide:Kc,useValue:"USD"}];let Uu=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(In(Au))},e.\u0275mod=ne({type:e}),e.\u0275inj=E({providers:Vu}),e})()},8939:(e,t,n)=>{"use strict";n.d(t,{hO:()=>m,xv:()=>h,Dh:()=>u,GT:()=>l,on:()=>d,pX:()=>a});var r=n(7716),i=n(7841),s=n(9126);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),l=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const u=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const p=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:c,useFactory:d,deps:[u,r.R0b,[new r.FiY,h]]};let m=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:u,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[f]}),e})()},9126:(e,t,n)=>{"use strict";n.d(t,{q4:()=>c,iC:()=>_,HU:()=>g,cc:()=>d});var r=n(7716);(0,n(5452).registerVersion)("firebase","9.0.2","app");var i=n(7771),s=n(3637),o=n(8307),a=n(9673),l=n(9746);e=n.hmd(e);const c=new r.GfV("7.0.4"),u=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${u?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}function p(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class f{constructor(e,t=i.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class m{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p,{},p,p)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let g=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new f(Zone.current)),this.insideAngular=e.run(()=>new f(Zone.current,s.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function _(e){return y(),(t=y(),function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,a.R)(t.outsideAngular),(0,l.QV)(t.insideAngular))})(e);var t}},4486:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4685),i=n(6034),s=n(5452),o=n(300);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),u=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.1",void 0);const d=h},5452:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>E,_DEFAULT_ENTRY_NAME:()=>u,_addComponent:()=>f,_addOrOverwriteComponent:()=>m,_apps:()=>d,_clearComponents:()=>v,_components:()=>p,_getProvider:()=>y,_registerComponent:()=>g,_removeServiceInstance:()=>_,deleteApp:()=>I,getApp:()=>S,getApps:()=>T,initializeApp:()=>C,onLog:()=>A,registerVersion:()=>x,setLogLevel:()=>R});var r=n(6304),i=n(6034),s=n(300),o=n(4685);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",c=new s.Yd("@firebase/app"),u="[DEFAULT]",h={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(p.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of d.values())f(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function _(e,t,n=u){y(e,t).clearInstance(n)}function v(){p.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const E="9.0.0";function C(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const s=d.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw w.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of p.values())a.addComponent(i);const l=new b(e,n,a);return d.set(r,l),l}function S(e=u){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function T(){return Array.from(d.values())}function I(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function x(e,t,n){var r;let s=null!==(r=h[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}g(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function A(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,s.Am)(e,t)}function R(e){(0,s.Ub)(e)}g(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),x(l,"0.7.0",void 0),x("fire-js","")},6034:(e,t,n)=>{"use strict";n.d(t,{wA:()=>s,H0:()=>l,zt:()=>a});var r=n(4762),i=n(4685),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),l=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var u=this.getOrInitializeService({instanceIdentifier:c});l.resolve(u)}catch(h){}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),c=l.next();!c.done;c=l.next()){var u=(0,r.CR)(c.value,2),h=u[1];o===this.normalizeInstanceIdentifier(u[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var l=a.value;try{l(e,t)}catch(c){}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},300:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(t,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>p});var s=[],o=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),u=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+s+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function p(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4685:(e,t,n)=>{"use strict";n.d(t,{BH:()=>p,LL:()=>x,ZR:()=>k,gQ:()=>G,hu:()=>i,g5:()=>s,US:()=>a,tV:()=>u,h$:()=>l,r3:()=>F,Sg:()=>f,ne:()=>$,p$:()=>h,vZ:()=>j,ZB:()=>d,gK:()=>Y,pd:()=>H,m9:()=>te,z$:()=>m,GJ:()=>L,jU:()=>_,ru:()=>v,d:()=>b,xb:()=>V,w1:()=>E,hl:()=>I,uI:()=>g,UG:()=>y,Yr:()=>S,b$:()=>w,G6:()=>T,Mn:()=>C,w9:()=>D,cI:()=>N,UI:()=>U,xO:()=>B,zd:()=>z,DV:()=>M,ug:()=>ee,dS:()=>X,Pz:()=>P,Dv:()=>K,Wj:()=>Q,lb:()=>J});var r=n(4762),i=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},o=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=(15&a)<<2|c>>6,h=63&c;l||(h=64,o||(u=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[u],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,l=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==l)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==l&&r.push(a<<6&192|l))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){var t=o(e);return a.encodeByteArray(t,!0)},c=function(e){return l(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}var p=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(o)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function _(){return"object"==typeof self&&self.self===self}function v(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return m().indexOf("Electron/")>=0}function E(){var e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function C(){return m().indexOf("MSAppHost/")>=0}function S(){return!1}function T(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"indexedDB"in self&&null!=indexedDB}var k=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,x.prototype.create),s}return(0,r.ZT)(t,e),t}(Error),x=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?A(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",l=new k(i,a,r);return l},e}();function A(e,t){return e.replace(R,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function N(e){return JSON.parse(e)}function P(e){return JSON.stringify(e)}var O=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=N(u(s[0])||""),n=N(u(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},D=function(e){var t=O(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},L=function(e){var t=O(e).claims;return"object"==typeof t&&!0===t.admin};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function V(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function j(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){if(!r.includes(u=s[i]))return!1;var o=e[u],a=t[u];if(q(o)&&q(a)){if(!j(o,a))return!1}else if(o!==a)return!1}for(var l=0,c=r;l<c.length;l++){var u;if(!n.includes(u=c[l]))return!1}return!0}function q(e){return null!==e&&"object"==typeof e}function B(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function z(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function H(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var G=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(l^c),s=1518500249):(i=a^l^c,s=1859775393):r<60?(i=a&l|c&(a|l),s=2400959708):(i=a^l^c,s=3395469782);var h=(o<<5|o>>>27)+i+u+s+n[r]&4294967295;u=c,c=l,l=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function $(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function W(){}var K=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Y(e,t){return e+" failed: "+t+" argument "}function Q(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Y(e,t)+"must be a valid function.")}function J(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Y(e,t)+"must be a valid context object.")}var X=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);if(s>=55296&&s<=56319){var o=s-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate."),s=65536+(o<<10)+(e.charCodeAt(r)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ee=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function te(e){return e&&e._delegate?e._delegate:e}},7841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(4486);r.Z.registerVersion("firebase","9.0.2","app-compat")},6780:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),i=n(4486),s=n(4685),o=n(5452),a=n(4762),l=n(300),c=n(6034);const u=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new l.Yd("@firebase/auth");function p(e,...t){d.logLevel<=l.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function f(e,...t){throw _(e,...t)}function m(e,...t){return _(e,...t)}function g(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&f(e,"argument-error"),g(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function v(e,t,...n){if(!e)throw _(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function b(e,t){e||w(t)}const E=new Map;function C(e){b(e instanceof Function,"Expected a class definition");let t=E.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,E.set(e,t),t)}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function T(){return"http:"===I()||"https:"===I()}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(T()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},N=new k(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function O(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(e,t,n,r,i={}){return L(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=new(A.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&l.set("X-Firebase-Locale",e.languageCode),A.fetch()(U(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},R),t);try{const t=new j(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw q(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(e,a,o);f(e,a)}}catch(i){if(i instanceof s.ZR)throw i;f(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield O(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{serverResponse:s}),s})).apply(this,arguments)}function U(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class j{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function G(e,t){return $.apply(this,arguments)}function $(){return($=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Y(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z(K(i.auth_time)),issuedAtTime:Z(K(i.iat)),expirationTime:Z(K(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function K(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(i){return p("Caught error parsing JWT payload as JSON",i),null}}function Q(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Q(e,G(n,{idToken:r}));v(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?oe(s.providerUserInfo):[],a=se(e.providerData,o),l=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new te(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,c)})).apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function se(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=U(e,r,"/v1/token",`key=${i}`);return A.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(void 0!==e.idToken,"internal-error"),v(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return v(t,"internal-error"),v(void 0!==t.exp,"internal-error"),v(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return v(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new le;return n&&(v("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(v("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(v("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return w("not implemented")}}function ce(e,t){v("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ue{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new te(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Q(t,t.stsTokenManager.getToken(t.auth,e));return v(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return ie.apply(this,arguments)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ue(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Q(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:C}=t;v(_&&C,e,"internal-error");const S=le.fromJSON(this.name,C);v("string"==typeof _,e,"internal-error"),ce(u,e.name),ce(h,e.name),v("boolean"==typeof w,e,"internal-error"),v("boolean"==typeof b,e,"internal-error"),ce(d,e.name),ce(p,e.name),ce(f,e.name),ce(m,e.name),ce(g,e.name),ce(y,e.name);const T=new ue({uid:_,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(T.providerData=E.map(e=>Object.assign({},e))),m&&(T._redirectEventId=m),T}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new le;r.updateFromServerResponse(t);const i=new ue({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(i),i})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,i),this.fullPersistenceKey=de("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ue._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(C(he),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||C(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=ue._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const l=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new pe(s,e,n)):new pe(s,e,n)})()}}function fe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(be(t))return"Webos";if(ge(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(ve(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,s.z$)()){return/firefox\//i.test(e)}function ge(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,s.z$)()){return/crios\//i.test(e)}function _e(e=(0,s.z$)()){return/iemobile/i.test(e)}function ve(e=(0,s.z$)()){return/android/i.test(e)}function we(e=(0,s.z$)()){return/blackberry/i.test(e)}function be(e=(0,s.z$)()){return/webos/i.test(e)}function Ee(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ce(e=(0,s.z$)()){return Ee(e)||ve(e)||be(e)||we(e)||/windows phone/i.test(e)||_e(e)}function Se(e,t=[]){let n;switch(e){case"Browser":n=fe((0,s.z$)());break;case"Worker":n=`${fe((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Te{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=C(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield pe.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(v(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&v(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&v(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(C(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&C(e)||t._popupRedirectResolver;v(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[C(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return v(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ie(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Re{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Ne(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:resetPassword",P(e,t))})).apply(this,arguments)}function Oe(e,t){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",P(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",P(e,t))})).apply(this,arguments)}function Ve(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendOobCode",P(e,t))})).apply(this,arguments)}function je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Ve(e,t)})).apply(this,arguments)}function Be(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Ve(e,t)})).apply(this,arguments)}function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return Ve(e,t)})).apply(this,arguments)}function $e(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return Ve(e,t)})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}class Ye extends Re{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ye(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:f(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Oe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:f(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Qe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",P(e,t))})).apply(this,arguments)}class Xe extends Re{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Xe(n,r);return Object.assign(s,i),s}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const it={USER_NOT_FOUND:"user-not-found"};function st(){return(st=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),it)})).apply(this,arguments)}class ot extends Re{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class at{constructor(e){var t,n,r,i,o,a;const l=(0,s.zd)((0,s.pd)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let lt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return v(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ct{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ut extends ct{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends ut{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return v("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return v(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,rawNonce:s,pendingToken:i})}catch(a){return null}}}let dt=(()=>{class e extends ut{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),pt=(()=>{class e extends ut{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),ft=(()=>{class e extends ut{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class mt extends Re{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mt(n,i):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let gt=(()=>{class e extends ut{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function yt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",P(e,t))})).apply(this,arguments)}class vt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield ue._fromIdTokenResponse(e,n,i),s=wt(n);return new vt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=wt(n);return new vt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function wt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function bt(){return(bt=(0,r.Z)(function*(e){var t;const n=Ie(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new vt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield yt(n,{returnSecureToken:!0}),i=yield vt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Et extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Et(e,t,n,r)}}function Ct(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Et._fromErrorAndOperation(e,n,t,r);throw n})}function St(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Tt(){return(Tt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield xt(!0,n,t);const{providerUserInfo:r}=yield z(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=St(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function It(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield Q(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return vt._forOperation(e,"link",r)})).apply(this,arguments)}function xt(e,t,n){return At.apply(this,arguments)}function At(){return(At=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";v(St(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Rt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield Q(e,Ct(r,i,t,e),n);v(s.idToken,r,"internal-error");const o=Y(s.idToken);v(o,r,"internal-error");const{sub:a}=o;return v(e.uid===a,r,"user-mismatch"),vt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&f(r,"user-mismatch"),s}})).apply(this,arguments)}function Pt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield Ct(e,r,t),s=yield vt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Dt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(e,t){return Pt(Ie(e),t)})).apply(this,arguments)}function Ft(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield xt(!1,n,t.providerId),It(n,t)})).apply(this,arguments)}function Vt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t){return Rt((0,s.m9)(e),t)})).apply(this,arguments)}function jt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))})).apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){const n=Ie(e),r=yield jt(n,{token:t,returnSecureToken:!0}),i=yield vt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class zt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ht._fromServerResponse(e,t):f(e,"internal-error")}}class Ht extends zt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ht(t)}}function Gt(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function $t(){return($t=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&Gt(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){yield Ne((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){yield Le((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Kt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Ne(n,{oobCode:t}),i=r.requestType;switch(v(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(r.mfaInfo,n,"internal-error");default:v(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=zt._fromServerResponse(Ie(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const{data:n}=yield Kt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t,n){const r=Ie(e),i=yield yt(r,{returnSecureToken:!0,email:t,password:n}),s=yield vt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};v(n.handleCodeInApp,r,"argument-error"),n&&Gt(r,i,n),yield He(r,i)})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=lt.credentialWithLink(t,n||S());return v(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Dt(r,i)})).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:createAuthUri",P(e,t))})).apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:T()?S():"http://localhost"},{signinMethods:r}=yield tn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Gt(n.auth,r,t);const{email:i}=yield je(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Gt(r.auth,i,n);const{email:o}=yield $e(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Q(r,an(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function un(e,t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Q(e,Oe(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class dn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends dn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class fn extends dn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class gn extends dn{constructor(e,t){super(e,"google.com",t)}}class yn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function _n(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new fn(s,i);case"github.com":return new mn(s,i);case"google.com":return new gn(s,i);case"twitter.com":return new yn(s,i,e.screenName||null);case"custom":case"anonymous":return new dn(s,null);default:return new dn(s,r,i)}}(n)}class vn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new vn("enroll",e)}static _fromMfaPendingCredential(e){return new vn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return vn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return vn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class wn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ie(e),i=(t.serverResponse.mfaInfo||[]).map(e=>zt._fromServerResponse(n,e));v(t.serverResponse.mfaPendingCredential,n,"internal-error");const s=vn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new wn(s,i,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,s);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const i=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield vt._fromIdTokenResponse(n,t.operationType,i);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return v(t.user,n,"internal-error"),vt._forOperation(t.user,t.operationType,i);default:f(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function bn(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}class En{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>zt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new En(e)}getSession(){var e=this;return(0,r.Z)(function*(){return vn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Q(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},O(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:s.tenantId},o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Cn=new WeakMap,Sn="__sak";class Tn{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const In=(()=>{class e extends Tn{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return ge(e)||Ee(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ce(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends Tn{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let xn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function An(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Rn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=An("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Nn(){return window}function Pn(){return void 0!==Nn().WorkerGlobalScope&&"function"==typeof Nn().importScripts}function On(){return(On=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Dn="firebaseLocalStorageDb",Ln="firebaseLocalStorage",Fn="fbase_key";class Mn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vn(e,t){return e.transaction([Ln],t?"readwrite":"readonly").objectStore(Ln)}function Un(){const e=indexedDB.open(Dn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ln,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Ln)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Dn);return new Mn(e).toPromise()}(),t(yield Un()))}))})}function jn(e,t,n){return qn.apply(this,arguments)}function qn(){return(qn=(0,r.Z)(function*(e,t,n){const r=Vn(e,!0).put({[Fn]:t,value:n});return new Mn(r).toPromise()})).apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t){const n=Vn(e,!1).get(t),r=yield new Mn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function zn(e,t){const n=Vn(e,!0).delete(t);return new Mn(n).toPromise()}const Hn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield Un()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return Pn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=xn._getInstance(Pn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return On.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Rn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield Un();return yield jn(e,Sn,"1"),yield zn(e,Sn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>jn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return Bn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>zn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Vn(e,!1).getAll();return new Mn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Gn(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function $n(){return($n=(0,r.Z)(function*(e){return(yield O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Wn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Kn=1e12;class Yn{constructor(e){this.auth=e,this.counter=Kn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Qn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Kn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Kn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Kn))||void 0===n||n.execute(),""})()}}class Qn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;v(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jn=Wn("rcb"),Xn=new k(3e4,6e4);class er{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Nn().grecaptcha}load(e,t=""){return v(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Nn().grecaptcha):new Promise((n,r)=>{const i=Nn().setTimeout(()=>{r(m(e,"network-request-failed"))},Xn.get());Nn()[Jn]=()=>{Nn().clearTimeout(i),delete Nn()[Jn];const s=Nn().grecaptcha;if(!s)return void r(m(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Zn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Jn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Nn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tr{load(e){return(0,r.Z)(function*(){return new Yn(e)})()}clearedOneInstance(){}}const nr="recaptcha",rr={theme:"light",type:"image"};class ir{constructor(e,t=Object.assign({},rr),n){this.parameters=t,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ie(n),this.isInvisible="invisible"===this.parameters.size,v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;v(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tr:new er,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){v(!this.parameters.sitekey,this.auth,"argument-error"),v(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Nn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){v(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){v(T()&&!Pn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return $n.apply(this,arguments)}(e.auth);v(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return v(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function or(){return(or=(0,r.Z)(function*(e,t,n){const r=Ie(e),i=yield cr(r,t,(0,s.m9)(n));return new sr(i,e=>Dt(r,e))})).apply(this,arguments)}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield xt(!1,r,"phone");const i=yield cr(r.auth,t,(0,s.m9)(n));return new sr(i,e=>Ft(r,e))})).apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield cr(r.auth,t,(0,s.m9)(n));return new sr(i,e=>Vt(r,e))})).apply(this,arguments)}function cr(e,t,n){return ur.apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(v("string"==typeof i,e,"argument-error"),v(n.type===nr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return v("enroll"===t.type,e,"internal-error"),(yield bn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{v("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return v(n,e,"missing-multi-factor-info"),(yield Gn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t){yield It((0,s.m9)(e),t)})).apply(this,arguments)}let dr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ie(t)}verifyPhoneNumber(e,t){return cr(this.auth,e,(0,s.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function pr(e,t){return t?C(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class fr extends Re{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Pt(e.auth,new fr(e),e.bypassAuthState)}function gr(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Rt(n,new fr(e),e.bypassAuthState)}function yr(e){return _r.apply(this,arguments)}function _r(){return(_r=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),It(n,new fr(e),e.bypassAuthState)})).apply(this,arguments)}class vr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const l={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(l))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return gr;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new k(2e3,1e4);function br(){return(br=(0,r.Z)(function*(e,t,n){const r=Ie(e);y(e,t,ct);const i=pr(r,n);return new Sr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);return new Sr(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Cr(){return(Cr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);return new Sr(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class e extends vr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return v(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){b(1===e.filter.length,"Popup operations only handle one event");const t=An();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,wr.get())};e()}}return e.currentPopupAction=null,e})();const Tr=new Map;class Ir extends vr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Tr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Tr.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Nr(t),r="true"===(yield Rr(e)._get(n));return yield Rr(e)._remove(n),r})).apply(this,arguments)}function xr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,r.Z)(function*(e,t){return Rr(e)._set(Nr(t),"true")})).apply(this,arguments)}function Rr(e){return C(e._redirectPersistence)}function Nr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=Ie(e);y(e,t,ct);const i=pr(r,n);return yield xr(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);yield xr(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(r.auth,t,ct);const i=pr(r.auth,n);yield xt(!1,r,t.providerId),yield xr(i,r.auth);const o=yield Vr(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){return yield Ie(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t,n=!1){const r=Ie(e),i=pr(r,t),s=new Ir(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Vr(e){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,r.Z)(function*(e){const t=An(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class jr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Br(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Br(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Br({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function zr(e){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,r.Z)(function*(e,t={}){return O(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$r=/^https?/;function Zr(){return(Zr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield zr(e);for(const r of t)try{if(Wr(r))return}catch(n){}f(e,"unauthorized-domain")})).apply(this,arguments)}function Wr(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!$r.test(n))return!1;if(Gr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Kr=new k(3e4,6e4);function Yr(){const e=Nn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Qr=null;function Jr(e){return Qr=Qr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Yr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yr(),n(m(e,"network-request-failed"))},timeout:Kr.get()})}if(null===(i=null===(r=Nn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Nn().gapi)||void 0===s?void 0:s.load)){const t=Wn("iframefcb");return Nn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Qr=null,e})}(e),Qr}const Xr=new k(5e3,15e3),ei={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ti=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ni(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ti.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ri(){return(ri=(0,r.Z)(function*(e){const t=yield Jr(e),n=Nn().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:ni(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ei,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=Nn().setTimeout(()=>{r(i)},Xr.get());function o(){Nn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const ii={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class si{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function oi(e,t,n,r,i,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof ct){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof ut){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const ai="webStorageSupport";class li extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new li(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}var ci;class ui{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hi(){return window}function di(){return(di=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=hi();b(t.sessionId,"AuthEvent did not contain a session ID");const s=yield mi(t.sessionId),o={};return Ee()?o.ibi=i.packageName:ve()?o.apn=i.packageName:f(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,oi(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function pi(){return(pi=(0,r.Z)(function*(e){const{BuildInfo:t}=hi(),n={};Ee()?n.iosBundleId=t.packageName:ve()?n.androidPackageName=t.packageName:f(e,"operation-not-supported-in-this-environment"),yield zr(e,n)})).apply(this,arguments)}function fi(){return(fi=(0,r.Z)(function*(e,t,n){const{cordova:r}=hi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),ve()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function mi(e){return gi.apply(this,arguments)}function gi(){return(gi=(0,r.Z)(function*(e){const t=yi(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yi(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}ci="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{v(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),v(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:ci,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(ci)},s=new Te(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(C);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{return t=Ie(e.getProvider("auth").getImmediate()),new ui(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.17.2",void 0);class _i extends jr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function vi(e){return wi.apply(this,arguments)}function wi(){return(wi=(0,r.Z)(function*(e){const t=yield Ei()._get(Ci(e));return t&&(yield Ei()._remove(Ci(e))),t})).apply(this,arguments)}function bi(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ei(){return C(In)}function Ci(e){return de("authEvent",e.config.apiKey,e.name)}function Si(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function Ti(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function Ii(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ki(e=(0,s.z$)()){return!("file:"!==Ii()&&"ionic:"!==Ii()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function xi(){try{const e=self.localStorage,t=An();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return Ai()&&(0,s.hl)()}return!1}function Ai(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return("http:"===Ii()||"https:"===Ii()||(0,s.ru)()||ki())&&!((0,s.b$)()||(0,s.UG)())&&xi()&&!Ai()}function Ni(){return ki()&&"undefined"!=typeof document}function Pi(){return(Pi=(0,r.Z)(function*(){return!!Ni()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Oi={LOCAL:"local",NONE:"none",SESSION:"session"},Di=v,Li="persistence";function Fi(e){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Vi(),n=de(Li,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Vi(){return"undefined"!=typeof window?window:null}const Ui=v;class ji{constructor(){this.browserResolver=C(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Fr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=oi(e,t,n,S(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},ii),{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,s.z$)().toLowerCase();n&&(l=ye(u)?"_blank":n),me(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Ee(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new si(null);const d=window.open(t||"",l,h);v(d,e,"popup-blocked");try{d.focus()}catch(p){}return new si(d)}(e,a,An())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=oi(e,t,n,S(),i),Nn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ri.apply(this,arguments)}(e),r=new jr(e);return n.register("authEvent",t=>(v(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ai,{type:ai},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ce()||ge()||Ee()}}),this.cordovaResolver=C(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new _i(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){f(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=hi();v("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),v(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),v("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Tr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:bi(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ei()._set(Ci(e),t)}(e,a);const l=yield function(e,t,n){return di.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=hi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(l);return function(e,t,n){return fi.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return pi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=hi(),o=setTimeout((0,r.Z)(function*(){yield vi(e),t.onEvent(Ti())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield vi(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Si(e),n=t.link?decodeURIComponent(t.link):void 0,r=Si(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Si(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Si(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?m(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ti())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;hi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ni()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ui(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Pi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function qi(e){return e.unwrap()}function Bi(e){return Hi(e)}function zi(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ki(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return v(t.operationType,r,"argument-error"),v(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),wn._fromError(r,i)}(e,t));else if(r){const e=Hi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Hi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return dr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=pt;break;case"facebook.com":r=dt;break;case"github.com":r=ft;break;case"twitter.com":r=gt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?mt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ht(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Gi(e,t){return $i.apply(this,arguments)}function $i(){return($i=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof s.ZR&&zi(e,o),o}const{operationType:r,user:i}=n;return{operationType:r,credential:Bi(n),additionalUserInfo:_n(n),user:Yi.getOrCreate(i)}})).apply(this,arguments)}function Zi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Gi(e,n.confirm(t))}})).apply(this,arguments)}class Ki{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gi(qi(this.auth),this.resolver.resolveSignIn(e))}}class Yi{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return Cn.has(t)||Cn.set(t,En._fromUser(t)),Cn.get(t)}(e)}static getOrCreate(e){return Yi.USER_MAP.has(e)||Yi.USER_MAP.set(e,new Yi(e)),Yi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Zi(n.auth,function(e,t,n){return ar.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,function(e,t,n){return Cr.apply(this,arguments)}(t._delegate,e,ji))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fi(Ie(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Vt(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Zi(this.auth,function(e,t,n){return lr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gi(this.auth,function(e,t,n){return Er.apply(this,arguments)}(this._delegate,e,ji))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Fi(Ie(t.auth)),function(e,t,n){return function(e,t,n){return Or.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}sendEmailVerification(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Tt.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return un((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return un((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return hr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return cn.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return on.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yi.USER_MAP=new WeakMap;const Qi=v;let Ji=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Qi(n,"invalid-api-key",{appName:e.name});let r=[he];if("undefined"!=typeof window){r=function(e,t){const n=Vi();if(!(null==n?void 0:n.sessionStorage))return[];const r=de(Li,e,t);switch(n.sessionStorage.getItem(r)){case Oi.NONE:return[he];case Oi.LOCAL:return[Hn,kn];case Oi.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[Hn,In,kn])r.includes(e)||r.push(e)}Qi(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?ji:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(u),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ie(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=xe(t),{host:o,port:a}=function(e){const t=xe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Kt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Gi(n._delegate,function(e,t,n){return Jt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return rn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Qi(Ri(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Lr.apply(this,arguments)}(e._delegate,ji);return t?Gi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ie(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Xi(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Xi(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return Xt.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return $t.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Di(Object.values(Oi).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Di(t!==Oi.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Di(t===Oi.NONE,e,"unsupported-persistence-type"):Ai()?Di(t===Oi.NONE||t===Oi.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Di(t===Oi.NONE||xi(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Oi.SESSION:n=kn;break;case Oi.LOCAL:n=(yield C(Hn)._isAvailable())?Hn:In;break;case Oi.NONE:n=he;break;default:return f("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gi(this._delegate,function(e){return bt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Gi(this._delegate,Dt(this._delegate,e))}signInWithCustomToken(e){return Gi(this._delegate,function(e,t){return Bt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gi(this._delegate,function(e,t,n){return Dt((0,s.m9)(e),lt.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Gi(this._delegate,function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Zi(this._delegate,function(e,t,n){return or.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Qi(Ri(),t._delegate,"operation-not-supported-in-this-environment"),Gi(t._delegate,function(e,t,n){return br.apply(this,arguments)}(t._delegate,e,ji))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Qi(Ri(),t._delegate,"operation-not-supported-in-this-environment"),yield Fi(t._delegate),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ji)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Qt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Oi,e})();function Xi(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Yi.getOrCreate(e)),error:t,complete:n}}class es{constructor(){this.providerId="phone",this._delegate=new dr(qi(i.Z.auth()))}static credential(e,t){return dr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}es.PHONE_SIGN_IN_METHOD=dr.PHONE_SIGN_IN_METHOD,es.PROVIDER_ID=dr.PROVIDER_ID;const ts=v;var ns;(ns=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ji(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lt,FacebookAuthProvider:dt,GithubAuthProvider:ft,GoogleAuthProvider:pt,OAuthProvider:ht,PhoneAuthProvider:es,PhoneMultiFactorGenerator:class{constructor(){}static assertion(e){return li._fromCredential(e)}},RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;ts(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ir(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:gt,Auth:Ji,AuthCredential:Re,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ns.registerVersion("@firebase/auth-compat","0.1.2")},1593:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(9193),i=n(5917),s=n(7574);class o{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return e=this.error,new s.y(t=>t.error(e));case"C":return(0,r.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new o("N",e):o.undefinedValueNotification}static createError(e){return new o("E",void 0,e)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),l=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||l.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){l.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=u(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=u(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function u(e){if(e||(e=l.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>c,xQ:()=>u});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),l=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let u=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends u{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),l=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class u extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,l.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,l.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:l,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(l)){n&&(this._unsubscribe=void 0);try{l.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(u)){let t=-1,n=u.length;for(;++t<n;){const n=u[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var l;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((l=new a).closed=!0,l)},2494:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>l});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function l(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>l});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const l=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),l=n(377),c=n(4072),u=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,u.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[l.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[l.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},8002:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(e,t,n)=>{"use strict";n.d(t,{QV:()=>s,ht:()=>a});var r=n(7393),i=n(1593);function s(e,t=0){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))}}class a extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new l(e,this.destination)))}_next(e){this.scheduleMessage(i.P.createNext(e))}_error(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class l{constructor(e,t){this.notification=e,this.destination=t}}},1307:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var r=n(2441),i=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return e=>{return(0,i.x)()((t=o,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,r.N);return i.source=e,i.subjectFactory=n,i})(e));var t}}},9673:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(7574),i=n(4581),s=n(6561);class o extends r.y{constructor(e,t=0,n=i.e){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,s.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.e)}static create(e,t=0,n=i.e){return new o(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(o.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function a(e,t=0){return function(n){return n.lift(new l(e,t))}}class l{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}},8307:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(7393),i=n(8640),s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new l(e,this.nextOrObserver,this.error,this.complete))}}class l extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i.Z,this._tapError=t.error||i.Z,this._tapComplete=t.complete||i.Z)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},4581:(e,t,n)=>{"use strict";n.d(t,{e:()=>h,E:()=>u});let r=1;const i=Promise.resolve(),s={};function o(e){return e in s&&(delete s[e],!0)}const a={setImmediate(e){const t=r++;return s[t]=!0,i.then(()=>o(t)&&e()),t},clearImmediate(e){o(e)}};var l=n(6465),c=n(6102);const u=new class extends c.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends l.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=a.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(a.clearImmediate(t),e.scheduled=void 0)}}),h=u},3637:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,P:()=>s});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},4487:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},9796:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},6561:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},4072:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},4869:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},8640:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},7444:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),l=n(4072),c=n(1555);const u=e=>{if(e&&"function"==typeof e[o.L])return u=e,e=>{const t=u[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,l.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,u}},5015:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},9661:(e,t,n)=>{"use strict";var r=n(7716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:l,token:e,providedIn:"platform"}),e})();function l(){return(0,r.LFG)(u)}const c=new r.OlP("Location Initialized");let u=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new u((0,r.LFG)(o))}function p(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function f(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function m(e){return e&&"?"!==e[0]?"?"+e:e}let g=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new v((0,r.LFG)(a),t&&t.origin||"")}const _=new r.OlP("appBaseHref");let v=(()=>{class e extends g{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return p(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends g{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=p(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=f(C(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+m(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,C(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(g),r.LFG(a))},e.normalizeQueryParams=m,e.joinWithSlash=p,e.stripTrailingSlash=f,e.\u0275prov=(0,r.Yz7)({factory:E,token:e,providedIn:"root"}),e})();function E(){return new b((0,r.LFG)(g),(0,r.LFG)(a))}function C(e){return e.replace(/\/index.html$/,"")}var S=(()=>((S=S||{})[S.Zero=0]="Zero",S[S.One=1]="One",S[S.Two=2]="Two",S[S.Few=3]="Few",S[S.Many=4]="Many",S[S.Other=5]="Other",S))();const T=r.kL8;class I{}let k=(()=>{class e extends I{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(T(t||this.locale)(e)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function x(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let A=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class R{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(SE){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new R(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new P(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new P(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class P{constructor(e,t){this.record=e,this.view=t}}let O=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){L("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){L("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function L(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:I,useClass:k}]}),e})();function M(e){return"server"===e}let V=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new U((0,r.LFG)(o),window)}),e})();class U{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=j(this.window.history)||j(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(SE){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(SE){return!1}}}function j(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class q{}class B extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new B,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(H=H||document.querySelector("base"),H?H.getAttribute("href"):null);return null==t?null:function(e){z=z||document.createElement("a"),z.setAttribute("href",e);const t=z.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return x(document.cookie,e)}}let z,H=null;const G=new r.OlP("TRANSITION_ID"),$=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[G,o,r.zs3],multi:!0}];class Z{static init(){(0,r.VLi)(new Z)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let W=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const K=new r.OlP("EventManagerPlugins");let Y=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(K),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class Q{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let J=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),X=(()=>{class e extends J{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(ee),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ee))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function ee(e){s().remove(e)}const te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ne=/%COMP%/g;function re(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?re(e,i,n):(i=i.replace(ne,e),n.push(i))}return n}function ie(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let se=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new oe(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ae(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new le(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=re(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Y),r.LFG(X),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class oe{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(te[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=te[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=te[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ie(n)):this.eventManager.addEventListener(e,t,ie(n))}}class ae extends oe{constructor(e,t,n,r){super(e),this.component=n;const i=re(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ne,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ne,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class le extends oe{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=re(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ce=(()=>{class e extends Q{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const ue=["alt","control","meta","shift"],he={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},de={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let fe=(()=>{class e extends Q{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(ue.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&de.hasOwnProperty(t)&&(t=de[t]))}return he[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ue.forEach(r=>{r!=n&&(0,pe[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const me=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){B.makeCurrent(),Z.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ge=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:K,useClass:ce,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:K,useClass:fe,multi:!0,deps:[o]},[],{provide:se,useClass:se,deps:[Y,X,r.AFp]},{provide:r.FYo,useExisting:se},{provide:J,useExisting:X},{provide:X,useClass:X,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Y,useClass:Y,deps:[K,r.R0b]},{provide:q,useClass:W,deps:[]},[]];let ye=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:G,useExisting:r.AFp},$]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:ge,imports:[F,r.hGG]}),e})();"undefined"!=typeof window&&window;var _e=n(9765),ve=n(5319),we=n(7971);class be extends _e.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new we.N;return this._value}next(e){super.next(this._value=e)}}var Ee=n(5917);function Ce(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var Se=n(8307),Te=n(7393),Ie=n(3637);class ke{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new xe(e,this.dueTime,this.scheduler))}}class xe extends Te.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ae,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Ae(e){e.debouncedNext()}function Re(e,t){return function(n){return n.lift(new Ne(e,t))}}class Ne{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Pe(e,this.predicate,this.thisArg))}}class Pe extends Te.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}var Oe=n(8002);const De=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();var Le=n(9193);function Fe(e){return t=>0===e?(0,Le.c)():t.lift(new Me(e))}class Me{constructor(e){if(this.total=e,this.total<0)throw new De}call(e,t){return t.subscribe(new Ve(e,this.total))}}class Ve extends Te.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}class Ue{constructor(e){this.total=e}call(e,t){return t.subscribe(new je(e,this.total))}}class je extends Te.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function qe(e,t){return n=>n.lift(new Be(e,t))}class Be{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ze(e,this.compare,this.keySelector))}}class ze extends Te.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var He=n(5345);function Ge(e){return t=>t.lift(new $e(e))}class $e{constructor(e){this.notifier=e}call(e,t){const n=new Ze(e),r=(0,He.ft)(this.notifier,new He.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class Ze extends He.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function We(e){return null!=e&&"false"!=`${e}`}function Ke(e){return Array.isArray(e)?e:[e]}function Ye(e){return null==e?"":"string"==typeof e?e:`${e}px`}function Qe(e){return e instanceof r.SBq?e.nativeElement:e}let Je;try{Je="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(SE){Je=!1}let Xe,et,tt,nt=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Je)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.Lbi))},token:e,providedIn:"root"}),e})(),rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function it(e){return function(){if(null==Xe&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Xe=!0}))}finally{Xe=Xe||!1}return Xe}()?e:!!e.capture}function st(){if(null==et){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return et=!1,et;if("scrollBehavior"in document.documentElement.style)et=!0;else{const e=Element.prototype.scrollTo;et=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return et}function ot(e){return e.composedPath?e.composedPath()[0]:e.target}var at=n(7574);let lt=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})(),ct=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[lt]}),e})();class ut extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new _e.xQ,this._typeaheadSubscription=ve.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new _e.xQ,this.change=new _e.xQ,e instanceof r.n_E&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Se.b)(e=>this._pressedLetters.push(e)),function(e,t=Ie.P){return n=>n.lift(new ke(e,t))}(e),Re(()=>this._pressedLetters.length>0),(0,Oe.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const r=(this._activeItemIndex+n)%t.length,i=t[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||Ce(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof r.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function ht(e){return 0===e.offsetX&&0===e.offsetY}function dt(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const pt=new r.OlP("cdk-input-modality-detector-options"),ft={ignoreKeys:[18,17,224,91,16]},mt=it({passive:!0,capture:!0});let gt=(()=>{class e{constructor(e,t,n,r){this._platform=e,this._mostRecentTarget=null,this._modality=new be(null),this._lastTouchMs=0,this._onKeydown=e=>{var t,n;(null===(n=null===(t=this._options)||void 0===t?void 0:t.ignoreKeys)||void 0===n?void 0:n.some(t=>t===e.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ot(e))},this._onMousedown=e=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ht(e)?"keyboard":"mouse"),this._mostRecentTarget=ot(e))},this._onTouchstart=e=>{dt(e)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ot(e))},this._options=Object.assign(Object.assign({},ft),r),this.modalityDetected=this._modality.pipe((1,e=>e.lift(new Ue(1)))),this.modalityChanged=this.modalityDetected.pipe(qe()),e.isBrowser&&t.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,mt),n.addEventListener("mousedown",this._onMousedown,mt),n.addEventListener("touchstart",this._onTouchstart,mt)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mt),document.removeEventListener("mousedown",this._onMousedown,mt),document.removeEventListener("touchstart",this._onTouchstart,mt))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nt),r.LFG(r.R0b),r.LFG(o),r.LFG(pt,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(nt),r.LFG(r.R0b),r.LFG(o),r.LFG(pt,8))},token:e,providedIn:"root"}),e})();const yt=new r.OlP("cdk-focus-monitor-default-options"),_t=it({passive:!0,capture:!0});let vt=(()=>{class e{constructor(e,t,n,r,i){this._ngZone=e,this._platform=t,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new _e.xQ,this._rootNodeFocusAndBlurListener=e=>{const t=ot(e),n="focus"===e.type?this._onFocus:this._onBlur;for(let r=t;r;r=r.parentElement)n.call(this,e,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(e,t=!1){const n=Qe(e);if(!this._platform.isBrowser||1!==n.nodeType)return(0,Ee.of)(null);const r=function(e){if(function(){if(null==tt){const e="undefined"!=typeof document?document.head:null;tt=!(!e||!e.createShadowRoot&&!e.attachShadow)}return tt}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return t&&(i.checkChildren=!0),i.subject;const s={checkChildren:t,subject:new _e.xQ,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){const t=Qe(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}focusVia(e,t,n){const r=Qe(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([e,n])=>this._originChanged(e,t,n)):(this._setOrigin(t),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOrigin(e,t=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&t,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,t){const n=this._elementInfo.get(t),r=ot(e);n&&(n.checkChildren||t===r)&&this._originChanged(t,this._getFocusOrigin(r),n)}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,n=this._rootNodeFocusListenerCount.get(t)||0;n||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,_t),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,_t)}),this._rootNodeFocusListenerCount.set(t,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ge(this._stopInputModalityDetector)).subscribe(e=>{this._setOrigin(e,!0)}))}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,_t),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,_t),this._rootNodeFocusListenerCount.delete(t))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){const t=[];return this._elementInfo.forEach((n,r)=>{(r===e||n.checkChildren&&r.contains(e))&&t.push([r,n])}),t}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(nt),r.LFG(gt),r.LFG(o,8),r.LFG(yt,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.R0b),r.LFG(nt),r.LFG(gt),r.LFG(o,8),r.LFG(yt,8))},token:e,providedIn:"root"}),e})();const wt="cdk-high-contrast-black-on-white",bt="cdk-high-contrast-white-on-black",Et="cdk-high-contrast-active";let Ct=(()=>{class e{constructor(e,t){this._platform=e,this._document=t}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Et),e.remove(wt),e.remove(bt),this._hasCheckedHighContrastMode=!0;const t=this.getHighContrastMode();1===t?(e.add(Et),e.add(wt)):2===t&&(e.add(Et),e.add(bt))}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nt),r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(nt),r.LFG(o))},token:e,providedIn:"root"}),e})();var St=n(6682),Tt=n(4581),It=n(3282);function kt(...e){return(0,It.J)(1)((0,Ee.of)(...e))}var xt=n(4869);function At(...e){const t=e[e.length-1];return(0,xt.K)(t)?(e.pop(),n=>kt(e,n,t)):t=>kt(e,t)}var Rt=n(4402);function Nt(e,t){return"function"==typeof t?n=>n.pipe(Nt((n,r)=>(0,Rt.D)(e(n,r)).pipe((0,Oe.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new Pt(e))}class Pt{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ot(e,this.project))}}class Ot extends He.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(DA){return void this.destination.error(DA)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new He.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,He.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var Dt=n(1593);function Lt(e,t=Ie.P){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new Ft(r,t))}class Ft{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Mt(e,this.delay,this.scheduler))}}class Mt extends Te.L{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Mt.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new Vt(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Dt.P.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Dt.P.createComplete()),this.unsubscribe()}}class Vt{constructor(e,t){this.time=e,this.notification=t}}class Ut{}const jt="*";function qt(e,t){return{type:7,name:e,definitions:t,options:{}}}function Bt(e,t=null){return{type:4,styles:t,timings:e}}function zt(e,t=null){return{type:2,steps:e,options:t}}function Ht(e){return{type:6,styles:e,offset:null}}function Gt(e,t,n){return{type:0,name:e,styles:t,options:n}}function $t(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function Zt(e){Promise.resolve(null).then(e)}class Wt{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Zt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Kt{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?Zt(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Yt{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Qt extends Yt{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class Jt extends Yt{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Xt extends Yt{constructor(e){super(),this.element=e instanceof r.SBq?e.nativeElement:e}}class en extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Qt?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Jt?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Xt?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,n,r,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),this._attachedPortal=e,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let tn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const nn=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(o)}});let rn=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new r.vpe,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nn,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(nn,8))},token:e,providedIn:"root"}),e})(),sn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const on=new r.GfV("12.2.3");function an(){return"undefined"!=typeof window&&void 0!==window.document}function ln(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function cn(e){switch(e.length){case 0:return new Wt;case 1:return e[0];default:return new Kt(e)}}function un(e,t,n,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==l,u=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case"!":a=i[n];break;case jt:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}u[r]=a}),r||a.push(u),c=u,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function hn(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&dn(n,"start",e)));break;case"done":e.onDone(()=>r(n&&dn(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&dn(n,"destroy",e)))}}function dn(e,t,n){const r=n.totalTime,i=pn(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(i._data=s),i}function pn(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function fn(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function mn(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let gn=(e,t)=>!1,yn=(e,t)=>!1,_n=(e,t,n)=>[];const vn=ln();(vn||"undefined"!=typeof Element)&&(gn=an()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),yn=(()=>{if(vn||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):yn}})(),_n=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let wn=null,bn=!1;function En(e){wn||(wn=("undefined"!=typeof document?document.body:null)||{},bn=!!wn.style&&"WebkitAppearance"in wn.style);let t=!0;return wn.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in wn.style,!t&&bn)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in wn.style),t}const Cn=yn,Sn=gn,Tn=_n;function In(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let kn=(()=>{class e{validateStyleProperty(e){return En(e)}matchesElement(e,t){return Cn(e,t)}containsElement(e,t){return Sn(e,t)}query(e,t,n){return Tn(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,s=[],o){return new Wt(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class xn{}xn.NOOP=new kn;const An="ng-enter",Rn="ng-leave",Nn="ng-trigger",Pn=".ng-trigger",On="ng-animating",Dn=".ng-animating";function Ln(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Fn(parseFloat(t[1]),t[2])}function Fn(e,t){switch(t){case"s":return 1e3*e;default:return e}}function Mn(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=Fn(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Fn(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=e;if(!n){let n=!1,s=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:s}}(e,t,n)}function Vn(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Un(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else Vn(e,n);return n}function jn(e,t,n){return n?t+":"+n+";":""}function qn(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=jn(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=jn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function Bn(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=Yn(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),ln()&&qn(e))}function zn(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Yn(t);e.style[n]=""}),ln()&&qn(e))}function Hn(e){return Array.isArray(e)?1==e.length?e[0]:zt(e):e}const Gn=new RegExp("{{\\s*(.+?)\\s*}}","g");function $n(e){let t=[];if("string"==typeof e){let n;for(;n=Gn.exec(e);)t.push(n[1]);Gn.lastIndex=0}return t}function Zn(e,t,n){const r=e.toString(),i=r.replace(Gn,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function Wn(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const Kn=/-+([a-z0-9])/g;function Yn(e){return e.replace(Kn,(...e)=>e[1].toUpperCase())}function Qn(e,t){return 0===e||0===t}function Jn(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var i=1;i<t.length;i++){let n=t[i];o.forEach(function(t){n[t]=er(e,t)})}}return t}function Xn(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function er(e,t){return window.getComputedStyle(e)[t]}const tr="*";function nr(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(sr(i,o)),"<"!=s[0]||i==tr&&o==tr||t.push(sr(o,i))}(e,n,t)):n.push(e),n}const rr=new Set(["true","1"]),ir=new Set(["false","0"]);function sr(e,t){const n=rr.has(e)||ir.has(e),r=rr.has(t)||ir.has(t);return(i,s)=>{let o=e==tr||e==i,a=t==tr||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?rr.has(e):ir.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?rr.has(t):ir.has(t)),o&&a}}const or=new RegExp("s*:selfs*,?","g");function ar(e,t,n){return new lr(e).build(t,n)}class lr{constructor(e){this._driver=e}build(e,t){const n=new cr(t);return this._resetContextStyleTimingState(n),Xn(this,Hn(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,s.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(e=>{if(ur(e)){const t=e;Object.keys(t).forEach(e=>{$n(t[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=Wn(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Xn(this,Hn(e.animation),t);return{type:1,matchers:nr(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:hr(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Xn(this,e,t)),options:hr(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=Xn(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:hr(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return dr(Mn(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=dr(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||Mn(r,t),dr(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:Ht({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};n.easing&&(e.easing=n.easing),i=Ht(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,t);o.isEmptyStep=s,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==jt?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(ur(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=$n(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(ur(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(ur(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(r++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let u=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(c-1));const h=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const s=u>0?r==h?1:u*r:i[r],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:Xn(this,Hn(e.animation),t),options:hr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:hr(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:hr(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(or,"")),[e=e.replace(/@\*/g,Pn).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,Dn),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,fn(t.collectedStyles,t.currentQuerySelector,{});const o=Xn(this,Hn(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:hr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Mn(e.timings,t.errors,!0);return{type:12,animation:Xn(this,Hn(e.animation),t),timings:n,options:null}}}class cr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ur(e){return!Array.isArray(e)&&"object"==typeof e}function hr(e){var t;return e?(e=Vn(e)).params&&(e.params=(t=e.params)?Vn(t):null):e={},e}function dr(e,t,n){return{duration:e,delay:t,easing:n}}function pr(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class fr{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const mr=new RegExp(":enter","g"),gr=new RegExp(":leave","g");function yr(e,t,n,r,i,s={},o={},a,l,c=[]){return(new _r).buildKeyframes(e,t,n,r,i,s,o,a,l,c)}class _r{buildKeyframes(e,t,n,r,i,s,o,a,l,c=[]){l=l||new fr;const u=new wr(e,t,l,r,i,c,[]);u.options=a,u.currentTimeline.setStyles([s],null,u.errors,a),Xn(this,n,u);const h=u.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,u.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[pr(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?Ln(n.duration):null,s=null!=n.delay?Ln(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),Xn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vr);const e=Ln(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Xn(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?Ln(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),Xn(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Mn(t.params?Zn(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?Ln(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vr);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);i&&o.delayNextStep(i),n===t.element&&(a=o.currentTimeline),Xn(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Xn(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const vr={};class wr{constructor(e,t,n,r,i,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new br(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Ln(n.duration)),null!=n.delay&&(r.delay=Ln(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Zn(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new wr(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=vr,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Er(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,s){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(mr,"."+this._enterClassName)).replace(gr,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return i||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class br{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new br(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||jt,this._currentKeyframe[e]=jt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=jt})):Un(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=Zn(s[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:jt),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Un(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?e.add(n):r==jt&&t.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=e.size?Wn(e.values()):[],s=t.size?Wn(t.values()):[];if(n){const e=r[0],t=Vn(e);e.offset=0,t.offset=1,r=[e,t]}return pr(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Er extends br{constructor(e,t,n,r,i,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],s=n+t,o=t/s,a=Un(e[0],!1);a.offset=0,i.push(a);const l=Un(e[0],!1);l.offset=Cr(o),i.push(l);const c=e.length-1;for(let r=1;r<=c;r++){let o=Un(e[r],!1);o.offset=Cr((t+o.offset*n)/s),i.push(o)}n=s,t=0,r="",e=i}return pr(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Cr(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Sr{}class Tr extends Sr{normalizePropertyName(e,t){return Yn(e)}normalizeStyleValue(e,t,n,r){let i="";const s=n.toString().trim();if(Ir[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+i}}const Ir=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function kr(e,t,n,r,i,s,o,a,l,c,u,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const xr={};class Ar{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}build(e,t,n,r,i,s,o,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||xr,d=this.buildStyles(n,o&&o.params||xr,u),p=a&&a.params||xr,f=this.buildStyles(r,p,u),m=new Set,g=new Map,y=new Map,_="void"===r,v={params:Object.assign(Object.assign({},h),p)},w=c?[]:yr(e,t,this.ast.animation,i,s,d,f,v,l,u);let b=0;if(w.forEach(e=>{b=Math.max(e.duration+e.delay,b)}),u.length)return kr(t,this._triggerName,n,r,_,d,f,[],[],g,y,b,u);w.forEach(e=>{const n=e.element,r=fn(g,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=fn(y,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&m.add(n)});const E=Wn(m.values());return kr(t,this._triggerName,n,r,_,d,f,w,E,g,y,b)}}class Rr{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},r=Vn(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=Zn(s,r,t));const o=this.normalizer.normalizePropertyName(e,t);s=this.normalizer.normalizeStyleValue(e,o,s,t),n[o]=s})}}),n}}class Nr{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Rr(e.style,e.options&&e.options.params||{},n)}),Pr(this.states,"true","1"),Pr(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Ar(e,t,this.states))}),this.fallbackTransition=new Ar(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Pr(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const Or=new fr;class Dr{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=ar(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=un(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let s;const o=new Map;if(i?(s=yr(this._driver,t,i,An,Rn,{},{},n,Or,r),s.forEach(e=>{const t=fn(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,jt)})});const a=cn(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=pn(t,"","","");return hn(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Lr="ng-animate-queued",Fr="ng-animate-disabled",Mr=".ng-animate-disabled",Vr=[],Ur={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class qr{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=Vn(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const Br="void",zr=new qr(Br);class Hr{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Qr(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const s=fn(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=fn(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Qr(e,Nn),Qr(e,"ng-trigger-"+t),a[t]=zr),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),s=new $r(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(Qr(e,Nn),Qr(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new qr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=zr),l.value!==Br&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{zn(e,n),Bn(e,r)})}return}const c=fn(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let u=i.matchTransition(a.value,l.value,e,l.params),h=!1;if(!u){if(!r)return;u=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:u,fromState:a,toState:l,player:s,isFallbackTransition:h}),h||(Qr(e,Lr),s.onStart(()=>{Jr(e,Lr)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,Pn,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,Br,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&cn(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const i=t.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||zr,a=new qr(Br),l=new $r(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==Ur||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Qr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=pn(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,hn(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Gr{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Hr(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(Zr(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Zr(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Qr(e,Fr)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Jr(e,Fr))}removeNode(e,t,n,r){if(Zr(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return Zr(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,Pn,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Dn,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return cn(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Ur,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Mr)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Mr,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Qr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?cn(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new fr,r=[],i=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Yr(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=An+f++;p.set(t,n),e.forEach(e=>Qr(e,n))});const m=[],g=new Set,y=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){const e=this.collectedLeaveElements[R],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):y.add(e))}const _=new Map,v=Yr(h,Array.from(g));v.forEach((e,t)=>{const n=Rn+f++;_.set(t,n),e.forEach(e=>Qr(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>Jr(e,n))}),v.forEach((e,t)=>{const n=_.get(t);e.forEach(e=>Jr(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const w=[],b=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(w.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!u||!this.driver.containsElement(u,i),h=_.get(i),d=p.get(i),f=this._buildInstruction(e,n,d,h,c);if(f.errors&&f.errors.length)b.push(f);else{if(c)return t.onStart(()=>zn(i,f.fromStyles)),t.onDestroy(()=>Bn(i,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>zn(i,f.fromStyles)),t.onDestroy(()=>Bn(i,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,f.timelines),s.push({instruction:f,player:t,element:i}),f.queriedElements.forEach(e=>fn(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(b.length){const e=[];b.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const E=new Map,C=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(C.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,E))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{fn(E,t,[]).push(e),e.destroy()})});const S=m.filter(e=>ti(e,a,l)),T=new Map;Kr(T,this.driver,y,l,jt).forEach(e=>{ti(e,a,l)&&S.push(e)});const I=new Map;d.forEach((e,t)=>{Kr(I,this.driver,new Set(e),a,"!")}),S.forEach(e=>{const t=T.get(e),n=I.get(e);T.set(e,Object.assign(Object.assign({},t),n))});const k=[],x=[],A={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>Bn(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let e=A;if(C.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=C.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>C.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,E,i,I,T);if(s.setRealPlayer(n),e===A)k.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=cn(t)),r.push(s)}}else zn(t,o.fromStyles),s.onDestroy(()=>Bn(t,o.toStyles)),x.push(s),c.has(t)&&r.push(s)}),x.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=cn(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let R=0;R<m.length;R++){const e=m[R],t=e.__ng_removed;if(Jr(e,Rn),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,Dn,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?Xr(this,e,r):this.processLeaveNode(e)}return m.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==Br;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&s.push(t)})}}return(n||r)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,l=fn(n,e,[]);this._getPreviousPlayers(e,a,i,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}zn(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,s){const o=t.triggerName,a=t.element,l=[],c=new Set,u=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Wt(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return ei(e,t),t}((n.get(h)||Vr).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=i.get(h),g=s.get(h),y=un(0,this._normalizer,0,t.keyframes,m,g),_=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&u.add(h),p){const t=new $r(e,o,h);t.setRealPlayer(_),l.push(t)}return _});l.forEach(e=>{fn(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>Qr(e,On));const d=cn(h);return d.onDestroy(()=>{c.forEach(e=>Jr(e,On)),Bn(a,t.toStyles)}),u.forEach(e=>{fn(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Wt(e.duration,e.delay)}}class $r{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Wt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>hn(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){fn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Zr(e){return e&&1===e.nodeType}function Wr(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Kr(e,t,n,r,i){const s=[];n.forEach(e=>s.push(Wr(e)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=jr,o.push(r))}),e.set(r,s)});let a=0;return n.forEach(e=>Wr(e,s[a++])),o}function Yr(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;function s(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:s(o),i.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function Qr(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function Jr(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function Xr(e,t,n){cn(n).onDone(()=>e.processLeaveNode(t))}function ei(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof Kt?ei(r.players,t):t.push(r)}}function ti(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class ni{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Gr(e,t,n),this._timelineEngine=new Dr(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const s=e+"-"+r;let o=this._triggerCache[s];if(!o){const e=[],t=ar(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new Nr(e,t,n)}(r,t,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=mn(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=mn(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ri(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=si(t[0]),t.length>1&&(r=si(t[t.length-1]))):t&&(n=si(t)),n||r?new ii(e,n,r):null}class ii{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let r=ii.initialStylesByElement.get(e);r||ii.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Bn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bn(this._element,this._initialStyles),this._endStyles&&(Bn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ii.initialStylesByElement.delete(this._element),this._startStyles&&(zn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zn(this._element,this._endStyles),this._endStyles=null),Bn(this._element,this._initialStyles),this._state=3)}}function si(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];oi(i)&&(t=t||{},t[i]=e[i])}return t}function oi(e){return"display"===e||"position"===e}ii.initialStylesByElement=new WeakMap;const ai="animation",li="animationend";class ci{constructor(e,t,n,r,i,s,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=mi(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),fi(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),pi(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ui(this._element,this._name,"paused")}resume(){ui(this._element,this._name,"running")}setPosition(e){const t=hi(this._element,this._name);this._position=e*this._duration,fi(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),pi(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=mi(e,"").split(","),r=di(n,t);r>=0&&(n.splice(r,1),fi(e,"",n.join(",")))}(this._element,this._name))}}function ui(e,t,n){fi(e,"PlayState",n,hi(e,t))}function hi(e,t){const n=mi(e,"");return n.indexOf(",")>0?di(n.split(","),t):di([n],t)}function di(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function pi(e,t,n){n?e.removeEventListener(li,t):e.addEventListener(li,t)}function fi(e,t,n,r){const i=ai+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function mi(e,t){return e.style[ai+t]||""}class gi{constructor(e,t,n,r,i,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ci(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:er(this.element,n))})}this.currentSnapshot=e}}class yi extends Wt{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=In(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class _i{constructor(){this._count=0}validateStyleProperty(e){return En(e)}matchesElement(e,t){return Cn(e,t)}containsElement(e,t){return Sn(e,t)}query(e,t,n){return Tn(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>In(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(e,t,n,r,i,s=[],o){const a=s.filter(e=>e instanceof gi),l={};Qn(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=Jn(e,t,l));if(0==n)return new yi(e,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,u,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=ri(e,t),p=new gi(e,t,u,n,r,i,c,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class vi{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:er(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class wi{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(bi().toString()),this._cssKeyframesDriver=new _i}validateStyleProperty(e){return En(e)}matchesElement(e,t){return Cn(e,t)}containsElement(e,t){return Sn(e,t)}query(e,t,n){return Tn(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},c=s.filter(e=>e instanceof vi);Qn(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=ri(e,t=Jn(e,t=t.map(e=>Un(e,!1)),l));return new vi(e,t,a,u)}}function bi(){return an()&&Element.prototype.animate||{}}let Ei=(()=>{class e extends Ut{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?zt(e):e;return Ti(this._renderer,null,t,"register",[n]),new Ci(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class Ci extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Si(this._id,e,t||{},this._renderer)}}class Si{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ti(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Ti(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const Ii="@",ki="@.disabled";let xi=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new Ai("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(s),new Ri(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(ni),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class Ai{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Ii&&t==ki?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ri extends Ai{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Ii?"."==t.charAt(1)&&t==ki?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Ii){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),s="";return i.charAt(0)!=Ii&&([i,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let Ni=(()=>{class e extends ni{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(xn),r.LFG(Sr))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Pi=new r.OlP("AnimationModuleType"),Oi=[{provide:Ut,useClass:Ei},{provide:Sr,useFactory:function(){return new Tr}},{provide:ni,useClass:Ni},{provide:r.FYo,useFactory:function(e,t,n){return new xi(e,t,n)},deps:[se,ni,r.R0b]}],Di=[{provide:xn,useFactory:function(){return"function"==typeof bi()?new wi:new _i}},{provide:Pi,useValue:"BrowserAnimations"},...Oi],Li=[{provide:xn,useClass:kn},{provide:Pi,useValue:"NoopAnimations"},...Oi];let Fi=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?Li:Di}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:Di,imports:[ye]}),e})();const Mi=new r.GfV("12.2.3"),Vi=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ui,ji=(()=>{class e{constructor(e,t,n){this._hasDoneGlobalChecks=!1,this._document=n,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=t,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checkIsEnabled(e){return!(!(0,r.X6Q)()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Mi.full!==on.full&&console.warn("The Angular Material version ("+Mi.full+") does not match the Angular CDK version ("+on.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Ct),r.LFG(Vi,8),r.LFG(o))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[sn],sn]}),e})();function qi(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=We(e)}}}function Bi(e,t){return class extends e{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const t=e||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),t&&this._elementRef.nativeElement.classList.add(`mat-${t}`),this._color=t)}}}function zi(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=We(e)}}}try{Ui="undefined"!=typeof Intl}catch(SE){Ui=!1}let Hi=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();class Gi{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const $i={enterDuration:225,exitDuration:150},Zi=it({passive:!0}),Wi=["mousedown","touchstart"],Ki=["mouseup","mouseleave","touchend","touchcancel"];class Yi{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Qe(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},$i),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=n.radius||function(e,t,n){const r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(e,t,r),o=e-r.left,a=t-r.top,l=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const u=new Gi(this,c,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const e=u===this._mostRecentTransientRipple;u.state=1,n.persistent||e&&this._isPointerDown||u.fadeOut()},l),u}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,r=Object.assign(Object.assign({},$i),e.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Qe(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Wi))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ki),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=ht(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!dt(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(e=>{this._triggerElement.addEventListener(e,this,Zi)})})}_removeTriggerEvents(){this._triggerElement&&(Wi.forEach(e=>{this._triggerElement.removeEventListener(e,this,Zi)}),this._pointerUpEventsRegistered&&Ki.forEach(e=>{this._triggerElement.removeEventListener(e,this,Zi)}))}}const Qi=new r.OlP("mat-ripple-global-options");let Ji=(()=>{class e{constructor(e,t,n,r,i){this._elementRef=e,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Yi(this,t,e,n)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(nt),r.Y36(Qi,8),r.Y36(Pi,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),Xi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[ji,rt],ji]}),e})();var es=n(9796),ts=n(9105);function ns(e,t,n,r){return(0,ts.m)(n)&&(r=n,n=void 0),r?ns(e,t,n).pipe((0,Oe.U)(e=>(0,es.k)(e)?r(...e):r(e))):new at.y(r=>{rs(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function rs(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)rs(e[s],t,n,r,i)}r.add(s)}var is=n(6465),ss=n(6102);new class extends ss.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends is.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});class os{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new as(e,this.durationSelector))}}class as extends He.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=(0,He.ft)(n,new He.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var ls=n(6561);function cs(e=0,t,n){let r=-1;return(0,ls.k)(t)?r=Number(t)<1?1:Number(t):(0,xt.K)(t)&&(n=t),(0,xt.K)(n)||(n=Ie.P),new at.y(t=>{const i=(0,ls.k)(e)?e:+e-n.now();return n.schedule(us,i,{index:0,period:r,subscriber:t})})}function us(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function hs(e,t=Ie.P){return n=()=>cs(e,t),function(e){return e.lift(new os(n))};var n}function ds(){return e=>e.lift(new ps)}class ps{call(e,t){return t.subscribe(new fs(e))}}class fs extends Te.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var ms=n(7771),gs=n(9746),ys=n(8858);class _s extends _e.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new vs(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new we.N;if(this.isStopped||this.hasError?s=ve.w.EMPTY:(this.observers.push(e),s=new ys.W(this,e)),r&&e.add(e=new gs.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||ms.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class vs{constructor(e,t){this.time=e,this.value=t}}function ws(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,l=!1;return function(c){let u;o++,!i||a?(a=!1,i=new _s(e,t,r),u=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){l=!0,s=void 0,i.complete()}}),l&&(s=void 0)):u=i.subscribe(this),this.add(()=>{o--,u.unsubscribe(),u=void 0,s&&!l&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}let bs=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new _e.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new at.y(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(hs(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Ee.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Re(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=Qe(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ns(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(nt),r.LFG(o,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.R0b),r.LFG(nt),r.LFG(o,8))},token:e,providedIn:"root"}),e})(),Es=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new _e.xQ,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(hs(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nt),r.LFG(r.R0b),r.LFG(o,8))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(nt),r.LFG(r.R0b),r.LFG(o,8))},token:e,providedIn:"root"}),e})(),Cs=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),Ss=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[sn,rt,Cs],sn,Cs]}),e})();const Ts=st();class Is{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ye(-this._previousScrollPosition.left),e.style.top=Ye(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Ts&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ts&&(t.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class ks{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class xs{enable(){}disable(){}attach(){}}function As(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function Rs(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class Ns{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();As(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ps=(()=>{class e{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new xs,this.close=e=>new ks(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new Is(this._viewportRuler,this._document),this.reposition=e=>new Ns(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=r}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(bs),r.LFG(Es),r.LFG(r.R0b),r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(bs),r.LFG(Es),r.LFG(r.R0b),r.LFG(o))},token:e,providedIn:"root"}),e})();class Os{constructor(e){if(this.scrollStrategy=new xs,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class Ds{constructor(e,t,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Ls{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Fs=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})(),Ms=(()=>{class e extends Fs{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})(),Vs=(()=>{class e extends Fs{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._clickListener=e=>{const t=ot(e),n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(t))break;i._outsidePointerEvents.next(e)}}}}add(e){if(super.add(e),!this._isAttached){const e=this._document.body;e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(nt))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o),r.LFG(nt))},token:e,providedIn:"root"}),e})();const Us="undefined"!=typeof window?window:{},js=void 0!==Us.__karma__&&!!Us.__karma__||void 0!==Us.jasmine&&!!Us.jasmine||void 0!==Us.jest&&!!Us.jest||void 0!==Us.Mocha&&!!Us.Mocha;let qs=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||js){const t=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const t=this._document.createElement("div");t.classList.add(e),js?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(nt))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o),r.LFG(nt))},token:e,providedIn:"root"}),e})();class Bs{constructor(e,t,n,r,i,s,o,a,l){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new _e.xQ,this._attachments=new _e.xQ,this._detachments=new _e.xQ,this._locationChanges=ve.w.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new _e.xQ,this._outsidePointerEvents=new _e.xQ,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fe(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ye(this._config.width),e.height=Ye(this._config.height),e.minWidth=Ye(this._config.minWidth),e.minHeight=Ye(this._config.minHeight),e.maxWidth=Ye(this._config.maxWidth),e.maxHeight=Ye(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const r=e.classList;Ke(t).forEach(e=>{e&&(n?r.add(e):r.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ge((0,St.T)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const zs="cdk-overlay-connected-position-bounding-box",Hs=/([A-Za-z%]+)$/;class Gs{constructor(e,t,n,r,i){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new _e.xQ,this._resizeSubscription=ve.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(zs),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=[];let i;for(let s of this._preferredPositions){let o=this._getOriginPoint(e,s),a=this._getOverlayPoint(o,t,s),l=this._getOverlayFit(a,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:s,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:t})}if(r.length){let e=null,t=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>t&&(t=r,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$s(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zs),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,r;if("center"==t.originX)n=e.left+e.width/2;else{const r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:r}}_getOverlayPoint(e,t,n){let r,i;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,i="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+i}}_getOverlayFit(e,t,n,r){const i=Ws(t);let{x:s,y:o}=e,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(s+=a),l&&(o+=l);let c=0-o,u=o+i.height-n.height,h=this._subtractOverflows(i.width,0-s,s+i.width-n.width),d=this._subtractOverflows(i.height,c,u),p=h*d;return{visibleArea:p,isCompletelyWithinViewport:i.width*i.height===p,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,i=n.right-t.x,s=Zs(this._overlayRef.getConfig().minHeight),o=Zs(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=o&&o<=i;return(e.fitsInViewportVertically||null!=s&&s<=r)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Ws(t),i=this._viewportRect,s=Math.max(e.x+r.width-i.width,0),o=Math.max(e.y+r.height-i.height,0),a=Math.max(i.top-n.top-e.y,0),l=Math.max(i.left-n.left-e.x,0);let c=0,u=0;return c=r.width<=i.width?l||-s:e.x<this._viewportMargin?i.left-n.left-e.x:0,u=r.height<=i.height?a||-o:e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:c,y:u},{x:e.x+c,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new Ls(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let i=0;i<t.length;i++)t[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let i,s,o,a,l,c;if("top"===t.overlayY)s=e.y,i=n.height-s+this._viewportMargin;else if("bottom"===t.overlayY)o=n.height-e.y+2*this._viewportMargin,i=n.height-o+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),r=this._lastBoundingBoxSize.height;i=2*t,s=e.y-t,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-r/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),r=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-r/2)}return{top:s,left:l,bottom:o,right:c,width:a,height:i}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Ye(n.height),r.top=Ye(n.top),r.bottom=Ye(n.bottom),r.width=Ye(n.width),r.left=Ye(n.left),r.right=Ye(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(r.maxHeight=Ye(e)),i&&(r.maxWidth=Ye(i))}this._lastBoundingBoxSize=n,$s(this._boundingBox.style,r)}_resetBoundingBoxStyles(){$s(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$s(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();$s(n,this._getExactOverlayY(t,e,r)),$s(n,this._getExactOverlayX(t,e,r))}else n.position="static";let o="",a=this._getOffset(t,"x"),l=this._getOffset(t,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),n.transform=o.trim(),s.maxHeight&&(r?n.maxHeight=Ye(s.maxHeight):i&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=Ye(s.maxWidth):i&&(n.maxWidth="")),$s(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=s,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Ye(i.y),r}_getExactOverlayX(e,t,n){let r,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),r=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ye(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Rs(e,n),isOriginOutsideView:As(e,n),isOverlayClipped:Rs(t,n),isOverlayOutsideView:As(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ke(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof r.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function $s(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Zs(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(Hs);return n&&"px"!==n?null:parseFloat(t)}return e||null}function Ws(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class Ks{constructor(e,t,n,r,i,s,o){this._preferredPositions=[],this._positionStrategy=new Gs(n,r,i,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,r){const i=new Ds(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const Ys="cdk-global-overlay-wrapper";class Qs{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Ys),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:s,maxHeight:o}=n,a=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==i&&"100vh"!==i||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(Ys),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Js=(()=>{class e{constructor(e,t,n,r){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=r}global(){return new Qs}connectedTo(e,t,n){return new Ks(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new Gs(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Es),r.LFG(o),r.LFG(nt),r.LFG(qs))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(Es),r.LFG(o),r.LFG(nt),r.LFG(qs))},token:e,providedIn:"root"}),e})(),Xs=0,eo=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c,u){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=u}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new Os(e);return i.direction=i.direction||this._directionality.value,new Bs(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+Xs++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new en(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Ps),r.LFG(qs),r.LFG(r._Vd),r.LFG(Js),r.LFG(Ms),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(o),r.LFG(rn),r.LFG(b),r.LFG(Vs))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const to={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[eo],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let no=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[eo,to],imports:[[sn,tn,Ss],Ss]}),e})();const ro=["mat-menu-item",""];function io(e,t){1&e&&(r.O4$(),r.TgZ(0,"svg",2),r._UZ(1,"polygon",3),r.qZA())}const so=["*"];function oo(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",0),r.NdJ("keydown",function(t){return r.CHM(e),r.oxw()._handleKeydown(t)})("click",function(){return r.CHM(e),r.oxw().closed.emit("click")})("@transformMenu.start",function(t){return r.CHM(e),r.oxw()._onAnimationStart(t)})("@transformMenu.done",function(t){return r.CHM(e),r.oxw()._onAnimationDone(t)}),r.TgZ(1,"div",1),r.Hsn(2),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),r.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const ao={transformMenu:qt("transformMenu",[Gt("void",Ht({opacity:0,transform:"scale(0.8)"})),$t("void => enter",Bt("120ms cubic-bezier(0, 0, 0.2, 1)",Ht({opacity:1,transform:"scale(1)"}))),$t("* => void",Bt("100ms 25ms linear",Ht({opacity:0})))]),fadeInItems:qt("fadeInItems",[Gt("showing",Ht({opacity:1})),$t("void => *",[Ht({opacity:0}),Bt("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},lo=new r.OlP("MatMenuContent"),co=new r.OlP("MAT_MENU_PANEL"),uo=zi(qi(class{}));let ho=(()=>{class e extends uo{constructor(e,t,n,r,i){super(),this._elementRef=e,this._focusMonitor=n,this._parentMenu=r,this._changeDetectorRef=i,this.role="menuitem",this._hovered=new _e.xQ,this._focused=new _e.xQ,this._highlighted=!1,this._triggersSubmenu=!1,r&&r.addItem&&r.addItem(this)}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,t;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++){const t=r[i];null===(e=t.parentNode)||void 0===e||e.removeChild(t)}return(null===(t=n.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(e){var t;this._highlighted=e,null===(t=this._changeDetectorRef)||void 0===t||t.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(o),r.Y36(vt),r.Y36(co,8),r.Y36(r.sBO))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t._checkDisabled(e)})("mouseenter",function(){return t._handleMouseEnter()}),2&e&&(r.uIk("role",t.role)("tabindex",t._getTabIndex())("aria-disabled",t.disabled.toString())("disabled",t.disabled||null),r.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",t._highlighted)("mat-menu-item-submenu-trigger",t._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[r.qOj],attrs:ro,ngContentSelectors:so,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,t){1&e&&(r.F$t(),r.Hsn(0),r._UZ(1,"div",0),r.YNc(2,io,2,0,"svg",1)),2&e&&(r.xp6(1),r.Q6J("matRippleDisabled",t.disableRipple||t.disabled)("matRippleTrigger",t._getHostElement()),r.xp6(1),r.Q6J("ngIf",t._triggersSubmenu))},directives:[Ji,O],encapsulation:2,changeDetection:0}),e})();const po=new r.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let fo=0,mo=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._ngZone=t,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new r.n_E,this._tabSubscription=ve.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new _e.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new r.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+fo++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=We(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=We(e)}set panelClass(e){const t=this._previousPanelClass;t&&t.length&&t.split(" ").forEach(e=>{this._classList[e]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(e=>{this._classList[e]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ut(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(At(this._directDescendantItems),Nt(e=>(0,St.T)(...e.map(e=>e._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(At(this._directDescendantItems),Nt(e=>(0,St.T)(...e.map(e=>e._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const t=e.keyCode,n=this._keyManager;switch(t){case 27:Ce(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==t&&40!==t||n.setFocusOrigin("keyboard"),n.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Fe(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const t=this._keyManager;if(t.setFocusOrigin(e).setFirstItemActive(),!t.activeItem&&this._directDescendantItems.length){let e=this._directDescendantItems.first._getHostElement().parentElement;for(;e;){if("menu"===e.getAttribute("role")){e.focus();break}e=e.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const t=Math.min(this._baseElevation+e,24),n=`${this._elevationPrefix}${t}`,r=Object.keys(this._classList).find(e=>e.startsWith(this._elevationPrefix));r&&r!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[n]=!0,this._previousElevation=n)}setPositionClasses(e=this.xPosition,t=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===e,n["mat-menu-after"]="after"===e,n["mat-menu-above"]="above"===t,n["mat-menu-below"]="below"===t}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(At(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(e=>e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(po))},e.\u0275dir=r.lG2({type:e,contentQueries:function(e,t,n){if(1&e&&(r.Suo(n,lo,5),r.Suo(n,ho,5),r.Suo(n,ho,4)),2&e){let e;r.iGM(e=r.CRH())&&(t.lazyContent=e.first),r.iGM(e=r.CRH())&&(t._allItems=e),r.iGM(e=r.CRH())&&(t.items=e)}},viewQuery:function(e,t){if(1&e&&r.Gf(r.Rgc,5),2&e){let e;r.iGM(e=r.CRH())&&(t.templateRef=e.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),e})(),go=(()=>{class e extends mo{constructor(e,t,n){super(e,t,n),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(po))},e.\u0275cmp=r.Xpm({type:e,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,t){2&e&&r.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[r._Bn([{provide:co,useExisting:e}]),r.qOj],ngContentSelectors:so,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,t){1&e&&(r.F$t(),r.YNc(0,oo,3,6,"ng-template"))},directives:[A],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[ao.transformMenu,ao.fadeInItems]},changeDetection:0}),e})();const yo=new r.OlP("mat-menu-scroll-strategy"),_o={provide:yo,deps:[eo],useFactory:function(e){return()=>e.scrollStrategies.reposition()}},vo=it({passive:!0});let wo=(()=>{class e{constructor(e,t,n,i,s,o,a,l){this._overlay=e,this._element=t,this._viewContainerRef=n,this._menuItemInstance=o,this._dir=a,this._focusMonitor=l,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=ve.w.EMPTY,this._hoverSubscription=ve.w.EMPTY,this._menuCloseSubscription=ve.w.EMPTY,this._handleTouchStart=e=>{dt(e)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new r.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new r.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=s instanceof mo?s:void 0,t.nativeElement.addEventListener("touchstart",this._handleTouchStart,vo),o&&(o._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(e=>{this._destroyMenu(e),"click"!==e&&"tab"!==e||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(e)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,vo),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),t=e.getConfig();this._setPosition(t.positionStrategy),t.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof mo&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==e&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,t instanceof mo?(t._resetAnimation(),t.lazyContent?t._animationDone.pipe(Re(e=>"void"===e.toState),Fe(1),Ge(t.lazyContent._attached)).subscribe({next:()=>t.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),t.lazyContent&&t.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,t=this.menu.parentMenu;for(;t;)e++,t=t.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Os({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(e=>{this.menu.setPositionClasses("start"===e.connectionPair.overlayX?"after":"before","top"===e.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[t,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[r,i]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[s,o]=[r,i],[a,l]=[t,n],c=0;this.triggersSubmenu()?(l=t="before"===this.menu.xPosition?"start":"end",n=a="end"===t?"start":"end",c="bottom"===r?8:-8):this.menu.overlapTrigger||(s="top"===r?"bottom":"top",o="top"===i?"bottom":"top"),e.withPositions([{originX:t,originY:s,overlayX:a,overlayY:r,offsetY:c},{originX:n,originY:s,overlayX:l,overlayY:r,offsetY:c},{originX:t,originY:o,overlayX:a,overlayY:i,offsetY:-c},{originX:n,originY:o,overlayX:l,overlayY:i,offsetY:-c}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),t=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,Ee.of)(),r=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Re(e=>e!==this._menuItemInstance),Re(()=>this._menuOpen)):(0,Ee.of)();return(0,St.T)(e,n,r,t)}_handleMousedown(e){ht(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const t=e.keyCode;13!==t&&32!==t||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===t&&"ltr"===this.dir||37===t&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Re(e=>e===this._menuItemInstance&&!e.disabled),Lt(0,Tt.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof mo&&this.menu._isAnimating?this.menu._animationDone.pipe(Fe(1),Lt(0,Tt.E),Ge(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new Jt(this.menu.templateRef,this._viewContainerRef)),this._portal}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(eo),r.Y36(r.SBq),r.Y36(r.s_b),r.Y36(yo),r.Y36(co,8),r.Y36(ho,10),r.Y36(rn,8),r.Y36(vt))},e.\u0275dir=r.lG2({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,t){1&e&&r.NdJ("mousedown",function(e){return t._handleMousedown(e)})("keydown",function(e){return t._handleKeydown(e)})("click",function(e){return t._handleClick(e)}),2&e&&r.uIk("aria-expanded",t.menuOpen||null)("aria-controls",t.menuOpen?t.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),e})(),bo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[_o],imports:[ji]}),e})(),Eo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[_o],imports:[[F,ji,Xi,no,bo],Cs,ji,bo]}),e})();const Co=["mat-button",""],So=["*"],To=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Io=Bi(qi(zi(class{constructor(e){this._elementRef=e}})));let ko=(()=>{class e extends Io{constructor(e,t,n){super(e),this._focusMonitor=t,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of To)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,t){e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(vt),r.Y36(Pi,8))},e.\u0275cmp=r.Xpm({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){if(1&e&&r.Gf(Ji,5),2&e){let e;r.iGM(e=r.CRH())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,t){2&e&&(r.uIk("disabled",t.disabled||null),r.ekj("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.qOj],attrs:Co,ngContentSelectors:So,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(r.F$t(),r.TgZ(0,"span",0),r.Hsn(1),r.qZA(),r._UZ(2,"span",1),r._UZ(3,"span",2)),2&e&&(r.xp6(2),r.ekj("mat-button-ripple-round",t.isRoundButton||t.isIconButton),r.Q6J("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[Ji],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e})(),xo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[Xi,ji],ji]}),e})();class Ao extends Te.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Ro extends Te.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var No=n(7444);function Po(e,t,n,r,i=new Ro(e,n,r)){if(!i.closed)return t instanceof at.y?t.subscribe(i):(0,No.s)(t)(i)}var Oo=n(6693);const Do={};class Lo{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Fo(e,this.resultSelector))}}class Fo extends Ao{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Do),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Po(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===Do?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Mo=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();function Vo(e){return new at.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Rt.D)(n):(0,Le.c)()).subscribe(t)})}var Uo=n(2441);function jo(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new qo(e,t,n))}}class qo{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Bo(e,this.accumulator,this.seed,this.hasSeed))}}class Bo extends Te.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function zo(e){return function(t){const n=new Ho(e),r=t.lift(n);return n.caught=r}}class Ho{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Go(e,this.selector,this.caught))}}class Go extends He.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new He.IY(this);this.add(r);const i=(0,He.ft)(n,r);i!==r&&this.add(i)}}}var $o=n(9773);function Zo(e,t){return(0,$o.zg)(e,t,1)}function Wo(e){return function(t){return 0===e?(0,Le.c)():t.lift(new Ko(e))}}class Ko{constructor(e){if(this.total=e,this.total<0)throw new De}call(e,t){return t.subscribe(new Yo(e,this.total))}}class Yo extends Te.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function Qo(e=ea){return t=>t.lift(new Jo(e))}class Jo{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Xo(e,this.errorFactory))}}class Xo extends Te.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function ea(){return new Mo}function ta(e=null){return t=>t.lift(new na(e))}class na{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ra(e,this.defaultValue))}}class ra extends Te.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ia=n(4487);function sa(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Re((t,n)=>e(t,n,r)):ia.y,Fe(1),n?ta(t):Qo(()=>new Mo))}var oa=n(1307);class aa{constructor(e){this.callback=e}call(e,t){return t.subscribe(new la(e,this.callback))}}class la extends Te.L{constructor(e,t){super(e),this.add(new ve.w(t))}}class ca{constructor(e,t){this.id=e,this.url=t}}class ua extends ca{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends ca{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class da extends ca{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pa extends ca{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fa extends ca{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends ca{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga extends ca{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ya extends ca{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _a extends ca{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class va{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ba{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sa{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ta{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ia="primary";class ka{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xa(e){return new ka(e)}function Aa(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Ra(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Na(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Pa(e[i],t[i]))return!1;return!0}function Pa(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Oa(e){return Array.prototype.concat.apply([],e)}function Da(e){return e.length>0?e[e.length-1]:null}function La(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Fa(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,Rt.D)(Promise.resolve(e)):(0,Ee.of)(e)}const Ma={exact:function e(t,n,r){if(!$a(t.segments,n.segments))return!1;if(!Ba(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:ja},Va={exact:function(e,t){return Na(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Pa(e[n],t[n]))},ignored:()=>!0};function Ua(e,t,n){return Ma[n.paths](e.root,t.root,n.matrixParams)&&Va[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function ja(e,t,n){return qa(e,t,t.segments,n)}function qa(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!$a(i,n)&&!t.hasChildren()&&!!Ba(i,n,r)}if(e.segments.length===n.length){if(!$a(e.segments,n))return!1;if(!Ba(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!ja(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!$a(e.segments,i)&&!!Ba(e.segments,i,r)&&!!e.children.primary&&qa(e.children.primary,t,s,r)}}function Ba(e,t,n){return t.every((t,r)=>Va[n](e[r].parameters,t.parameters))}class za{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return Ka.serialize(this)}}class Ha{constructor(e,t){this.segments=e,this.children=t,this.parent=null,La(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ya(this)}}class Ga{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xa(this.parameters)),this._parameterMap}toString(){return rl(this)}}function $a(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Za{}class Wa{parse(e){const t=new ll(e);return new za(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Qa(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Xa(t)}=${Xa(e)}`).join("&"):`${Xa(t)}=${Xa(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Ka=new Wa;function Ya(e){return e.segments.map(e=>rl(e)).join("/")}function Qa(e,t){if(!e.hasChildren())return Ya(e);if(t){const t=e.children.primary?Qa(e.children.primary,!1):"",n=[];return La(e.children,(e,t)=>{t!==Ia&&n.push(`${t}:${Qa(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return La(e.children,(e,r)=>{r===Ia&&(n=n.concat(t(e,r)))}),La(e.children,(e,r)=>{r!==Ia&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===Ia?[Qa(e.children.primary,!1)]:[`${n}:${Qa(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Ya(e)}/${t[0]}`:`${Ya(e)}/(${t.join("//")})`}}function Ja(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xa(e){return Ja(e).replace(/%3B/gi,";")}function el(e){return Ja(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tl(e){return decodeURIComponent(e)}function nl(e){return tl(e.replace(/\+/g,"%20"))}function rl(e){return`${el(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${el(e)}=${el(t[e])}`).join("")}`;var t}const il=/^[^\/()?;=#]+/;function sl(e){const t=e.match(il);return t?t[0]:""}const ol=/^[^=?&#]+/,al=/^[^?&#]+/;class ll{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ha([],{}):new Ha([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ha(e,t)),n}parseSegment(){const e=sl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ga(tl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sl(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=sl(this.remaining);e&&(n=e,this.capture(n))}e[tl(t)]=tl(n)}parseQueryParam(e){const t=function(e){const t=e.match(ol);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(al);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=nl(t),i=nl(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sl(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ia);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new Ha([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class cl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ul(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=ul(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return hl(e,this._root).map(e=>e.value)}}function ul(e,t){if(e===t.value)return t;for(const n of t.children){const t=ul(e,n);if(t)return t}return null}function hl(e,t){if(e===t.value)return[t];for(const n of t.children){const r=hl(e,n);if(r.length)return r.unshift(t),r}return[]}class dl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pl(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class fl extends cl{constructor(e,t){super(e),this.snapshot=t,wl(this,e)}toString(){return this.snapshot.toString()}}function ml(e,t){const n=function(e,t){const n=new _l([],{},{},"",{},Ia,t,null,e.root,-1,{});return new vl("",new dl(n,[]))}(e,t),r=new be([new Ga("",{})]),i=new be({}),s=new be({}),o=new be({}),a=new be(""),l=new gl(r,i,o,a,s,Ia,t,n.root);return l.snapshot=n.root,new fl(new dl(l,[]),n)}class gl{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Oe.U)(e=>xa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Oe.U)(e=>xa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yl(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class _l{constructor(e,t,n,r,i,s,o,a,l,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vl extends cl{constructor(e,t){super(t),this.url=e,wl(this,t)}toString(){return bl(this._root)}}function wl(e,t){t.value._routerState=e,t.children.forEach(t=>wl(e,t))}function bl(e){const t=e.children.length>0?` { ${e.children.map(bl).join(", ")} } `:"";return`${e.value}${t}`}function El(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Na(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Na(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Na(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Na(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Cl(e,t){return Na(e.params,t.params)&&function(e,t){return $a(e,t)&&e.every((e,n)=>Na(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Cl(e.parent,t.parent))}function Sl(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return Sl(e,t,r);return Sl(e,t)})}(e,t,n);return new dl(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Tl(t,e),e}}const n=new gl(new be((r=t.value).url),new be(r.params),new be(r.queryParams),new be(r.fragment),new be(r.data),r.outlet,r.component,r),i=t.children.map(t=>Sl(e,t));return new dl(n,i)}var r}function Tl(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Tl(e.children[n],t.children[n])}function Il(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function kl(e){return"object"==typeof e&&null!=e&&e.outlets}function xl(e,t,n,r,i){let s={};return r&&La(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new za(n.root===e?t:Al(n.root,e,t),s,i)}function Al(e,t,n){const r={};return La(e.children,(e,i)=>{r[i]=e===t?n:Al(e,t,n)}),new Ha(e.segments,r)}class Rl{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Il(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(kl);if(r&&r!==Da(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nl{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Pl(e,t,n){if(e||(e=new Ha([],{})),0===e.segments.length&&e.hasChildren())return Ol(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(kl(o))break;const a=`${o}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Ml(a,l,t))return s;r+=2}else{if(!Ml(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Ha(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Ha(e.segments.slice(r.pathIndex),e.children),Ol(t,0,i)}return r.match&&0===i.length?new Ha(e.segments,{}):r.match&&!e.hasChildren()?Dl(e,t,n):r.match?Ol(e,0,i):Dl(e,t,n)}function Ol(e,t,n){if(0===n.length)return new Ha(e.segments,{});{const r=function(e){return kl(e[0])?e[0].outlets:{[Ia]:e}}(n),i={};return La(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Pl(e.children[r],t,n))}),La(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new Ha(e.segments,i)}}function Dl(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(kl(s)){const e=Ll(s.outlets);return new Ha(r,e)}if(0===i&&Il(n[0])){r.push(new Ga(e.segments[t].path,Fl(n[0]))),i++;continue}const o=kl(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Il(a)?(r.push(new Ga(o,Fl(a))),i+=2):(r.push(new Ga(o,{})),i++)}return new Ha(r,{})}function Ll(e){const t={};return La(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Dl(new Ha([],{}),0,e))}),t}function Fl(e){const t={};return La(e,(e,n)=>t[n]=`${e}`),t}function Ml(e,t,n){return e==n.path&&Na(t,n.parameters)}class Vl{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),El(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=pl(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),La(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=pl(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=pl(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Sa(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ea(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(El(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Ul(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Ul(e){El(e.value),e.children.forEach(Ul)}class jl{constructor(e,t){this.routes=e,this.module=t}}function ql(e){return"function"==typeof e}function Bl(e){return e instanceof za}const zl=Symbol("INITIAL_VALUE");function Hl(){return Nt(e=>function(...e){let t,n;return(0,xt.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,es.k)(e[0])&&(e=e[0]),(0,Oo.n)(e,n).lift(new Lo(t))}(e.map(e=>e.pipe(Fe(1),At(zl)))).pipe(jo((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==zl)return e;if(r===zl&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Bl(r))return r}return e},e)},zl),Re(e=>e!==zl),(0,Oe.U)(e=>Bl(e)?e:!0===e),Fe(1)))}let Gl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[qc]},encapsulation:2}),e})();function $l(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Zl(r,Wl(t,r))}}function Zl(e,t){e.children&&$l(e.children,t)}function Wl(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Kl(e){const t=e.children&&e.children.map(Kl),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ia&&(n.component=Gl),n}function Yl(e){return e.outlet||Ia}function Ql(e,t){const n=e.filter(e=>Yl(e)===t);return n.push(...e.filter(e=>Yl(e)!==t)),n}const Jl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Xl(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Jl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Ra)(n,e,t);if(!i)return Object.assign({},Jl);const s={};La(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ec(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>tc(e,t,n)&&Yl(n)!==Ia)}(e,n,r)){const i=new Ha(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Yl(s)!==Ia){const n=new Ha([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Yl(s)]=n}return i}(e,t,r,new Ha(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>tc(e,t,n))}(e,n,r)){const s=new Ha(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(tc(e,n,a)&&!i[Yl(a)]){const n=new Ha([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Yl(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Ha(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function tc(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function nc(e,t,n,r){return!!(Yl(e)===r||r!==Ia&&tc(t,n,e))&&("**"===e.path||Xl(t,e,n).matched)}function rc(e,t,n){return 0===t.length&&!e.children[n]}class ic{constructor(e){this.segmentGroup=e||null}}class sc{constructor(e){this.urlTree=e}}function oc(e){return new at.y(t=>t.error(new ic(e)))}function ac(e){return new at.y(t=>t.error(new sc(e)))}function lc(e){return new at.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class cc{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=ec(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ha(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ia).pipe((0,Oe.U)(e=>this.createUrlTree(uc(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zo(e=>{if(e instanceof sc)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof ic)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ia).pipe((0,Oe.U)(t=>this.createUrlTree(uc(t),e.queryParams,e.fragment))).pipe(zo(e=>{if(e instanceof ic)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Ha([],{[Ia]:e}):e;return new za(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Oe.U)(e=>new Ha([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Rt.D)(r).pipe(Zo(r=>{const i=n.children[r],s=Ql(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Oe.U)(e=>({segment:e,outlet:r})))}),jo((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Re((t,n)=>e(t,n,r)):ia.y,Wo(1),n?ta(t):Qo(()=>new Mo))}())}expandSegment(e,t,n,r,i,s){return(0,Rt.D)(n).pipe(Zo(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(zo(e=>{if(e instanceof ic)return(0,Ee.of)(null);throw e}))),sa(e=>!!e),zo((e,n)=>{if(e instanceof Mo||"EmptyError"===e.name){if(rc(t,r,i))return(0,Ee.of)(new Ha([],{}));throw new ic(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return nc(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):oc(t):oc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ac(i):this.lineralizeSegments(n,i).pipe((0,$o.zg)(n=>{const i=new Ha(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Xl(t,r,i);if(!o)return oc(t);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ac(u):this.lineralizeSegments(r,u).pipe((0,$o.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(l)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ee.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Oe.U)(e=>(n._loadedConfig=e,new Ha(r,{})))):(0,Ee.of)(new Ha(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Xl(t,n,r);if(!s)return oc(t);const l=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,$o.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=ec(t,o,l,s),u=new Ha(a.segments,a.children);if(0===c.length&&u.hasChildren())return this.expandChildren(r,s,u).pipe((0,Oe.U)(e=>new Ha(o,e)));if(0===s.length&&0===c.length)return(0,Ee.of)(new Ha(o,{}));const h=Yl(n)===i;return this.expandSegment(r,u,s,c,h?Ia:i,!0).pipe((0,Oe.U)(e=>new Ha(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,Ee.of)(new jl(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ee.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,$o.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Oe.U)(e=>(t._loadedConfig=e,e))):function(e){return new at.y(t=>t.error(Aa(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,Ee.of)(new jl([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,Ee.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&ql(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!ql(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return Fa(s)});return(0,Ee.of)(i).pipe(Hl(),(0,Se.b)(e=>{if(!Bl(e))return;const t=Aa(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Oe.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ee.of)(n);if(r.numberOfChildren>1||!r.children.primary)return lc(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new za(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return La(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return La(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new Ha(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function uc(e){const t={};for(const n of Object.keys(e.children)){const r=uc(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Ha(e.segments.concat(t.segments),t.children)}return e}(new Ha(e.segments,t))}class hc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dc{constructor(e,t){this.component=e,this.route=t}}function pc(e,t,n){const r=e._root;return mc(r,t?t._root:null,n,[r.value])}function fc(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function mc(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=pl(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!$a(e.url,t.url);case"pathParamsOrQueryParamsChange":return!$a(e.url,t.url)||!Na(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cl(e,t)||!Na(e.queryParams,t.queryParams);case"paramsChange":default:return!Cl(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new hc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),mc(e,t,s.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dc(a.outlet.component,o))}else o&&gc(t,a,i),i.canActivateChecks.push(new hc(r)),mc(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),La(s,(e,t)=>gc(e,n.getContext(t),i)),i}function gc(e,t,n){const r=pl(e),i=e.value;La(r,(e,r)=>{gc(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new dc(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class yc{}function _c(e){return new at.y(t=>t.error(e))}class vc{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=ec(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ia);if(null===t)return null;const n=new _l([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ia,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new dl(n,t),i=new vl(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=yl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=Ql(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=bc(n);return r.sort((e,t)=>e.value.outlet===Ia?-1:t.value.outlet===Ia?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return rc(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!nc(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?Da(n).parameters:{};i=new _l(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sc(e),Yl(e),e.component,e,Ec(t),Cc(t)+n.length,Tc(e))}else{const r=Xl(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new _l(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sc(e),Yl(e),e.component,e,Ec(t),Cc(t)+s.length,Tc(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=ec(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return null===e?null:[new dl(i,e)]}if(0===a.length&&0===c.length)return[new dl(i,[])];const u=Yl(e)===r,h=this.processSegment(a,l,c,u?Ia:r);return null===h?null:[new dl(i,h)]}}function wc(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function bc(e){const t=[],n=new Set;for(const r of e){if(!wc(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=bc(r.children);t.push(new dl(r.value,e))}return t.filter(e=>!n.has(e))}function Ec(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Cc(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Sc(e){return e.data||{}}function Tc(e){return e.resolve||{}}function Ic(e){return Nt(t=>{const n=e(t);return n?(0,Rt.D)(n).pipe((0,Oe.U)(()=>t)):(0,Ee.of)(t)})}class kc extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const xc=new r.OlP("ROUTES");class Ac{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Oe.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new jl(Oa(i.injector.get(xc,void 0,r.XFs.Self|r.XFs.Optional)).map(Kl),i)}),zo(e=>{throw t._loader$=void 0,e}));return t._loader$=new Uo.c(n,()=>new _e.xQ).pipe((0,oa.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Rt.D)(this.loader.load(e)):Fa(e()).pipe((0,$o.zg)(e=>e instanceof r.YKP?(0,Ee.of)(e):(0,Rt.D)(this.compiler.compileModuleAsync(e))))}}class Rc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nc,this.attachRef=null}}class Nc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Rc,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Pc{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Oc(e){throw e}function Dc(e,t,n){return t.parse("/")}function Lc(e,t){return(0,Ee.of)(null)}const Fc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vc=(()=>{class e{constructor(e,t,n,i,s,o,a,l){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _e.xQ,this.errorHandler=Oc,this.malformedUriErrorHandler=Dc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Lc,afterPreactivation:Lc},this.urlHandlingStrategy=new Pc,this.routeReuseStrategy=new kc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new za(new Ha([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ac(o,a,e=>this.triggerEvent(new va(e)),e=>this.triggerEvent(new wa(e))),this.routerState=ml(this.currentUrlTree,this.rootComponentType),this.transitions=new be({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(Re(e=>0!==e.id),(0,Oe.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Nt(e=>{let n=!1,r=!1;return(0,Ee.of)(e).pipe((0,Se.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nt(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,Ee.of)(e).pipe(Nt(e=>{const n=this.transitions.getValue();return t.next(new ua(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Le.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,Nt(e=>function(e,t,n,r,i){return new cc(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,Oe.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,Se.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,$o.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new vc(e,t,n,r,i,s).recognize();return null===o?_c(new yc):(0,Ee.of)(o)}catch(o){return _c(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Oe.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Se.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new fa(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new ua(n,this.serializeUrl(r),i,s);t.next(a);const l=ml(r,this.rootComponentType).snapshot;return(0,Ee.of)(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Le.E}),Ic(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Se.b)(e=>{const t=new ma(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Oe.U)(e=>Object.assign(Object.assign({},e),{guards:pc(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,$o.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Ee.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Rt.D)(e).pipe((0,$o.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Ee.of)(!0);const o=s.map(s=>{const o=fc(s,t,i);let a;if(function(e){return e&&ql(e.canDeactivate)}(o))a=Fa(o.canDeactivate(e,t,n,r));else{if(!ql(o))throw new Error("Invalid CanDeactivate guard");a=Fa(o(e,t,n,r))}return a.pipe(sa())});return(0,Ee.of)(o).pipe(Hl())}(e.component,e.route,n,t,r)),sa(e=>!0!==e,!0))}(o,r,i,e).pipe((0,$o.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Rt.D)(t).pipe(Zo(t=>kt(function(e,t){return null!==e&&t&&t(new ba(e)),(0,Ee.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Ca(e)),(0,Ee.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Vo(()=>{const i=t.guards.map(i=>{const s=fc(i,t.node,n);let o;if(function(e){return e&&ql(e.canActivateChild)}(s))o=Fa(s.canActivateChild(r,e));else{if(!ql(s))throw new Error("Invalid CanActivateChild guard");o=Fa(s(r,e))}return o.pipe(sa())});return(0,Ee.of)(i).pipe(Hl())}));return(0,Ee.of)(i).pipe(Hl())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ee.of)(!0);const i=r.map(r=>Vo(()=>{const i=fc(r,t,n);let s;if(function(e){return e&&ql(e.canActivate)}(i))s=Fa(i.canActivate(t,e));else{if(!ql(i))throw new Error("Invalid CanActivate guard");s=Fa(i(t,e))}return s.pipe(sa())}));return(0,Ee.of)(i).pipe(Hl())}(e,t.route,n))),sa(e=>!0!==e,!0))}(r,s,e,t):(0,Ee.of)(n)),(0,Oe.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,Se.b)(e=>{if(Bl(e.guardsResult)){const t=Aa(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new ga(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Re(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),Ic(e=>{if(e.guards.canActivateChecks.length)return(0,Ee.of)(e).pipe((0,Se.b)(e=>{const t=new ya(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Nt(e=>{let t=!1;return(0,Ee.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,$o.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,Ee.of)(e);let s=0;return(0,Rt.D)(i).pipe(Zo(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,Ee.of)({});const s={};return(0,Rt.D)(i).pipe((0,$o.zg)(i=>function(e,t,n,r){const i=fc(e,t,r);return Fa(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Se.b)(e=>{s[i]=e}))),Wo(1),(0,$o.zg)(()=>Object.keys(s).length===i.length?(0,Ee.of)(s):Le.E))}(e._resolve,e,t,r).pipe((0,Oe.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),yl(e,n).resolve),null)))}(e.route,t,n,r)),(0,Se.b)(()=>s++),Wo(1),(0,$o.zg)(t=>s===i.length?(0,Ee.of)(e):Le.E))})),(0,Se.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,Se.b)(e=>{const t=new _a(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Ic(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Oe.U)(e=>{const t=function(e,t,n){const r=Sl(e,t._root,n?n._root:void 0);return new fl(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,Se.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),(0,Oe.U)(e=>(new Vl(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),(0,Se.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},e=>e.lift(new aa(i))),zo(n=>{if(r=!0,function(e){return e&&e.ngNavigationCancelingError}(n)){const r=Bl(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new da(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new pa(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch($m){e.reject($m)}}return Le.E}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){$l(e),this.config=e.map(Kl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return xl(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Rl(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return La(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Rl(n,t,r)}(n);if(s.toRoot())return xl(t.root,new Ha([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new Nl(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Nl(e,e===t.root,0)}const r=Il(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Nl(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Ol(o.segmentGroup,o.index,s.commands):Pl(o.segmentGroup,o.index,s.commands);return xl(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=l?l:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Bl(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Fc):!1===t?Object.assign({},Mc):t,Bl(e))return Ua(this.currentUrlTree,e,n);const r=this.parseUrl(e);return Ua(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ha(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),l="imperative"!==t&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(l&&c)return Promise.resolve(!0);let u,h,d;i?(u=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{u=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new da(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(Za),r.LFG(Nc),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Uc=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new _e.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:jc(this.skipLocationChange),replaceUrl:jc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jc(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Vc),r.Y36(gl),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})();function jc(e){return""===e||!!e}let qc=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Ia,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Bc(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Nc),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Bc{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===gl?this.route:e===Nc?this.childContexts:this.parent.get(e,t)}}class zc{}class Hc{preload(e,t){return(0,Ee.of)(null)}}let Gc=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Ac(t,n,t=>e.triggerEvent(new va(t)),t=>e.triggerEvent(new wa(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Re(e=>e instanceof ha),Zo(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,Rt.D)(n).pipe((0,It.J)(),(0,Oe.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,Ee.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,$o.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Vc),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(zc))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),$c=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ua?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ha&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ta&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Ta(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Vc),r.LFG(V),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Zc=new r.OlP("ROUTER_CONFIGURATION"),Wc=new r.OlP("ROUTER_FORROOT_GUARD"),Kc=[b,{provide:Za,useClass:Wa},{provide:Vc,useFactory:function(e,t,n,r,i,s,o,a={},l,c){const u=new Vc(null,e,t,n,r,i,s,Oa(o));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[Za,Nc,b,r.zs3,r.v3s,r.Sil,xc,Zc,[class{},new r.FiY],[class{},new r.FiY]]},Nc,{provide:gl,useFactory:function(e){return e.routerState.root},deps:[Vc]},{provide:r.v3s,useClass:r.EAV},Gc,Hc,class{preload(e,t){return t().pipe(zo(()=>(0,Ee.of)(null)))}},{provide:Zc,useValue:{enableTracing:!1}}];function Yc(){return new r.PXZ("Router",Vc)}let Qc=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Kc,tu(t),{provide:Wc,useFactory:eu,deps:[[Vc,new r.FiY,new r.tp0]]},{provide:Zc,useValue:n||{}},{provide:g,useFactory:Xc,deps:[a,[new r.tBr(_),new r.FiY],Zc]},{provide:$c,useFactory:Jc,deps:[Vc,V,Zc]},{provide:zc,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Hc},{provide:r.PXZ,multi:!0,useFactory:Yc},[nu,{provide:r.ip1,multi:!0,useFactory:ru,deps:[nu]},{provide:su,useFactory:iu,deps:[nu]},{provide:r.tb,multi:!0,useExisting:su}]]}}static forChild(t){return{ngModule:e,providers:[tu(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Wc,8),r.LFG(Vc,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function Jc(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new $c(e,t,n)}function Xc(e,t,n={}){return n.useHash?new w(e,t):new v(e,t)}function eu(e){return"guarded"}function tu(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:xc,multi:!0,useValue:e}]}let nu=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _e.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Vc),r=this.injector.get(Zc);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Ee.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Zc),n=this.injector.get(Gc),i=this.injector.get($c),s=this.injector.get(Vc),o=this.injector.get(r.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function ru(e){return e.appInitializer.bind(e)}function iu(e){return e.bootstrapListener.bind(e)}const su=new r.OlP("Router Initializer");let ou=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[Fi,F,xo,Eo,Qc]]}),e})();class au{constructor(){this.ativo=!0}}var lu=n(9126),cu=n(8939),uu=(n(6780),n(4486)),hu=n(6304),du=n(5452),pu=n(6034),fu=n(300),mu=n(4685),gu=function(e,t){return(gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function yu(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var _u,vu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wu=wu||{},bu=vu||self;function Eu(){}function Cu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Su(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tu="closure_uid_"+(1e9*Math.random()>>>0),Iu=0;function ku(e,t,n){return e.call.apply(e.bind,arguments)}function xu(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Au(e,t,n){return(Au=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ku:xu).apply(null,arguments)}function Ru(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Nu(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Pu(){this.s=this.s,this.o=this.o}var Ou={};Pu.prototype.s=!1,Pu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Tu)&&e[Tu]||(e[Tu]=++Iu)}(this);delete Ou[e]}},Pu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Du=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Lu=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function Fu(e){return Array.prototype.concat.apply([],arguments)}function Mu(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Vu(e){return/^[\s\xa0]*$/.test(e)}var Uu,ju=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qu(e,t){return-1!=e.indexOf(t)}function Bu(e,t){return e<t?-1:e>t?1:0}e:{var zu=bu.navigator;if(zu){var Hu=zu.userAgent;if(Hu){Uu=Hu;break e}}Uu=""}function Gu(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function $u(e){var t={};for(var n in e)t[n]=e[n];return t}var Zu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wu(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<Zu.length;s++)n=Zu[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ku(e){return Ku[" "](e),e}Ku[" "]=Eu;var Yu,Qu,Ju=qu(Uu,"Opera"),Xu=qu(Uu,"Trident")||qu(Uu,"MSIE"),eh=qu(Uu,"Edge"),th=eh||Xu,nh=qu(Uu,"Gecko")&&!(qu(Uu.toLowerCase(),"webkit")&&!qu(Uu,"Edge"))&&!(qu(Uu,"Trident")||qu(Uu,"MSIE"))&&!qu(Uu,"Edge"),rh=qu(Uu.toLowerCase(),"webkit")&&!qu(Uu,"Edge");function ih(){var e=bu.document;return e?e.documentMode:void 0}e:{var sh="",oh=(Qu=Uu,nh?/rv:([^\);]+)(\)|;)/.exec(Qu):eh?/Edge\/([\d\.]+)/.exec(Qu):Xu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qu):rh?/WebKit\/(\S+)/.exec(Qu):Ju?/(?:Version)[ \/]?(\S+)/.exec(Qu):void 0);if(oh&&(sh=oh?oh[1]:""),Xu){var ah=ih();if(null!=ah&&ah>parseFloat(sh)){Yu=String(ah);break e}}Yu=sh}var lh={};var ch=bu.document&&Xu&&(ih()||parseInt(Yu,10))||void 0,uh=function(){if(!bu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{bu.addEventListener("test",Eu,t),bu.removeEventListener("test",Eu,t)}catch(n){}return e}();function hh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function dh(e,t){if(hh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nh){e:{try{Ku(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ph[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&dh.Z.h.call(this)}}hh.prototype.h=function(){this.defaultPrevented=!0},Nu(dh,hh);var ph={2:"touch",3:"pen",4:"mouse"};dh.prototype.h=function(){dh.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fh="closure_listenable_"+(1e6*Math.random()|0),mh=0;function gh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++mh,this.ca=this.fa=!1}function yh(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function _h(e){this.src=e,this.g={},this.h=0}function vh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Du(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(yh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function wh(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}_h.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=wh(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new gh(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var bh="closure_lm_"+(1e6*Math.random()|0),Eh={};function Ch(e,t,n,r,i){if(r&&r.once)return Th(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ch(e,t[s],n,r,i);return null}return n=Ph(n),e&&e[fh]?e.N(t,n,Su(r)?!!r.capture:!!r,i):Sh(e,t,n,!1,r,i)}function Sh(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Su(i)?!!i.capture:!!i,a=Rh(e);if(a||(e[bh]=a=new _h(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Ah;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)uh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Th(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Th(e,t[s],n,r,i);return null}return n=Ph(n),e&&e[fh]?e.O(t,n,Su(r)?!!r.capture:!!r,i):Sh(e,t,n,!0,r,i)}function Ih(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ih(e,t[s],n,r,i);else r=Su(r)?!!r.capture:!!r,n=Ph(n),e&&e[fh]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=wh(s=e.g[t],n,r,i))&&(yh(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Rh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=wh(t,n,r,i)),(n=-1<e?t[e]:null)&&kh(n))}function kh(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[fh])vh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Rh(t))?(vh(n,e),0==n.h&&(n.src=null,t[bh]=null)):yh(e)}}}function xh(e){return e in Eh?Eh[e]:Eh[e]="on"+e}function Ah(e,t){if(e.ca)e=!0;else{t=new dh(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&kh(e),e=n.call(r,t)}return e}function Rh(e){return(e=e[bh])instanceof _h?e:null}var Nh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ph(e){return"function"==typeof e?e:(e[Nh]||(e[Nh]=function(t){return e.handleEvent(t)}),e[Nh])}function Oh(){Pu.call(this),this.i=new _h(this),this.P=this,this.I=null}function Dh(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new hh(t,e);else if(t instanceof hh)t.target=t.target||e;else{var i=t;Wu(t=new hh(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Lh(o,r,!0,t)&&i}if(i=Lh(o=t.g=e,r,!0,t)&&i,i=Lh(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Lh(o=t.g=n[s],r,!1,t)&&i}function Lh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&vh(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Nu(Oh,Pu),Oh.prototype[fh]=!0,Oh.prototype.removeEventListener=function(e,t,n,r){Ih(this,e,t,n,r)},Oh.prototype.M=function(){if(Oh.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yh(n[r]);delete t.g[e],t.h--}}this.I=null},Oh.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fh=bu.JSON.stringify;function Mh(){var e=Gh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vh,Uh=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=jh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),jh=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new qh},function(e){return e.reset()}),qh=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Bh(e){bu.setTimeout(function(){throw e},0)}function zh(e,t){Vh||function(){var e=bu.Promise.resolve(void 0);Vh=function(){e.then($h)}}(),Hh||(Vh(),Hh=!0),Gh.add(e,t)}var Hh=!1,Gh=new Uh;function $h(){for(var e;e=Mh();){try{e.h.call(e.g)}catch(n){Bh(n)}var t=jh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hh=!1}function Zh(e,t){Oh.call(this),this.h=e||1,this.g=t||bu,this.j=Au(this.kb,this),this.l=Date.now()}function Wh(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Kh(e,t,n){if("function"==typeof e)n&&(e=Au(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Au(e.handleEvent,e)}return 2147483647<Number(t)?-1:bu.setTimeout(e,t||0)}function Yh(e){e.g=Kh(function(){e.g=null,e.i&&(e.i=!1,Yh(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Nu(Zh,Oh),(_u=Zh.prototype).da=!1,_u.S=null,_u.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Dh(this,"tick"),this.da&&(Wh(this),this.start()))}},_u.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_u.M=function(){Zh.Z.M.call(this),Wh(this),delete this.g};var Qh=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}gu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Yh(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(bu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Pu);function Jh(e){Pu.call(this),this.h=e,this.g={}}Nu(Jh,Pu);var Xh=[];function ed(e,t,n,r){Array.isArray(n)||(n&&(Xh[0]=n.toString()),n=Xh);for(var i=0;i<n.length;i++){var s=Ch(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function td(e){Gu(e.g,function(e,t){this.g.hasOwnProperty(t)&&kh(e)},e),e.g={}}function nd(){this.g=!0}function rd(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Fh(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Jh.prototype.M=function(){Jh.Z.M.call(this),td(this)},Jh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nd.prototype.Aa=function(){this.g=!1},nd.prototype.info=function(){};var id={},sd=null;function od(){return sd=sd||new Oh}function ad(e){hh.call(this,id.Ma,e)}function ld(e){var t=od();Dh(t,new ad(t,e))}function cd(e,t){hh.call(this,id.STAT_EVENT,e),this.stat=t}function ud(e){var t=od();Dh(t,new cd(t,e))}function hd(e,t){hh.call(this,id.Na,e),this.size=t}function dd(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return bu.setTimeout(function(){e()},t)}id.Ma="serverreachability",Nu(ad,hh),id.STAT_EVENT="statevent",Nu(cd,hh),id.Na="timingevent",Nu(hd,hh);var pd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function md(){}function gd(){}md.prototype.h=null;var yd,_d={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vd(){hh.call(this,"d")}function wd(){hh.call(this,"c")}function bd(){}function Ed(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Jh(this),this.P=Sd,this.W=new Zh(e=th?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Cd}function Cd(){this.i=null,this.g="",this.h=!1}Nu(vd,hh),Nu(wd,hh),Nu(bd,md),bd.prototype.g=function(){return new XMLHttpRequest},bd.prototype.i=function(){return{}},yd=new bd;var Sd=45e3,Td={},Id={};function kd(e,t,n){e.K=1,e.v=Yd(Hd(t)),e.s=n,e.U=!0,xd(e,null)}function xd(e,t){e.F=Date.now(),Pd(e),e.A=Hd(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),cp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Cd,e.g=hf(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Qh(Au(e.Ia,e,e.g),e.O)),ed(e.V,e.g,"readystatechange",e.gb),t=e.H?$u(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ld(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ad(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Rd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Nd(e,n))==Id){4==t&&(e.o=4,ud(14),i=!1),rd(e.j,e.m,null,"[Incomplete Response]");break}if(r==Td){e.o=4,ud(15),rd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}rd(e.j,e.m,r,null),Md(e,r)}Ad(e)&&r!=Id&&r!=Td&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ud(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),nf(t),t.L=!0,ud(11))):(rd(e.j,e.m,n,"[Invalid Chunked Response]"),Fd(e),Ld(e))}function Nd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Id:(n=Number(t.substring(n,r)),isNaN(n)?Td:(r+=1)+n>t.length?Id:(t=t.substr(r,n),e.C=r+n,t))}function Pd(e){e.Y=Date.now()+e.P,Od(e,e.P)}function Od(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=dd(Au(e.eb,e),t)}function Dd(e){e.B&&(bu.clearTimeout(e.B),e.B=null)}function Ld(e){0==e.l.G||e.I||of(e.l,e)}function Fd(e){Dd(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Wh(e.W),td(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Md(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||gp(n.i,e)))if(n.I=e.N,!e.J&&gp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sf(n),Zp(n)}tf(n),ud(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=dd(Au(n.ab,n),6e3));if(1>=mp(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else lf(n,11)}else if((e.J||n.g==e)&&sf(n),!Vu(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var l=s[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var u=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=r.i;!h.g&&(qu(u,"spdy")||qu(u,"quic")||qu(u,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(yp(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Kd(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=e;if((r=n).oa=uf(r,r.H?r.la:null,r.W),p.J){_p(r.i,p);var f=p,m=r.K;m&&f.setTimeout(m),f.B&&(Dd(f),Pd(f)),r.g=p}else ef(r);0<n.l.length&&Yp(n)}else"stop"!=s[0]&&"close"!=s[0]||lf(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?lf(n,7):$p(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}ld(4)}catch(s){}}function Vd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Cu(e)||"string"==typeof e)Lu(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Cu(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Cu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Ud(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ud)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function jd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];qd(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)qd(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function qd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(_u=Ed.prototype).setTimeout=function(e){this.P=e},_u.gb=function(e){e=e.target;var t=this.L;t&&3==qp(e)?t.l():this.Ia(e)},_u.Ia=function(e){try{if(e==this.g)e:{var t=qp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||th||this.g&&(this.h.h||this.g.ga()||Bp(this.g)))){this.I||4!=t||7==n||ld(8==n||0>=r?3:2),Dd(this);var i=this.g.ba();this.N=i;t:if(Ad(this)){var s=Bp(this.g);e="";var o=s.length,a=4==qp(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fd(this),Ld(this);var l="";break t}this.h.i=new bu.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vu(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,ud(12),Fd(this),Ld(this);break e}rd(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Md(this,i)}this.U?(Rd(this,t,l),th&&this.i&&3==t&&(ed(this.V,this.W,"tick",this.fb),this.W.start())):(rd(this.j,this.m,l,null),Md(this,l)),4==t&&Fd(this),this.i&&!this.I&&(4==t?of(this.l,this):(this.i=!1,Pd(this)))}else 400==i&&0<l.indexOf("Unknown SID")?(this.o=3,ud(12)):(this.o=0,ud(13)),Fd(this),Ld(this)}}}catch(t){}},_u.fb=function(){if(this.g){var e=qp(this.g),t=this.g.ga();this.C<t.length&&(Dd(this),Rd(this,e,t),this.i&&4!=e&&Pd(this))}},_u.cancel=function(){this.I=!0,Fd(this)},_u.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(ld(3),ud(17)),Fd(this),this.o=2,Ld(this)):Od(this,this.Y-e)},(_u=Ud.prototype).R=function(){jd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},_u.T=function(){return jd(this),this.g.concat()},_u.get=function(e,t){return qd(this.h,e)?this.h[e]:t},_u.set=function(e,t){qd(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},_u.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Bd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zd(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof zd){this.g=void 0!==t?t:e.g,Gd(this,e.j),this.s=e.s,$d(this,e.i),Zd(this,e.m),this.l=e.l,t=e.h;var n=new sp;n.i=t.i,t.g&&(n.g=new Ud(t.g),n.h=t.h),Wd(this,n),this.o=e.o}else e&&(n=String(e).match(Bd))?(this.g=!!t,Gd(this,n[1]||"",!0),this.s=Qd(n[2]||""),$d(this,n[3]||"",!0),Zd(this,n[4]),this.l=Qd(n[5]||"",!0),Wd(this,n[6]||"",!0),this.o=Qd(n[7]||"")):(this.g=!!t,this.h=new sp(null,this.g))}function Hd(e){return new zd(e)}function Gd(e,t,n){e.j=n?Qd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $d(e,t,n){e.i=n?Qd(t,!0):t}function Zd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wd(e,t,n){t instanceof sp?(e.h=t,function(e,t){t&&!e.j&&(op(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(ap(this,t),cp(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Jd(t,rp)),e.h=new sp(t,e.g))}function Kd(e,t,n){e.h.set(t,n)}function Yd(e){return Kd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Jd(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Xd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Jd(t,ep,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Jd(t,ep,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Jd(n,"/"==n.charAt(0)?np:tp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Jd(n,ip)),e.join("")};var ep=/[#\/\?@]/g,tp=/[#\?:]/g,np=/[#\?]/g,rp=/[#\?@]/g,ip=/#/g;function sp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function op(e){e.g||(e.g=new Ud,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ap(e,t){op(e),t=up(e,t),qd(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,qd((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&jd(e)))}function lp(e,t){return op(e),t=up(e,t),qd(e.g.h,t)}function cp(e,t,n){ap(e,t),0<n.length&&(e.i=null,e.g.set(up(e,t),Mu(n)),e.h+=n.length)}function up(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(_u=sp.prototype).add=function(e,t){op(this),this.i=null,e=up(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},_u.forEach=function(e,t){op(this),this.g.forEach(function(n,r){Lu(n,function(n){e.call(t,n,r,this)},this)},this)},_u.T=function(){op(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},_u.R=function(e){op(this);var t=[];if("string"==typeof e)lp(this,e)&&(t=Fu(t,this.g.get(up(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Fu(t,e[n])}return t},_u.set=function(e,t){return op(this),this.i=null,lp(this,e=up(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},_u.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},_u.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var hp=function(e,t){this.h=e,this.g=t};function dp(e){this.l=e||pp,e=bu.PerformanceNavigationTiming?0<(e=bu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(bu.g&&bu.g.Ea&&bu.g.Ea()&&bu.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pp=10;function fp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function mp(e){return e.h?1:e.g?e.g.size:0}function gp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function yp(e,t){e.g?e.g.add(t):e.h=t}function _p(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function vp(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=yu(e.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Mu(e.i)}function wp(){}function bp(){this.g=new wp}function Ep(e,t,n){var r=n||"";try{Vd(e,function(e,n){var i=e;Su(e)&&(i=Fh(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Sp(e){this.l=e.$b||null,this.j=e.ib||!1}function Tp(e,t){Oh.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ip,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dp.prototype.cancel=function(){var e,t;if(this.i=vp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=yu(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},wp.prototype.stringify=function(e){return bu.JSON.stringify(e,void 0)},wp.prototype.parse=function(e){return bu.JSON.parse(e,void 0)},Nu(Sp,md),Sp.prototype.g=function(){return new Tp(this.l,this.j)},Sp.prototype.i=function(e){return function(){return e}}({}),Nu(Tp,Oh);var Ip=0;function kp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ap(e)}function Ap(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(_u=Tp.prototype).open=function(e,t){if(this.readyState!=Ip)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ap(this)},_u.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||bu).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},_u.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xp(this)),this.readyState=Ip},_u.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ap(this)),this.g&&(this.readyState=3,Ap(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},_u.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xp(this):Ap(this),3==this.readyState&&kp(this)}},_u.Ua=function(e){this.g&&(this.response=this.responseText=e,xp(this))},_u.Ta=function(e){this.g&&(this.response=e,xp(this))},_u.ha=function(){this.g&&xp(this)},_u.setRequestHeader=function(e,t){this.v.append(e,t)},_u.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},_u.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Tp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Rp=bu.JSON.parse;function Np(e){Oh.call(this),this.headers=new Ud,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Pp,this.K=this.L=!1}Nu(Np,Oh);var Pp="",Op=/^https?$/i,Dp=["POST","PUT"];function Lp(e){return"content-type"==e.toLowerCase()}function Fp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Mp(e),Up(e)}function Mp(e){e.D||(e.D=!0,Dh(e,"complete"),Dh(e,"error"))}function Vp(e){if(e.h&&void 0!==wu&&(!e.C[1]||4!=qp(e)||2!=e.ba()))if(e.v&&4==qp(e))Kh(e.Fa,0,e);else if(Dh(e,"readystatechange"),4==qp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Bd)[1]||null;if(!s&&bu.self&&bu.self.location){var o=bu.self.location.protocol;s=o.substr(0,o.length-1)}i=!Op.test(s?s.toLowerCase():"")}t=i}if(t)Dh(e,"complete"),Dh(e,"success");else{e.m=6;try{var a=2<qp(e)?e.g.statusText:""}catch(l){a=""}e.j=a+" ["+e.ba()+"]",Mp(e)}}finally{Up(e)}}}function Up(e,t){if(e.g){jp(e);var n=e.g,r=e.C[0]?Eu:null;e.g=null,e.C=null,t||Dh(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function jp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(bu.clearTimeout(e.A),e.A=null)}function qp(e){return e.g?e.g.readyState:0}function Bp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Pp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Gu(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Kd(e,t,n))}function Hp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gp(e){this.za=0,this.l=[],this.h=new nd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hp("baseRetryDelayMs",5e3,e),this.$a=Hp("retryDelaySeedMs",1e4,e),this.Ya=Hp("forwardChannelMaxRetries",2,e),this.ra=Hp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new dp(e&&e.concurrentRequestLimit),this.Ca=new bp,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function $p(e){if(Wp(e),3==e.G){var t=e.V++,n=Hd(e.F);Kd(n,"SID",e.J),Kd(n,"RID",t),Kd(n,"TYPE","terminate"),Jp(e,n),(t=new Ed(e,e.h,t,void 0)).K=2,t.v=Yd(Hd(n)),n=!1,bu.navigator&&bu.navigator.sendBeacon&&(n=bu.navigator.sendBeacon(t.v.toString(),"")),!n&&bu.Image&&((new Image).src=t.v,n=!0),n||(t.g=hf(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pd(t)}cf(e)}function Zp(e){e.g&&(nf(e),e.g.cancel(),e.g=null)}function Wp(e){Zp(e),e.u&&(bu.clearTimeout(e.u),e.u=null),sf(e),e.i.cancel(),e.m&&("number"==typeof e.m&&bu.clearTimeout(e.m),e.m=null)}function Kp(e,t){e.l.push(new hp(e.Za++,t)),3==e.G&&Yp(e)}function Yp(e){fp(e.i)||e.m||(e.m=!0,zh(e.Ha,e),e.C=0)}function Qp(e,t){var n;n=t?t.m:e.V++;var r=Hd(e.F);Kd(r,"SID",e.J),Kd(r,"RID",n),Kd(r,"AID",e.U),Jp(e,r),e.o&&e.s&&zp(r,e.o,e.s),n=new Ed(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Xp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),yp(e.i,n),kd(n,r,t)}function Jp(e,t){e.j&&Vd({},function(e,n){Kd(t,n,e)})}function Xp(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Au(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,l=0;l<n;l++){var c=i[l].h,u=i[l].g;if(0>(c-=s))s=Math.max(0,i[l].h-100),a=!1;else try{Ep(u,o,"req"+c+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ef(e){e.g||e.u||(e.Y=1,zh(e.Ga,e),e.A=0)}function tf(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=dd(Au(e.Ga,e),af(e,e.A)),e.A++,0))}function nf(e){null!=e.B&&(bu.clearTimeout(e.B),e.B=null)}function rf(e){e.g=new Ed(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Hd(e.oa);Kd(t,"RID","rpc"),Kd(t,"SID",e.J),Kd(t,"CI",e.N?"0":"1"),Kd(t,"AID",e.U),Jp(e,t),Kd(t,"TYPE","xmlhttp"),e.o&&e.s&&zp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Yd(Hd(t)),n.s=null,n.U=!0,xd(n,e)}function sf(e){null!=e.v&&(bu.clearTimeout(e.v),e.v=null)}function of(e,t){var n=null;if(e.g==t){sf(e),nf(e),e.g=null;var r=2}else{if(!gp(e.i,t))return;n=t.D,_p(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Dh(r=od(),new hd(r,n,t,i)),Yp(e)}else ef(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(mp(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=dd(Au(e.Ha,e,t),af(e,e.C)),e.C++,0)))}(e,t)||2==r&&tf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lf(e,5);break;case 4:lf(e,10);break;case 3:lf(e,6);break;default:lf(e,2)}}function af(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function lf(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Au(e.jb,e);n||(n=new zd("//www.google.com/images/cleardot.gif"),bu.location&&"http"==bu.location.protocol||Gd(n,"https"),Yd(n)),function(e,t){var n=new nd;if(bu.Image){var r=new Image;r.onload=Ru(Cp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ru(Cp,n,r,"TestLoadImage: error",!1,t),r.onabort=Ru(Cp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ru(Cp,n,r,"TestLoadImage: timeout",!1,t),bu.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else ud(2);e.G=0,e.j&&e.j.va(t),cf(e),Wp(e)}function cf(e){e.G=0,e.I=-1,e.j&&(0==vp(e.i).length&&0==e.l.length||(e.i.i.length=0,Mu(e.l),e.l.length=0),e.j.ua())}function uf(e,t,n){var r=function(e){return e instanceof zd?Hd(e):new zd(e,void 0)}(n);if(""!=r.i)t&&$d(r,t+"."+r.i),Zd(r,r.m);else{var i=bu.location;r=function(e,t,n,r){var i=new zd(null,void 0);return e&&Gd(i,e),t&&$d(i,t),n&&Zd(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Gu(e.aa,function(e,t){Kd(r,t,e)}),n=e.sa,(t=e.D)&&n&&Kd(r,t,n),Kd(r,"VER",e.ma),Jp(e,r),r}function hf(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Np(n&&e.Ba&&!e.qa?new Sp({ib:!0}):e.qa)).L=e.H,t}function df(){}function pf(){if(Xu&&!(10<=Number(ch)))throw Error("Environmental error: no available transport.")}function ff(e,t){Oh.call(this),this.g=new Gp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Vu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vu(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new yf(this)}function mf(e){vd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gf(){wd.call(this),this.status=1}function yf(e){this.g=e}(_u=Np.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yd.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:yd),this.g.onreadystatechange=Au(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Fp(this,s)}e=n||"";var i=new Ud(this.headers);r&&Vd(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=Lp,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=bu.FormData&&e instanceof bu.FormData,!(0<=Du(Dp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jp(this),0<this.B&&((this.K=function(e){return Xu&&function(){return e=lh,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=ju(String(Yu)).split("."),n=ju("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=Bu(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||Bu(0==s[2].length,0==o[2].length)||Bu(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Au(this.pa,this)):this.A=Kh(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Fp(this,s)}},_u.pa=function(){void 0!==wu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dh(this,"timeout"),this.abort(8))},_u.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Dh(this,"complete"),Dh(this,"abort"),Up(this))},_u.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Up(this,!0)),Np.Z.M.call(this)},_u.Fa=function(){this.s||(this.F||this.v||this.l?Vp(this):this.cb())},_u.cb=function(){Vp(this)},_u.ba=function(){try{return 2<qp(this)?this.g.status:-1}catch(Qu){return-1}},_u.ga=function(){try{return this.g?this.g.responseText:""}catch(Qu){return""}},_u.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Rp(t)}},_u.Da=function(){return this.m},_u.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(_u=Gp.prototype).ma=8,_u.G=1,_u.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},_u.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ed(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Wu(n=$u(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Xp(this,t,r),Kd(i=Hd(this.F),"RID",e),Kd(i,"CVER",22),this.D&&Kd(i,"X-HTTP-Session-Id",this.D),Jp(this,i),this.o&&n&&zp(i,this.o,n),yp(this.i,t),this.Ra&&Kd(i,"TYPE","init"),this.ja?(Kd(i,"$req",r),Kd(i,"SID","null"),t.$=!0,kd(t,i,null)):kd(t,i,r),this.G=2}}else 3==this.G&&(e?Qp(this,e):0==this.l.length||fp(this.i)||Qp(this))},_u.Ga=function(){if(this.u=null,rf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=dd(Au(this.bb,this),e)}},_u.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ud(10),Zp(this),rf(this))},_u.ab=function(){null!=this.v&&(this.v=null,Zp(this),tf(this),ud(19))},_u.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ud(2)):(this.h.info("Failed to ping google.com"),ud(1))},(_u=df.prototype).xa=function(){},_u.wa=function(){},_u.va=function(){},_u.ua=function(){},_u.Oa=function(){},pf.prototype.g=function(e,t){return new ff(e,t)},Nu(ff,Oh),ff.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),zh(Au(e.hb,e,t))),ud(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=uf(e,null,e.W),Yp(e)},ff.prototype.close=function(){$p(this.g)},ff.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Kp(this.g,t)}else this.v?((t={}).__data__=Fh(e),Kp(this.g,t)):Kp(this.g,e)},ff.prototype.M=function(){this.g.j=null,delete this.j,$p(this.g),delete this.g,ff.Z.M.call(this)},Nu(mf,vd),Nu(gf,wd),Nu(yf,df),yf.prototype.xa=function(){Dh(this.g,"a")},yf.prototype.wa=function(e){Dh(this.g,new mf(e))},yf.prototype.va=function(e){Dh(this.g,new gf(e))},yf.prototype.ua=function(){Dh(this.g,"b")},pf.prototype.createWebChannel=pf.prototype.g,ff.prototype.send=ff.prototype.u,ff.prototype.open=ff.prototype.m,ff.prototype.close=ff.prototype.close,pd.NO_ERROR=0,pd.TIMEOUT=8,pd.HTTP_ERROR=6,fd.COMPLETE="complete",gd.EventType=_d,_d.OPEN="a",_d.CLOSE="b",_d.ERROR="c",_d.MESSAGE="d",Oh.prototype.listen=Oh.prototype.N,Np.prototype.listenOnce=Np.prototype.O,Np.prototype.getLastError=Np.prototype.La,Np.prototype.getLastErrorCode=Np.prototype.Da,Np.prototype.getStatus=Np.prototype.ba,Np.prototype.getResponseJson=Np.prototype.Qa,Np.prototype.getResponseText=Np.prototype.ga,Np.prototype.send=Np.prototype.ea;var _f=pd,vf=fd,wf=id,bf=Sp,Ef=gd,Cf=Np;class Sf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sf.UNAUTHENTICATED=new Sf(null),Sf.GOOGLE_CREDENTIALS=new Sf("google-credentials-uid"),Sf.FIRST_PARTY=new Sf("first-party-uid"),Sf.MOCK_USER=new Sf("mock-user");let Tf="9.0.2";const If=new fu.Yd("@firebase/firestore");function kf(){return If.logLevel}function xf(e,...t){if(If.logLevel<=fu.in.DEBUG){const n=t.map(Nf);If.debug(`Firestore (${Tf}): ${e}`,...n)}}function Af(e,...t){if(If.logLevel<=fu.in.ERROR){const n=t.map(Nf);If.error(`Firestore (${Tf}): ${e}`,...n)}}function Rf(e,...t){if(If.logLevel<=fu.in.WARN){const n=t.map(Nf);If.warn(`Firestore (${Tf}): ${e}`,...n)}}function Nf(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Pf(e="Unexpected state"){const t=`FIRESTORE (${Tf}) INTERNAL ASSERTION FAILED: `+e;throw Af(t),new Error(t)}function Of(e,t){e||Pf()}function Df(e,t){return e}const Lf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ff extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mf{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Vf{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Uf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sf.UNAUTHENTICATED))}shutdown(){}}class jf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qf{constructor(e){this.t=e,this.currentUser=Sf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Mf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mf,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,hu.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{xf("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(xf("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mf)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(xf("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Of("string"==typeof t.accessToken),new Vf(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Of(null===e||"string"==typeof e),new Sf(e)}}class Bf{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Sf.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class zf{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Bf(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Sf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Gf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Hf.T=-1;class $f{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Gf(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Zf(e,t){return e<t?-1:e>t?1:0}function Wf(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Kf(e){return e+"\0"}class Yf{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ff(Lf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ff(Lf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ff(Lf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ff(Lf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yf.fromMillis(Date.now())}static fromDate(e){return Yf.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Yf(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zf(this.nanoseconds,e.nanoseconds):Zf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qf(e)}static min(){return new Qf(new Yf(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Jf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function em(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class tm{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pf(),void 0===n?n=e.length-t:n>e.length-t&&Pf(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===tm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tm?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nm extends tm{construct(e,t,n){return new nm(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new nm(t)}static emptyPath(){return new nm([])}}const rm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class im extends tm{construct(e,t,n){return new im(e,t,n)}static isValidIdentifier(e){return rm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),im.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new im(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ff(Lf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ff(Lf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ff(Lf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new im(t)}static emptyPath(){return new im([])}}class sm{constructor(e){this.fields=e,e.sort(im.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wf(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class om{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new om(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new om(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}om.EMPTY_BYTE_STRING=new om("");const am=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lm(e){if(Of(!!e),"string"==typeof e){let t=0;const n=am.exec(e);if(Of(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cm(e.seconds),nanos:cm(e.nanos)}}function cm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function um(e){return"string"==typeof e?om.fromBase64String(e):om.fromUint8Array(e)}function hm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dm(e){const t=e.mapValue.fields.__previous_value__;return hm(t)?dm(t):t}function pm(e){const t=lm(e.mapValue.fields.__local_write_time__.timestampValue);return new Yf(t.seconds,t.nanos)}function fm(e){return null==e}function mm(e){return 0===e&&1/e==-1/0}function gm(e){return"number"==typeof e&&Number.isInteger(e)&&!mm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ym{constructor(e){this.path=e}static fromPath(e){return new ym(nm.fromString(e))}static fromName(e){return new ym(nm.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===nm.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nm.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ym(new nm(e.slice()))}}function _m(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hm(e)?4:10:Pf()}function vm(e,t){const n=_m(e);if(n!==_m(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pm(e).isEqual(pm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=lm(e.timestampValue),r=lm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return um(e.bytesValue).isEqual(um(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cm(e.geoPointValue.latitude)===cm(t.geoPointValue.latitude)&&cm(e.geoPointValue.longitude)===cm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cm(e.integerValue)===cm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=cm(e.doubleValue),r=cm(t.doubleValue);return n===r?mm(n)===mm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wf(e.arrayValue.values||[],t.arrayValue.values||[],vm);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jf(n)!==Jf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vm(n[i],r[i])))return!1;return!0}(e,t);default:return Pf()}}function wm(e,t){return void 0!==(e.values||[]).find(e=>vm(e,t))}function bm(e,t){const n=_m(e),r=_m(t);if(n!==r)return Zf(n,r);switch(n){case 0:return 0;case 1:return Zf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=cm(e.integerValue||e.doubleValue),r=cm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Em(e.timestampValue,t.timestampValue);case 4:return Em(pm(e),pm(t));case 5:return Zf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=um(e),r=um(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zf(n[i],r[i]);if(0!==e)return e}return Zf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zf(cm(e.latitude),cm(t.latitude));return 0!==n?n:Zf(cm(e.longitude),cm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=bm(n[i],r[i]);if(e)return e}return Zf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Zf(r[o],s[o]);if(0!==e)return e;const t=bm(n[r[o]],i[s[o]]);if(0!==t)return t}return Zf(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Pf()}}function Em(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zf(e,t);const n=lm(e),r=lm(t),i=Zf(n.seconds,r.seconds);return 0!==i?i:Zf(n.nanos,r.nanos)}function Cm(e){return Sm(e)}function Sm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=lm(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?um(e.bytesValue).toBase64():"referenceValue"in e?ym.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Sm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Sm(e.fields[i])}`;return n+"}"}(e.mapValue):Pf();var t}function Tm(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Im(e){return!!e&&"integerValue"in e}function km(e){return!!e&&"arrayValue"in e}function xm(e){return!!e&&"nullValue"in e}function Am(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rm(e){return!!e&&"mapValue"in e}function Nm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xf(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Nm(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nm(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Pm{constructor(e){this.value=e}static empty(){return new Pm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Rm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nm(t)}setAll(e){let t=im.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Nm(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Rm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vm(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Rm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xf(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Pm(Nm(this.value))}}function Om(e){const t=[];return Xf(e.fields,(e,n)=>{const r=new im([e]);if(Rm(n)){const e=Om(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new sm(t)}class Dm{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Dm(e,0,Qf.min(),Pm.empty(),0)}static newFoundDocument(e,t,n){return new Dm(e,1,t,n,0)}static newNoDocument(e,t){return new Dm(e,2,t,Pm.empty(),0)}static newUnknownDocument(e,t){return new Dm(e,3,t,Pm.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dm&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Dm(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lm{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Fm(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Lm(e,t,n,r,i,s,o)}function Mm(e){const t=Df(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Cm(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Ym(t.startAt)),t.endAt&&(e+="|ub:",e+=Ym(t.endAt)),t.A=e}return t.A}function Vm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Jm(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!vm(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eg(e.startAt,t.startAt)&&eg(e.endAt,t.endAt)}function Um(e){return ym.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class jm extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new qm(e,t,n):"array-contains"===t?new Gm(e,n):"in"===t?new $m(e,n):"not-in"===t?new Zm(e,n):"array-contains-any"===t?new Wm(e,n):new jm(e,t,n)}static R(e,t,n){return"in"===t?new Bm(e,n):new zm(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(bm(t,this.value)):null!==t&&_m(this.value)===_m(t)&&this.P(bm(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pf()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qm extends jm{constructor(e,t,n){super(e,t,n),this.key=ym.fromName(n.referenceValue)}matches(e){const t=ym.comparator(e.key,this.key);return this.P(t)}}class Bm extends jm{constructor(e,t){super(e,"in",t),this.keys=Hm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zm extends jm{constructor(e,t){super(e,"not-in",t),this.keys=Hm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ym.fromName(e.referenceValue))}class Gm extends jm{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return km(t)&&wm(t.arrayValue,this.value)}}class $m extends jm{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wm(this.value.arrayValue,t)}}class Zm extends jm{constructor(e,t){super(e,"not-in",t)}matches(e){if(wm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wm(this.value.arrayValue,t)}}class Wm extends jm{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!km(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>wm(this.value.arrayValue,e))}}class Km{constructor(e,t){this.position=e,this.before=t}}function Ym(e){return`${e.before?"b":"a"}:${e.position.map(e=>Cm(e)).join(",")}`}class Qm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Jm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Xm(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ym.comparator(ym.fromName(o.referenceValue),n.key):bm(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function eg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vm(e.position[n],t.position[n]))return!1;return!0}class tg{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function ng(e,t,n,r,i,s,o,a){return new tg(e,t,n,r,i,s,o,a)}function rg(e){return new tg(e)}function ig(e){return!fm(e.limit)&&"F"===e.limitType}function sg(e){return!fm(e.limit)&&"L"===e.limitType}function og(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ag(e){for(const t of e.filters)if(t.v())return t.field;return null}function lg(e){return null!==e.collectionGroup}function cg(e){const t=Df(e);if(null===t.V){t.V=[];const e=ag(t),n=og(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Qm(e)),t.V.push(new Qm(im.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Qm(im.keyField(),e))}}}return t.V}function ug(e){const t=Df(e);if(!t.S)if("F"===t.limitType)t.S=Fm(t.path,t.collectionGroup,cg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of cg(t))e.push(new Qm(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Km(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Km(t.startAt.position,!t.startAt.before):null;t.S=Fm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function hg(e,t,n){return new tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dg(e,t){return Vm(ug(e),ug(t))&&e.limitType===t.limitType}function pg(e){return`${Mm(ug(e))}|lt:${e.limitType}`}function fg(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Cm(t.value)}`;var t}).join(", ")}]`),fm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Ym(e.startAt)),e.endAt&&(t+=", endAt: "+Ym(e.endAt)),`Target(${t})`}(ug(e))}; limitType=${e.limitType})`}function mg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ym.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Xm(e.startAt,cg(e),t)||e.endAt&&Xm(e.endAt,cg(e),t))}(e,t)}function gg(e){return(t,n)=>{let r=!1;for(const i of cg(e)){const e=yg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function yg(e,t,n){const r=e.field.isKeyField()?ym.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bm(r,i):Pf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pf()}}function _g(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(t)?"-0":t}}function vg(e){return{integerValue:""+e}}function wg(e,t){return gm(t)?vg(t):_g(e,t)}class bg{constructor(){this._=void 0}}function Eg(e,t,n){return e instanceof Tg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ig?kg(e,t):e instanceof xg?Ag(e,t):function(e,t){const n=Sg(e,t),r=Ng(n)+Ng(e.C);return Im(n)&&Im(e.C)?vg(r):_g(e.N,r)}(e,t)}function Cg(e,t,n){return e instanceof Ig?kg(e,t):e instanceof xg?Ag(e,t):n}function Sg(e,t){return e instanceof Rg?Im(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Tg extends bg{}class Ig extends bg{constructor(e){super(),this.elements=e}}function kg(e,t){const n=Pg(t);for(const r of e.elements)n.some(e=>vm(e,r))||n.push(r);return{arrayValue:{values:n}}}class xg extends bg{constructor(e){super(),this.elements=e}}function Ag(e,t){let n=Pg(t);for(const r of e.elements)n=n.filter(e=>!vm(e,r));return{arrayValue:{values:n}}}class Rg extends bg{constructor(e,t){super(),this.N=e,this.C=t}}function Ng(e){return cm(e.integerValue||e.doubleValue)}function Pg(e){return km(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Og{constructor(e,t){this.field=e,this.transform=t}}class Dg{constructor(e,t){this.version=e,this.transformResults=t}}class Lg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lg}static exists(e){return new Lg(void 0,e)}static updateTime(e){return new Lg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mg{}function Vg(e,t,n){e instanceof zg?function(e,t,n){const r=e.value.clone(),i=$g(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hg?function(e,t,n){if(!Fg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$g(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ug(e,t,n){e instanceof zg?function(e,t,n){if(!Fg(e.precondition,t))return;const r=e.value.clone(),i=Zg(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Bg(t),r).setHasLocalMutations()}(e,t,n):e instanceof Hg?function(e,t,n){if(!Fg(e.precondition,t))return;const r=Zg(e.fieldTransforms,n,t),i=t.data;i.setAll(Gg(e)),i.setAll(r),t.convertToFoundDocument(Bg(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Fg(e.precondition,t)&&t.convertToNoDocument(Qf.min())}(e,t)}function jg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Sg(r.transform,e||null);null!=i&&(null==n&&(n=Pm.empty()),n.set(r.field,i))}return n||null}function qg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wf(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ig&&t instanceof Ig||e instanceof xg&&t instanceof xg?Wf(e.elements,t.elements,vm):e instanceof Rg&&t instanceof Rg?vm(e.C,t.C):e instanceof Tg&&t instanceof Tg}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Bg(e){return e.isFoundDocument()?e.version:Qf.min()}class zg extends Mg{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Hg extends Mg{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Gg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function $g(e,t,n){const r=new Map;Of(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Cg(o,a,n[i]))}return r}function Zg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Eg(e,s,t))}return r}class Wg extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Kg extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Yg{constructor(e){this.count=e}}var Qg,Jg;function Xg(e){switch(e){case Lf.OK:return Pf();case Lf.CANCELLED:case Lf.UNKNOWN:case Lf.DEADLINE_EXCEEDED:case Lf.RESOURCE_EXHAUSTED:case Lf.INTERNAL:case Lf.UNAVAILABLE:case Lf.UNAUTHENTICATED:return!1;case Lf.INVALID_ARGUMENT:case Lf.NOT_FOUND:case Lf.ALREADY_EXISTS:case Lf.PERMISSION_DENIED:case Lf.FAILED_PRECONDITION:case Lf.ABORTED:case Lf.OUT_OF_RANGE:case Lf.UNIMPLEMENTED:case Lf.DATA_LOSS:return!0;default:return Pf()}}function ey(e){if(void 0===e)return Af("GRPC error has no .code"),Lf.UNKNOWN;switch(e){case Qg.OK:return Lf.OK;case Qg.CANCELLED:return Lf.CANCELLED;case Qg.UNKNOWN:return Lf.UNKNOWN;case Qg.DEADLINE_EXCEEDED:return Lf.DEADLINE_EXCEEDED;case Qg.RESOURCE_EXHAUSTED:return Lf.RESOURCE_EXHAUSTED;case Qg.INTERNAL:return Lf.INTERNAL;case Qg.UNAVAILABLE:return Lf.UNAVAILABLE;case Qg.UNAUTHENTICATED:return Lf.UNAUTHENTICATED;case Qg.INVALID_ARGUMENT:return Lf.INVALID_ARGUMENT;case Qg.NOT_FOUND:return Lf.NOT_FOUND;case Qg.ALREADY_EXISTS:return Lf.ALREADY_EXISTS;case Qg.PERMISSION_DENIED:return Lf.PERMISSION_DENIED;case Qg.FAILED_PRECONDITION:return Lf.FAILED_PRECONDITION;case Qg.ABORTED:return Lf.ABORTED;case Qg.OUT_OF_RANGE:return Lf.OUT_OF_RANGE;case Qg.UNIMPLEMENTED:return Lf.UNIMPLEMENTED;case Qg.DATA_LOSS:return Lf.DATA_LOSS;default:return Pf()}}(Jg=Qg||(Qg={}))[Jg.OK=0]="OK",Jg[Jg.CANCELLED=1]="CANCELLED",Jg[Jg.UNKNOWN=2]="UNKNOWN",Jg[Jg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jg[Jg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jg[Jg.NOT_FOUND=5]="NOT_FOUND",Jg[Jg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jg[Jg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jg[Jg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jg[Jg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jg[Jg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jg[Jg.ABORTED=10]="ABORTED",Jg[Jg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jg[Jg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jg[Jg.INTERNAL=13]="INTERNAL",Jg[Jg.UNAVAILABLE=14]="UNAVAILABLE",Jg[Jg.DATA_LOSS=15]="DATA_LOSS";class ty{constructor(e,t){this.comparator=e,this.root=t||ry.EMPTY}insert(e,t){return new ty(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ry.BLACK,null,null))}remove(e){return new ty(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ry.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ny(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ny(this.root,e,this.comparator,!1)}getReverseIterator(){return new ny(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ny(this.root,e,this.comparator,!0)}}class ny{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ry{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ry.RED,this.left=null!=r?r:ry.EMPTY,this.right=null!=i?i:ry.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ry(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ry.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ry.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ry.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ry.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pf();if(this.right.isRed())throw Pf();const e=this.left.check();if(e!==this.right.check())throw Pf();return e+(this.isRed()?0:1)}}ry.EMPTY=null,ry.RED=!0,ry.BLACK=!1,ry.EMPTY=new class{constructor(){this.size=0}get key(){throw Pf()}get value(){throw Pf()}get color(){throw Pf()}get left(){throw Pf()}get right(){throw Pf()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ry(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class iy{constructor(e){this.comparator=e,this.data=new ty(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sy(this.data.getIterator())}getIteratorFrom(e){return new sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof iy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new iy(this.comparator);return t.data=e,t}}class sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const oy=new ty(ym.comparator);function ay(){return oy}const ly=new ty(ym.comparator);function cy(){return ly}const uy=new ty(ym.comparator);function hy(){return uy}const dy=new iy(ym.comparator);function py(...e){let t=dy;for(const n of e)t=t.add(n);return t}const fy=new iy(Zf);function my(){return fy}class gy{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,yy.createSynthesizedTargetChangeForCurrentChange(e,t)),new gy(Qf.min(),n,my(),ay(),py())}}class yy{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new yy(om.EMPTY_BYTE_STRING,t,py(),py(),py())}}class _y{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class vy{constructor(e,t){this.targetId=e,this.O=t}}class wy{constructor(e,t,n=om.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class by{constructor(){this.F=0,this.M=Sy(),this.L=om.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=py(),t=py(),n=py();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Pf()}}),new yy(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Sy()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Ey{constructor(e){this.tt=e,this.et=new Map,this.nt=ay(),this.st=Cy(),this.it=new iy(Zf)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Pf()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Um(e))if(0===n){const n=new ym(e.path);this.at(t,n,Dm.newNoDocument(n,Qf.min()))}else Of(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Um(i.target)){const t=new ym(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,Dm.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=py();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new gy(e,t,this.it,this.nt,n);return this.nt=ay(),this.st=Cy(),this.it=new iy(Zf),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new by,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new iy(Zf),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||xf("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new by),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Cy(){return new ty(ym.comparator)}function Sy(){return new ty(ym.comparator)}const Ty={asc:"ASCENDING",desc:"DESCENDING"},Iy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ky{constructor(e,t){this.databaseId=e,this.D=t}}function xy(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ay(e,t){return e.D?t.toBase64():t.toUint8Array()}function Ry(e,t){return xy(e,t.toTimestamp())}function Ny(e){return Of(!!e),Qf.fromTimestamp(function(e){const t=lm(e);return new Yf(t.seconds,t.nanos)}(e))}function Py(e,t){return function(e){return new nm(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Oy(e){const t=nm.fromString(e);return Of(r_(t)),t}function Dy(e,t){return Py(e.databaseId,t.path)}function Ly(e,t){const n=Oy(t);if(n.get(1)!==e.databaseId.projectId)throw new Ff(Lf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ff(Lf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ym(Uy(n))}function Fy(e,t){return Py(e.databaseId,t)}function My(e){const t=Oy(e);return 4===t.length?nm.emptyPath():Uy(t)}function Vy(e){return new nm(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uy(e){return Of(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jy(e,t,n){return{name:Dy(e,t),fields:n.value.mapValue.fields}}function qy(e,t,n){const r=Ly(e,t.name),i=Ny(t.updateTime),s=new Pm({mapValue:{fields:t.fields}}),o=Dm.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function By(e,t){let n;if(t instanceof zg)n={update:jy(e,t.key,t.value)};else if(t instanceof Wg)n={delete:Dy(e,t.key)};else if(t instanceof Hg)n={update:jy(e,t.key,t.data),updateMask:n_(t.fieldMask)};else{if(!(t instanceof Kg))return Pf();n={verify:Dy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Tg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ig)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rg)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Pf()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ry(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pf()}(e,t.precondition)),n}function zy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Lg.updateTime(Ny(e.updateTime)):void 0!==e.exists?Lg.exists(e.exists):Lg.none()}(t.currentDocument):Lg.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Of("REQUEST_TIME"===t.setToServerValue),n=new Tg):"appendMissingElements"in t?n=new Ig(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new xg(t.removeAllFromArray.values||[]):"increment"in t?n=new Rg(e,t.increment):Pf();const r=im.fromServerFormat(t.fieldPath);return new Og(r,n)}(e,t)):[];if(t.update){const i=Ly(e,t.update.name),s=new Pm({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new sm((e.fieldPaths||[]).map(e=>im.fromServerFormat(e)))}(t.updateMask);return new Hg(i,s,e,n,r)}return new zg(i,s,n,r)}if(t.delete){const r=Ly(e,t.delete);return new Wg(r,n)}if(t.verify){const r=Ly(e,t.verify);return new Kg(r,n)}return Pf()}function Hy(e,t){return{documents:[Fy(e,t.path)]}}function Gy(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Fy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Am(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NAN"}};if(xm(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Am(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NOT_NAN"}};if(xm(e.value))return{unaryFilter:{field:Jy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jy(e.field),op:Qy(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Jy(e.field),direction:Yy(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||fm(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Wy(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Wy(t.endAt)),n}function $y(e){let t=My(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Of(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Zy(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Qm(Xy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fm(t)?null:t}(n.limit));let l=null;n.startAt&&(l=Ky(n.startAt));let c=null;return n.endAt&&(c=Ky(n.endAt)),ng(t,i,o,s,a,"F",l,c)}function Zy(e){return e?void 0!==e.unaryFilter?[t_(e)]:void 0!==e.fieldFilter?[e_(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Zy(e)).reduce((e,t)=>e.concat(t)):Pf():[]}function Wy(e){return{before:e.before,values:e.position}}function Ky(e){return new Km(e.values||[],!!e.before)}function Yy(e){return Ty[e]}function Qy(e){return Iy[e]}function Jy(e){return{fieldPath:e.canonicalString()}}function Xy(e){return im.fromServerFormat(e.fieldPath)}function e_(e){return jm.create(Xy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Pf()}}(e.fieldFilter.op),e.fieldFilter.value)}function t_(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xy(e.unaryFilter.field);return jm.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xy(e.unaryFilter.field);return jm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xy(e.unaryFilter.field);return jm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Xy(e.unaryFilter.field);return jm.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Pf()}}function n_(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function r_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function i_(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=o_(t)),t=s_(e.get(n),t);return o_(t)}function s_(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function o_(e){return e+"\x01\x01"}function a_(e){const t=e.length;if(Of(t>=2),2===t)return Of("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),nm.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Pf(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Pf()}s=t+2}return new nm(r)}class l_{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class c_{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}c_.store="owner",c_.key="owner";class u_{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}u_.store="mutationQueues",u_.keyPath="userId";class h_{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}h_.store="mutations",h_.keyPath="batchId",h_.userMutationsIndex="userMutationsIndex",h_.userMutationsKeyPath=["userId","batchId"];class d_{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,i_(t)]}static key(e,t,n){return[e,i_(t),n]}}d_.store="documentMutations",d_.PLACEHOLDER=new d_;class p_{constructor(e,t){this.path=e,this.readTime=t}}class f_{constructor(e,t){this.path=e,this.version=t}}class m_{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}m_.store="remoteDocuments",m_.readTimeIndex="readTimeIndex",m_.readTimeIndexPath="readTime",m_.collectionReadTimeIndex="collectionReadTimeIndex",m_.collectionReadTimeIndexPath=["parentPath","readTime"];class g_{constructor(e){this.byteSize=e}}g_.store="remoteDocumentGlobal",g_.key="remoteDocumentGlobalKey";class y_{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}y_.store="targets",y_.keyPath="targetId",y_.queryTargetsIndexName="queryTargetsIndex",y_.queryTargetsKeyPath=["canonicalId","targetId"];class __{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}__.store="targetDocuments",__.keyPath=["targetId","path"],__.documentTargetsIndex="documentTargetsIndex",__.documentTargetsKeyPath=["path","targetId"];class v_{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}v_.key="targetGlobalKey",v_.store="targetGlobal";class w_{constructor(e,t){this.collectionId=e,this.parent=t}}w_.store="collectionParents",w_.keyPath=["collectionId","parent"];class b_{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}b_.store="clientMetadata",b_.keyPath="clientId";class E_{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}E_.store="bundles",E_.keyPath="bundleId";class C_{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}C_.store="namedQueries",C_.keyPath="name";const S_=[u_.store,h_.store,d_.store,m_.store,y_.store,c_.store,v_.store,__.store,b_.store,g_.store,w_.store,E_.store,C_.store],T_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class k_{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k_((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof k_?t:k_.resolve(t)}catch(e){return k_.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):k_.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):k_.reject(t)}static resolve(e){return new k_((t,n)=>{t(e)})}static reject(e){return new k_((t,n)=>{n(e)})}static waitFor(e){return new k_((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=k_.resolve(!1);for(const n of e)t=t.next(e=>e?k_.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class x_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Mf,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new N_(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=F_(t.target.error);this.Tt.reject(new N_(e,n))}}static open(e,t,n,r){try{return new x_(t,e.transaction(r,n))}catch(e){throw new N_(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(xf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new O_(t)}}class A_{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===A_.Rt((0,mu.z$)())&&Af("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xf("SimpleDb","Removing database:",e),D_(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(A_.Pt())return!0;const e=(0,mu.z$)(),t=A_.Rt(e),n=0<t&&t<10,r=A_.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,hu.Z)(function*(){return t.db||(xf("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new N_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Ff(Lf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Ff(Lf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new N_(e,n))},i.onupgradeneeded=e=>{xf("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{xf("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,hu.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=x_.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),k_.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(xf("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class R_{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return D_(this.kt.delete())}}class N_ extends Ff{constructor(e,t){super(Lf.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function P_(e){return"IndexedDbTransactionError"===e.name}class O_{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(xf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(xf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),D_(n)}add(e){return xf("SimpleDb","ADD",this.store.name,e,e),D_(this.store.add(e))}get(e){return D_(this.store.get(e)).next(t=>(void 0===t&&(t=null),xf("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xf("SimpleDb","DELETE",this.store.name,e),D_(this.store.delete(e))}count(){return xf("SimpleDb","COUNT",this.store.name),D_(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){xf("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new k_((n,r)=>{t.onerror=e=>{const t=F_(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new k_((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new R_(i),o=t(i.primaryKey,i.value,s);if(o instanceof k_){const e=o.catch(e=>(s.done(),k_.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>k_.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function D_(e){return new k_((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=F_(e.target.error);n(t)}})}let L_=!1;function F_(e){const t=A_.Rt((0,mu.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ff("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return L_||(L_=!0,setTimeout(()=>{throw e},0)),e}}return e}class M_ extends I_{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function V_(e,t){const n=Df(e);return A_.St(n.Qt,t)}class U_{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vg(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ug(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ug(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Qf.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),py())}isEqual(e){return this.batchId===e.batchId&&Wf(this.mutations,e.mutations,(e,t)=>qg(e,t))&&Wf(this.baseMutations,e.baseMutations,(e,t)=>qg(e,t))}}class j_{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Of(e.mutations.length===n.length);let r=hy();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new j_(e,t,n,r)}}class q_{constructor(e,t,n,r,i=Qf.min(),s=Qf.min(),o=om.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new q_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new q_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new q_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class B_{constructor(e){this.Wt=e}}function z_(e,t){if(t.document)return qy(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=ym.fromSegments(t.noDocument.path),n=W_(t.noDocument.readTime),r=Dm.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=ym.fromSegments(t.unknownDocument.path),n=W_(t.unknownDocument.version);return Dm.newUnknownDocument(e,n)}return Pf()}function H_(e,t,n){const r=G_(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Dy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:xy(e,t.version.toTimestamp())}}(e.Wt,t);return new m_(null,null,n,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Z_(t.version),s=t.hasCommittedMutations;return new m_(null,new p_(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Z_(t.version);return new m_(new f_(e,n),null,null,!0,r,i)}return Pf()}function G_(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $_(e){const t=new Yf(e[0],e[1]);return Qf.fromTimestamp(t)}function Z_(e){const t=e.toTimestamp();return new l_(t.seconds,t.nanoseconds)}function W_(e){const t=new Yf(e.seconds,e.nanoseconds);return Qf.fromTimestamp(t)}function K_(e,t){const n=(t.baseMutations||[]).map(t=>zy(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>zy(e.Wt,t)),i=Yf.fromMillis(t.localWriteTimeMs);return new U_(t.batchId,i,n,r)}function Y_(e){const t=W_(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?W_(e.lastLimboFreeSnapshotVersion):Qf.min();let r;var i;return void 0!==e.query.documents?(Of(1===(i=e.query).documents.length),r=ug(rg(My(i.documents[0])))):r=function(e){return ug($y(e))}(e.query),new q_(r,e.targetId,0,e.lastListenSequenceNumber,t,n,om.fromBase64String(e.resumeToken))}function Q_(e,t){const n=Z_(t.snapshotVersion),r=Z_(t.lastLimboFreeSnapshotVersion);let i;i=Um(t.target)?Hy(e.Wt,t.target):Gy(e.Wt,t.target);const s=t.resumeToken.toBase64();return new y_(t.targetId,Mm(t.target),n,s,t.sequenceNumber,r,i)}function J_(e){const t=$y({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hg(t,t.limit,"L"):t}class X_{getBundleMetadata(e,t){return ev(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:W_(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return ev(e).put({bundleId:(n=t).id,createTime:Z_(Ny(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return tv(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:J_(t.bundledQuery),readTime:W_(t.readTime)};var t})}saveNamedQuery(e,t){return tv(e).put(function(e){return{name:e.name,readTime:Z_(Ny(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ev(e){return V_(e,E_.store)}function tv(e){return V_(e,C_.store)}class nv{constructor(){this.Gt=new rv}addToCollectionParentIndex(e,t){return this.Gt.add(t),k_.resolve()}getCollectionParents(e,t){return k_.resolve(this.Gt.getEntries(t))}}class rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new iy(nm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new iy(nm.comparator)).toArray()}}class iv{constructor(){this.zt=new rv}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:i_(r)};return sv(e).put(i)}return k_.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Kf(t),""],!1,!0);return sv(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(a_(r.parent))}return n})}}function sv(e){return V_(e,w_.store)}const ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class av{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new av(e,av.DEFAULT_COLLECTION_PERCENTILE,av.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lv(e,t,n){const r=e.store(h_.store),i=e.store(d_.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(l.next(()=>{Of(1===a)}));const c=[];for(const u of n.mutations){const e=d_.key(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return k_.waitFor(s).next(()=>c)}function cv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Pf();t=e.noDocument}return JSON.stringify(t).length}av.DEFAULT_COLLECTION_PERCENTILE=10,av.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,av.DEFAULT=new av(41943040,av.DEFAULT_COLLECTION_PERCENTILE,av.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),av.DISABLED=new av(-1,0,0);class uv{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){Of(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new uv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dv(e).Kt({index:h_.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=pv(e),s=dv(e);return s.add({}).next(o=>{Of("number"==typeof o);const a=new U_(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>By(e.Wt,t)),i=n.mutations.map(t=>By(e.Wt,t));return new h_(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let u=new iy((e,t)=>Zf(e.canonicalString(),t.canonicalString()));for(const e of r){const t=d_.key(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,d_.PLACEHOLDER))}return u.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),k_.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return dv(e).get(t).next(e=>e?(Of(e.userId===this.userId),K_(this.N,e)):null)}Xt(e,t){return this.Jt[t]?k_.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return dv(e).Kt({index:h_.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(Of(t.batchId>=n),i=K_(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return dv(e).Kt({index:h_.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dv(e).Lt(h_.userMutationsIndex,t).next(e=>e.map(e=>K_(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=d_.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return pv(e).Kt({range:r},(n,r,s)=>{const[o,a,l]=n,c=a_(a);if(o===this.userId&&t.path.isEqual(c))return dv(e).get(l).next(e=>{if(!e)throw Pf();Of(e.userId===this.userId),i.push(K_(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new iy(Zf);const r=[];return t.forEach(t=>{const i=d_.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=pv(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,l=a_(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()});r.push(o)}),k_.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=d_.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new iy(Zf);return pv(e).Kt({range:s},(e,t,i)=>{const[s,a,l]=e,c=a_(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(dv(e).get(t).next(e=>{if(null===e)throw Pf();Of(e.userId===this.userId),n.push(K_(this.N,e))}))}),k_.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return lv(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),k_.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k_.resolve();const n=IDBKeyRange.lowerBound(d_.prefixForUser(this.userId)),r=[];return pv(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=a_(e[1]);r.push(t)}else n.done()}).next(()=>{Of(0===r.length)})})}containsKey(e,t){return hv(e,this.userId,t)}ee(e){return fv(e).get(this.userId).next(e=>e||new u_(this.userId,-1,""))}}function hv(e,t,n){const r=d_.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return pv(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function dv(e){return V_(e,h_.store)}function pv(e){return V_(e,d_.store)}function fv(e){return V_(e,u_.store)}class mv{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new mv(0)}static ie(){return new mv(-1)}}class gv{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new mv(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>Qf.fromTimestamp(new Yf(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yv(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(Of(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return yv(e).Kt((s,o)=>{const a=Y_(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>k_.waitFor(i)).next(()=>r)}forEachTarget(e,t){return yv(e).Kt((e,n)=>{const r=Y_(n);t(r)})}re(e){return _v(e).get(v_.key).next(e=>(Of(null!==e),e))}oe(e,t){return _v(e).put(v_.key,t)}ae(e,t){return yv(e).put(Q_(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Mm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return yv(e).Kt({range:r,index:y_.queryTargetsIndexName},(e,n,r)=>{const s=Y_(n);Vm(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=vv(e);return t.forEach(t=>{const s=i_(t.path);r.push(i.put(new __(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),k_.waitFor(r)}removeMatchingKeys(e,t,n){const r=vv(e);return k_.forEach(t,t=>{const i=i_(t.path);return k_.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=vv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=vv(e);let i=py();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=a_(e[1]),s=new ym(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=i_(t.path),r=IDBKeyRange.bound([n],[Kf(n)],!1,!0);let i=0;return vv(e).Kt({index:__.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return yv(e).get(t).next(e=>e?Y_(e):null)}}function yv(e){return V_(e,y_.store)}function _v(e){return V_(e,v_.store)}function vv(e){return V_(e,__.store)}function wv(e){return bv.apply(this,arguments)}function bv(){return(bv=(0,hu.Z)(function*(e){if(e.code!==Lf.FAILED_PRECONDITION||e.message!==T_)throw e;xf("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Ev([e,t],[n,r]){const i=Zf(e,n);return 0===i?Zf(t,r):i}class Cv{constructor(e){this.ue=e,this.buffer=new iy(Ev),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ev(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Sv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;xf("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,hu.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){P_(e)?xf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield wv(e)}yield t._e(e)}))}}class Tv{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return k_.resolve(Hf.T);const n=new Cv(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xf("LruGarbageCollector","Garbage collection skipped; disabled"),k_.resolve(ov)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(xf("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ov):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(xf("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),kf()<=fu.in.DEBUG&&xf("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),k_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Iv{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Tv(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return kv(e,n)}removeReference(e,t,n){return kv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return kv(e,t)}Ie(e,t){return function(e,t){let n=!1;return fv(e).jt(r=>hv(e,r,t).next(e=>(e&&(n=!0),k_.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),vv(e).delete([0,i_(s.path)])))});r.push(t)}}).next(()=>k_.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return kv(e,t)}Te(e,t){const n=vv(e);let r,i=Hf.T;return n.Kt({index:__.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Hf.T&&t(new ym(a_(r)),i),i=o,r=s):i=Hf.T}).next(()=>{i!==Hf.T&&t(new ym(a_(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kv(e,t){return vv(e).put(function(e,t){return new __(0,i_(e.path),t)}(t,e.currentSequenceNumber))}class xv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Xf(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return em(this.inner)}}class Av{constructor(){this.changes=new xv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Qf.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Dm.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?k_.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rv{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Ov(e).put(Dv(t),n)}removeEntry(e,t){const n=Ov(e),r=Dv(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Ov(e).get(Dv(t)).next(e=>this.Re(t,e))}be(e,t){return Ov(e).get(Dv(t)).next(e=>({document:this.Re(t,e),size:cv(e)}))}getEntries(e,t){let n=ay();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=ay(),r=new ty(ym.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,cv(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return k_.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Ov(e).Kt({range:r},(e,t,r)=>{const o=ym.fromSegments(e);for(;s&&ym.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=ay();const i=t.path.length+1,s={};if(n.isEqual(Qf.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=G_(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=m_.collectionReadTimeIndex}return Ov(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=z_(this.N,n);t.path.isPrefixOf(o.key.path)?mg(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new Nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Pv(e).get(g_.key).next(e=>(Of(!!e),e))}Ae(e,t){return Pv(e).put(g_.key,t)}Re(e,t){if(t){const e=z_(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Qf.min()))return e}return Dm.newInvalidDocument(e)}}class Nv extends Av{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new xv(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new iy((e,t)=>Zf(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=H_(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const l=cv(a);n+=l-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=H_(this.Se.N,Dm.newNoDocument(i,Qf.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),k_.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function Pv(e){return V_(e,g_.store)}function Ov(e){return V_(e,m_.store)}function Dv(e){return e.path.toArray()}class Lv{constructor(e){this.N=e}Ct(e,t,n,r){Of(n<r&&n>=0&&r<=11);const i=new x_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(c_.store)}(e),function(e){e.createObjectStore(u_.store,{keyPath:u_.keyPath}),e.createObjectStore(h_.store,{keyPath:h_.keyPath,autoIncrement:!0}).createIndex(h_.userMutationsIndex,h_.userMutationsKeyPath,{unique:!0}),e.createObjectStore(d_.store)}(e),Fv(e),function(e){e.createObjectStore(m_.store)}(e));let s=k_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(__.store),e.deleteObjectStore(y_.store),e.deleteObjectStore(v_.store)}(e),Fv(e)),s=s.next(()=>function(e){const t=e.store(v_.store),n=new v_(0,0,Qf.min().toTimestamp(),0);return t.put(v_.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(h_.store).Lt().next(n=>{e.deleteObjectStore(h_.store),e.createObjectStore(h_.store,{keyPath:h_.keyPath,autoIncrement:!0}).createIndex(h_.userMutationsIndex,h_.userMutationsKeyPath,{unique:!0});const r=t.store(h_.store),i=n.map(e=>r.put(e));return k_.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(b_.store,{keyPath:b_.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ce(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(g_.store)}(e),this.Ne(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.ke(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(m_.store);t.createIndex(m_.readTimeIndex,m_.readTimeIndexPath,{unique:!1}),t.createIndex(m_.collectionReadTimeIndex,m_.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.$e(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(E_.store,{keyPath:E_.keyPath})}(e),function(e){e.createObjectStore(C_.store,{keyPath:C_.keyPath})}(e)})),s}Ne(e){let t=0;return e.store(m_.store).Kt((e,n)=>{t+=cv(n)}).next(()=>{const n=new g_(t);return e.store(g_.store).put(g_.key,n)})}Ce(e){const t=e.store(u_.store),n=e.store(h_.store);return t.Lt().next(t=>k_.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(h_.userMutationsIndex,r).next(n=>k_.forEach(n,n=>{Of(n.userId===t.userId);const r=K_(this.N,n);return lv(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(__.store),n=e.store(m_.store);return e.store(v_.store).get(v_.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new nm(n),o=function(e){return[0,i_(e)]}(s);r.push(t.get(o).next(n=>n?k_.resolve():(n=>t.put(new __(0,i_(n),e.highestListenSequenceNumber)))(s)))}).next(()=>k_.waitFor(r))})}ke(e,t){e.createObjectStore(w_.store,{keyPath:w_.keyPath});const n=t.store(w_.store),r=new rv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:i_(r)})}};return t.store(m_.store).Kt({qt:!0},(e,t)=>{const n=new nm(e);return i(n.popLast())}).next(()=>t.store(d_.store).Kt({qt:!0},([e,t,n],r)=>{const s=a_(t);return i(s.popLast())}))}$e(e){const t=e.store(y_.store);return t.Kt((e,n)=>{const r=Y_(n),i=Q_(this.N,r);return t.put(i)})}}function Fv(e){e.createObjectStore(__.store,{keyPath:__.keyPath}).createIndex(__.documentTargetsIndex,__.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(y_.store,{keyPath:y_.keyPath}).createIndex(y_.queryTargetsIndexName,y_.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(v_.store)}const Mv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vv{constructor(e,t,n,r,i,s,o,a,l,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=l,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Vv.bt())throw new Ff(Lf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Iv(this,r),this.We=t+"main",this.N=new B_(a),this.Ge=new A_(this.We,11,new Lv(this.N)),this.ze=new gv(this.referenceDelegate,this.N),this.Ht=new iv,this.He=function(e,t){return new Rv(e,t)}(this.N,this.Ht),this.Je=new X_,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&Af("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ff(Lf.FAILED_PRECONDITION,Mv);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Hf(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,hu.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,hu.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,hu.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jv(e).put(new b_(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(P_(e))return xf("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Uv(e).get(c_.key).next(e=>k_.resolve(this.cn(e)))}un(e){return jv(e).delete(this.clientId)}hn(){var e=this;return(0,hu.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=V_(t,b_.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return k_.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?k_.resolve(!0):Uv(e).get(c_.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Ff(Lf.FAILED_PRECONDITION,Mv);return!1}}return!(!this.networkEnabled||!this.inForeground)||jv(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&xf("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,hu.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[c_.store,b_.store],t=>{const n=new M_(t,Hf.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>jv(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return uv.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return xf("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",S_,i=>(r=new M_(i,this.Le?this.Le.next():Hf.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Af(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ff(Lf.FAILED_PRECONDITION,T_);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return Uv(e).get(c_.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ff(Lf.FAILED_PRECONDITION,Mv)})}an(e){const t=new c_(this.clientId,this.allowTabSynchronization,Date.now());return Uv(e).put(c_.key,t)}static bt(){return A_.bt()}on(e){const t=Uv(e);return t.get(c_.key).next(e=>this.cn(e)?(xf("IndexedDbPersistence","Releasing primary lease."),t.delete(c_.key)):k_.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Af(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,mu.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return xf("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Af("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Af("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uv(e){return V_(e,c_.store)}function jv(e){return V_(e,b_.store)}function qv(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Bv{constructor(e,t){this.progress=e,this.Tn=t}}class zv{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return ym.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):lg(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new ym(t)).next(e=>{let t=cy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=cy();return this.Ht.getCollectionParents(e,r).next(s=>k_.forEach(s,s=>{const o=function(e,t){return new tg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Dm.newInvalidDocument(n),r=r.insert(n,i)),Ug(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{mg(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=py();for(const s of t)for(const e of s.mutations)e instanceof Hg&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Hv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=py(),r=py();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Hv(e,t.fromCache,n,r)}}class Gv{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Qf.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(ig(t)||sg(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(kf()<=fu.in.DEBUG&&xf("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fg(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new iy(gg(e));return t.forEach((t,r)=>{mg(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return kf()<=fu.in.DEBUG&&xf("QueryEngine","Using full collection scan to execute query:",fg(t)),this.On.getDocumentsMatchingQuery(e,t,Qf.min())}}class $v{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new ty(Zf),this.qn=new xv(e=>Mm(e),Vm),this.Kn=Qf.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new zv(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function Zv(e,t,n,r){return new $v(e,t,n,r)}function Wv(e,t){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,hu.Z)(function*(e,t){const n=Df(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new zv(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=py();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s})).apply(this,arguments)}function Yv(e,t){const n=Df(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=k_.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Of(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function Qv(e){const t=Df(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function Jv(e,t){const n=Df(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const l=t.resumeToken;if(l.approximateByteSize()>0){const c=a.withResumeToken(l,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,c),function(e,t,n){return Of(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,t)&&o.push(n.ze.updateTargetData(e,c))}});let a=ay();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Xv(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(Qf.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return k_.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function Xv(e,t,n,r,i){let s=py();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=ay();return n.forEach((n,o)=>{const a=e.get(n),l=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Qf.min())?(t.removeEntry(n,l),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,l),s=s.insert(n,o)):xf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function ew(e,t){const n=Df(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function tw(e,t){const n=Df(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,k_.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new q_(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function nw(e,t,n){return rw.apply(this,arguments)}function rw(){return(rw=(0,hu.Z)(function*(e,t,n){const r=Df(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!P_(e))throw e;xf("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)})).apply(this,arguments)}function iw(e,t,n){const r=Df(e);let i=Qf.min(),s=py();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Df(e),i=r.qn.get(n);return void 0!==i?k_.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,ug(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Qf.min(),n?s:py())).next(e=>({documents:e,Gn:s})))}function sw(e,t){const n=Df(e),r=Df(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function ow(e){const t=Df(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Df(e);let i=ay(),s=G_(n);const o=Ov(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:m_.readTimeIndex,range:a},(e,t)=>{const n=z_(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({Tn:i,readTime:$_(s)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function aw(){return(aw=(0,hu.Z)(function*(e){const t=Df(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Ov(e);let n=Qf.min();return t.Kt({index:m_.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=$_(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function lw(){return(lw=(0,hu.Z)(function*(e,t,n,r){const i=Df(e);let s=py(),o=ay(),a=hy();for(const u of n){const e=t.zn(u.metadata.name);u.document&&(s=s.add(e)),o=o.insert(e,t.Hn(u)),a=a.insert(e,t.Jn(u.metadata.readTime))}const l=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield tw(i,function(e){return ug(rg(nm.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Xv(e,l,o,Qf.min(),a).next(t=>(l.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function cw(e,t){return uw.apply(this,arguments)}function uw(){return(uw=(0,hu.Z)(function*(e,t,n=py()){const r=yield tw(e,ug(J_(t.bundledQuery))),i=Df(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Ny(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(om.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class hw{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return k_.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ny(n.createTime)}),k_.resolve()}getNamedQuery(e,t){return k_.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:J_(e.bundledQuery),readTime:Ny(e.readTime)}}(t)),k_.resolve()}}class dw{constructor(){this.Zn=new iy(pw.ts),this.es=new iy(pw.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new pw(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new pw(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new ym(new nm([])),n=new pw(t,e),r=new pw(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ym(new nm([])),n=new pw(t,e),r=new pw(t,e+1);let i=py();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new pw(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pw{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ym.comparator(e.key,t.key)||Zf(e.ls,t.ls)}static ns(e,t){return Zf(e.ls,t.ls)||ym.comparator(e.key,t.key)}}class fw{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new iy(pw.ts)}checkEmpty(e){return k_.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new U_(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new pw(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return k_.resolve(s)}lookupMutationBatch(e,t){return k_.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return k_.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return k_.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return k_.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pw(t,0),r=new pw(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),k_.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new iy(Zf);return t.forEach(e=>{const t=new pw(e,0),r=new pw(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),k_.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ym.isDocumentKey(i)||(i=i.child(""));const s=new pw(new ym(i),0);let o=new iy(Zf);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),k_.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Of(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return k_.forEach(t.mutations,r=>{const i=new pw(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new pw(t,0),r=this.ds.firstAfterOrEqual(n);return k_.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return k_.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class mw{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new ty(ym.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return k_.resolve(n?n.document.clone():Dm.newInvalidDocument(t))}getEntries(e,t){let n=ay();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Dm.newInvalidDocument(e))}),k_.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=ay();const i=new ym(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||mg(t,i)&&(r=r.insert(i.key,i.clone()))}return k_.resolve(r)}Es(e,t){return k_.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new gw(this)}getSize(e){return k_.resolve(this.size)}}class gw extends Av{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),k_.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class yw{constructor(e){this.persistence=e,this.Ts=new xv(e=>Mm(e),Vm),this.lastRemoteSnapshotVersion=Qf.min(),this.highestTargetId=0,this.Is=0,this.As=new dw,this.targetCount=0,this.Rs=mv.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),k_.resolve()}getLastRemoteSnapshotVersion(e){return k_.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k_.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),k_.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),k_.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new mv(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,k_.resolve()}updateTargetData(e,t){return this.ae(t),k_.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,k_.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),k_.waitFor(i).next(()=>r)}getTargetCount(e){return k_.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return k_.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),k_.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),k_.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),k_.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return k_.resolve(n)}containsKey(e,t){return k_.resolve(this.As.containsKey(t))}}class _w{constructor(e,t){this.bs={},this.Le=new Hf(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new yw(this),this.Ht=new nv,this.He=function(e,t){return new mw(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new B_(t),this.Je=new hw(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new fw(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){xf("MemoryPersistence","Starting transaction:",e);const r=new vw(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return k_.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class vw extends I_{constructor(e){super(),this.currentSequenceNumber=e}}class ww{constructor(e){this.persistence=e,this.Ds=new dw,this.Cs=null}static Ns(e){return new ww(e)}get xs(){if(this.Cs)return this.Cs;throw Pf()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),k_.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),k_.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),k_.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k_.forEach(this.xs,n=>{const r=ym.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return k_.or([()=>k_.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function bw(e,t){return`firestore_clients_${e}_${t}`}function Ew(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Cw(e,t){return`firestore_targets_${e}_${t}`}class Sw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ff(r.error.code,r.error.message))),s?new Sw(e,t,r.state,i):(Af("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ff(n.error.code,n.error.message))),i?new Tw(e,n.state,r):(Af("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=my();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=gm(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Iw(e,i):(Af("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kw{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kw(t.clientId,t.onlineState):(Af("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xw{constructor(){this.activeTargetIds=my()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Aw{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new ty(Zf),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=bw(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new xw),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,hu.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(bw(e.persistenceKey,r));if(t){const n=Iw.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Cw(this.persistenceKey,e));if(n){const r=Tw.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cw(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xf("SharedClientState","READ",e,t),t}setItem(e,t){xf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(xf("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Af("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,hu.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=Hf.T;if(null!=e)try{const n=JSON.parse(e);Of("number"==typeof n),t=n}catch(e){Af("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Hf.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new Sw(this.currentUser,e,t,n),i=Ew(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=Ew(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Cw(this.persistenceKey,e),i=new Tw(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return Iw.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return Sw.$s(new Sf(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return Tw.$s(r,t)}Xs(e){return kw.$s(e)}li(e){var t=this;return(0,hu.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);xf("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=my();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Rw{constructor(){this.yi=new xw,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new xw,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Nw{Ei(e){}shutdown(){}}class Pw{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){xf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){xf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Dw{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Lw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);xf("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(xf("RestConnection","Received: ",e),e),t=>{throw Rf("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Tf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${Ow[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new Cf;o.listenOnce(vf.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case _f.NO_ERROR:const t=o.getResponseJson();xf("Connection","XHR received:",JSON.stringify(t)),i(t);break;case _f.TIMEOUT:xf("Connection",'RPC "'+e+'" timed out'),s(new Ff(Lf.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const n=o.getStatus();if(xf("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lf).indexOf(t)>=0?t:Lf.UNKNOWN}(e.status);s(new Ff(t,e.message))}else s(new Ff(Lf.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Ff(Lf.UNAVAILABLE,"Connection failed."));break;default:Pf()}}finally{xf("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new pf,i=od(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new bf({})),this.Ui(s.initMessageHeaders,t),(0,mu.uI)()||(0,mu.b$)()||(0,mu.d)()||(0,mu.w1)()||(0,mu.Mn)()||(0,mu.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");xf("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let l=!1,c=!1;const u=new Dw({vi:e=>{c?xf("Connection","Not sending because WebChannel is closed:",e):(l||(xf("Connection","Opening WebChannel transport."),a.open(),l=!0),xf("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,Ef.EventType.OPEN,()=>{c||xf("Connection","WebChannel transport opened.")}),h(a,Ef.EventType.CLOSE,()=>{c||(c=!0,xf("Connection","WebChannel transport closed"),u.$i())}),h(a,Ef.EventType.ERROR,e=>{c||(c=!0,Rf("Connection","WebChannel transport errored:",e),u.$i(new Ff(Lf.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ef.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];Of(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){xf("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Qg[e];if(void 0!==t)return ey(t)}(e),n=i.message;void 0===t&&(t=Lf.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,u.$i(new Ff(t,n)),a.close()}else xf("Connection","WebChannel received:",n),u.Oi(n)}}),h(i,wf.STAT_EVENT,e=>{10===e.stat?xf("Connection","Detected buffering proxy"):11===e.stat&&xf("Connection","Detected no buffering proxy")}),setTimeout(()=>{u.ki()},0),u}}function Fw(){return"undefined"!=typeof window?window:null}function Mw(){return"undefined"!=typeof document?document:null}function Vw(e){return new ky(e,!0)}class Uw{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&xf("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class jw{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Uw(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,hu.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,hu.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,hu.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===Lf.RESOURCE_EXHAUSTED?(Af(t.toString()),Af("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===Lf.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new Ff(Lf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,hu.Z)(function*(){e.state=0,e.start()}))}pr(e){return xf("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(xf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qw extends jw{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(Of(void 0===t||"string"==typeof t),om.fromBase64String(t||"")):(Of(void 0===t||t instanceof Uint8Array),om.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Lf.UNKNOWN:ey(e.code);return new Ff(t,e.message||"")}(o);n=new wy(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Ly(e,r.document.name),s=Ny(r.document.updateTime),o=new Pm({mapValue:{fields:r.document.fields}}),a=Dm.newFoundDocument(i,s,o);n=new _y(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Ly(e,r.document),s=r.readTime?Ny(r.readTime):Qf.min(),o=Dm.newNoDocument(i,s);n=new _y([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Ly(e,r.document);n=new _y([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Pf();{const e=t.filter,r=new Yg(e.count||0);n=new vy(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Qf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qf.min():t.readTime?Ny(t.readTime):Qf.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Vy(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Um(r)?{documents:Hy(e,r)}:{query:Gy(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ay(e,t.resumeToken):t.snapshotVersion.compareTo(Qf.min())>0&&(n.readTime=xy(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pf()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Vy(this.N),t.removeTarget=e,this.wr(t)}}class Bw extends jw{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(Of(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(Of(void 0!==t),e.map(e=>function(e,t){let n=Ny(e.updateTime?e.updateTime:t);return n.isEqual(Qf.min())&&(n=Ny(t)),new Dg(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ny(e.commitTime);return this.listener.vr(n,t)}return Of(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Vy(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>By(this.N,e))};this.wr(t)}}class zw extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Ff(Lf.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Lf.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ff(Lf.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Lf.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ff(Lf.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class Hw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Af(t),this.$r=!1):xf("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Gw{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei(e=>{n.enqueueAndForget((0,hu.Z)(function*(){var e;nb(s)&&(xf("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,hu.Z)(function*(e){const t=Df(e);t.Kr.add(4),yield Ww(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield $w(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Wr=new Hw(n,r)}}function $w(e){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,hu.Z)(function*(e){if(nb(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function Ww(e){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,hu.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function Yw(e,t){const n=Df(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),tb(n)?eb(n):Ab(n).cr()&&Jw(n,t))}function Qw(e,t){const n=Df(e),r=Ab(n);n.qr.delete(t),r.cr()&&Xw(n,t),0===n.qr.size&&(r.cr()?r.lr():nb(n)&&n.Wr.set("Unknown"))}function Jw(e,t){e.Gr.Y(t.targetId),Ab(e).Ir(t)}function Xw(e,t){e.Gr.Y(t),Ab(e).Ar(t)}function eb(e){e.Gr=new Ey({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),Ab(e).start(),e.Wr.Or()}function tb(e){return nb(e)&&!Ab(e).ar()&&e.qr.size>0}function nb(e){return 0===Df(e).Kr.size}function rb(e){e.Gr=void 0}function ib(e){return sb.apply(this,arguments)}function sb(){return(sb=(0,hu.Z)(function*(e){e.qr.forEach((t,n)=>{Jw(e,t)})})).apply(this,arguments)}function ob(e,t){return ab.apply(this,arguments)}function ab(){return(ab=(0,hu.Z)(function*(e,t){rb(e),tb(e)?(e.Wr.Lr(t),eb(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function lb(e,t,n){return cb.apply(this,arguments)}function cb(){return(cb=(0,hu.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof wy&&2===t.state&&t.cause)try{yield(r=(0,hu.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){xf("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield ub(e,n)}else if(t instanceof _y?e.Gr.rt(t):t instanceof vy?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Qf.min()))try{const t=yield Qv(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(om.EMPTY_BYTE_STRING,n.snapshotVersion)),Xw(e,t);const r=new q_(n.target,t,1,n.sequenceNumber);Jw(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){xf("RemoteStore","Failed to raise snapshot:",t),yield ub(e,t)}var r})).apply(this,arguments)}function ub(e,t,n){return hb.apply(this,arguments)}function hb(){return(hb=(0,hu.Z)(function*(e,t,n){if(!P_(t))throw t;e.Kr.add(1),yield Ww(e),e.Wr.set("Offline"),n||(n=()=>Qv(e.localStore)),e.asyncQueue.enqueueRetryable((0,hu.Z)(function*(){xf("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield $w(e)}))})).apply(this,arguments)}function db(e,t){return t().catch(n=>ub(e,n,t))}function pb(e){return fb.apply(this,arguments)}function fb(){return(fb=(0,hu.Z)(function*(e){const t=Df(e),n=Rb(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;mb(t);)try{const e=yield ew(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,gb(t,e)}catch(e){yield ub(t,e)}yb(t)&&_b(t)})).apply(this,arguments)}function mb(e){return nb(e)&&e.Ur.length<10}function gb(e,t){e.Ur.push(t);const n=Rb(e);n.cr()&&n.br&&n.Pr(t.mutations)}function yb(e){return nb(e)&&!Rb(e).ar()&&e.Ur.length>0}function _b(e){Rb(e).start()}function vb(e){return wb.apply(this,arguments)}function wb(){return(wb=(0,hu.Z)(function*(e){Rb(e).Sr()})).apply(this,arguments)}function bb(e){return Eb.apply(this,arguments)}function Eb(){return(Eb=(0,hu.Z)(function*(e){const t=Rb(e);for(const n of e.Ur)t.Pr(n.mutations)})).apply(this,arguments)}function Cb(e,t,n){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,hu.Z)(function*(e,t,n){const r=e.Ur.shift(),i=j_.from(r,t,n);yield db(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield pb(e)})).apply(this,arguments)}function Tb(e,t){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,hu.Z)(function*(e,t){var n;t&&Rb(e).br&&(yield(n=(0,hu.Z)(function*(e,t){if(Xg(n=t.code)&&n!==Lf.ABORTED){const n=e.Ur.shift();Rb(e).hr(),yield db(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield pb(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),yb(e)&&_b(e)})).apply(this,arguments)}function kb(e,t){return xb.apply(this,arguments)}function xb(){return(xb=(0,hu.Z)(function*(e,t){const n=Df(e);t?(n.Kr.delete(2),yield $w(n)):t||(n.Kr.add(2),yield Ww(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function Ab(e){return e.zr||(e.zr=function(e,t,n){const r=Df(e);return r.Cr(),new qw(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:ib.bind(null,e),Ci:ob.bind(null,e),Tr:lb.bind(null,e)}),e.jr.push(function(){var t=(0,hu.Z)(function*(t){t?(e.zr.hr(),tb(e)?eb(e):e.Wr.set("Unknown")):(yield e.zr.stop(),rb(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function Rb(e){return e.Hr||(e.Hr=function(e,t,n){const r=Df(e);return r.Cr(),new Bw(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:vb.bind(null,e),Ci:Tb.bind(null,e),Vr:bb.bind(null,e),vr:Cb.bind(null,e)}),e.jr.push(function(){var t=(0,hu.Z)(function*(t){t?(e.Hr.hr(),yield pb(e)):(yield e.Hr.stop(),e.Ur.length>0&&(xf("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class Nb{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Nb(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ff(Lf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pb(e,t){if(Af("AsyncQueue",`${t}: ${e}`),P_(e))return new Ff(Lf.UNAVAILABLE,`${t}: ${e}`);throw e}class Ob{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ym.comparator(t.key,n.key):(e,t)=>ym.comparator(e.key,t.key),this.keyedMap=cy(),this.sortedSet=new ty(this.comparator)}static emptySet(e){return new Ob(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ob))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ob;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Db{constructor(){this.Jr=new ty(ym.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Pf():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class Lb{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Lb(e,t,Ob.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Fb{constructor(){this.Xr=void 0,this.listeners=[]}}class Mb{constructor(){this.queries=new xv(e=>pg(e),dg),this.onlineState="Unknown",this.Zr=new Set}}function Vb(e,t){return Ub.apply(this,arguments)}function Ub(){return(Ub=(0,hu.Z)(function*(e,t){const n=Df(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Fb),i)try{s.Xr=yield n.onListen(r)}catch(e){const n=Pb(e,`Initialization of query '${fg(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&Hb(n)})).apply(this,arguments)}function jb(e,t){return qb.apply(this,arguments)}function qb(){return(qb=(0,hu.Z)(function*(e,t){const n=Df(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Bb(e,t){const n=Df(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.no(i)&&(r=!0);e.Xr=i}}r&&Hb(n)}function zb(e,t,n){const r=Df(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Hb(e){e.Zr.forEach(e=>{e.next()})}class Gb{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Lb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Lb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class $b{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Zb{constructor(e){this.N=e}zn(e){return Ly(this.N,e)}Hn(e){return e.metadata.exists?qy(this.N,e.document,!1):Dm.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Ny(e)}}class Wb{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Kb(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new Zb(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||py()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,hu.Z)(function*(){const t=yield function(e,t,n,r){return lw.apply(this,arguments)}(e.localStore,new Zb(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield cw(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new Bv(Object.assign({},e.progress),t)})()}}function Kb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Yb{constructor(e){this.key=e}}class Qb{constructor(e){this.key=e}}class Jb{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=py(),this.mutatedKeys=py(),this.po=gg(e),this.Eo=new Ob(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new Db,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ig(this.query)&&r.size===this.query.limit?r.last():null,l=sg(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=mg(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.Ro(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.po(u,a)>0||l&&this.po(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),ig(this.query)||sg(this.query))for(;s.size>this.query.limit;){const e=ig(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pf()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const s=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new Lb(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Db,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=py(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new Qb(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new Yb(n))}),t}So(e){this._o=e.Gn,this.yo=py();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return Lb.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Xb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class eE{constructor(e){this.key=e,this.Co=!1}}class tE{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new xv(e=>pg(e),dg),this.ko=new Map,this.$o=new Set,this.Oo=new ty(ym.comparator),this.Fo=new Map,this.Mo=new dw,this.Lo={},this.Bo=new Map,this.Uo=mv.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function nE(e,t){return rE.apply(this,arguments)}function rE(){return(rE=(0,hu.Z)(function*(e,t){const n=$E(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=yield tw(n.localStore,ug(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield iE(n,t,r,"current"===s),n.isPrimaryClient&&Yw(n.remoteStore,e)}return i})).apply(this,arguments)}function iE(e,t,n,r){return sE.apply(this,arguments)}function sE(){return(sE=(0,hu.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(i=(0,hu.Z)(function*(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=yield iw(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return CE(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield iw(e.localStore,t,!0),s=new Jb(t,i.Gn),o=s.Io(i.documents),a=yy.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);CE(e,n,l.vo);const c=new Xb(t,n,s);return e.xo.set(t,c),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),l.snapshot})).apply(this,arguments)}function oE(e,t){return aE.apply(this,arguments)}function aE(){return(aE=(0,hu.Z)(function*(e,t){const n=Df(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter(e=>!dg(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nw(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Qw(n.remoteStore,r.targetId),bE(n,r.targetId)}).catch(wv))):(bE(n,r.targetId),yield nw(n.localStore,r.targetId,!0))})).apply(this,arguments)}function lE(){return(lE=(0,hu.Z)(function*(e,t,n){const r=ZE(e);try{const e=yield function(e,t){const n=Df(e),r=Yf.now(),i=t.reduce((e,t)=>e.add(t.key),py());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=jg(e,s.get(e.key));null!=t&&o.push(new Hg(e.key,t,Om(t.value.mapValue),Lg.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new ty(Zf)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield IE(r,e.changes),yield pb(r.remoteStore)}catch(e){const t=Pb(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function cE(e,t){return uE.apply(this,arguments)}function uE(){return(uE=(0,hu.Z)(function*(e,t){const n=Df(e);try{const e=yield Jv(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(Of(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?Of(r.Co):e.removedDocuments.size>0&&(Of(r.Co),r.Co=!1))}),yield IE(n,e,t)}catch(e){yield wv(e)}})).apply(this,arguments)}function hE(e,t,n){const r=Df(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Df(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)}),r&&Hb(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return(pE=(0,hu.Z)(function*(e,t,n){const r=Df(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new ty(ym.comparator);e=e.insert(s,Dm.newNoDocument(s,Qf.min()));const n=py().add(s),i=new gy(Qf.min(),new Map,new iy(Zf),e,n);yield cE(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),TE(r)}else yield nw(r.localStore,t,!1).then(()=>bE(r,t,n)).catch(wv)})).apply(this,arguments)}function fE(e,t){return mE.apply(this,arguments)}function mE(){return(mE=(0,hu.Z)(function*(e,t){const n=Df(e),r=t.batch.batchId;try{const e=yield Yv(n.localStore,t);wE(n,r,null),vE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield IE(n,e)}catch(e){yield wv(e)}})).apply(this,arguments)}function gE(e,t,n){return yE.apply(this,arguments)}function yE(){return(yE=(0,hu.Z)(function*(e,t,n){const r=Df(e);try{const e=yield function(e,t){const n=Df(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(Of(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);wE(r,t,n),vE(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield IE(r,e)}catch(n){yield wv(n)}})).apply(this,arguments)}function _E(){return(_E=(0,hu.Z)(function*(e,t){const n=Df(e);nb(n.remoteStore)||xf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Df(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=Pb(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function vE(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function wE(e,t,n){const r=Df(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function bE(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||EE(e,t)})}function EE(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(Qw(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),TE(e))}function CE(e,t,n){for(const r of n)r instanceof Yb?(e.Mo.addReference(r.key,t),SE(e,r)):r instanceof Qb?(xf("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||EE(e,r.key)):Pf()}function SE(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(xf("SyncEngine","New document in limbo: "+n),e.$o.add(r),TE(e))}function TE(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new ym(nm.fromString(t)),r=e.Uo.next();e.Fo.set(r,new eE(n)),e.Oo=e.Oo.insert(n,r),Yw(e.remoteStore,new q_(ug(rg(n.path)),r,2,Hf.T))}}function IE(e,t,n){return kE.apply(this,arguments)}function kE(){return(kE=(0,hu.Z)(function*(e,t,n){const r=Df(e),i=[],s=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Hv.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.No.Tr(i),yield(a=(0,hu.Z)(function*(e,t){const n=Df(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>k_.forEach(t,t=>k_.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>k_.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!P_(e))throw e;xf("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function xE(e,t){return AE.apply(this,arguments)}function AE(){return(AE=(0,hu.Z)(function*(e,t){const n=Df(e);if(!n.currentUser.isEqual(t)){xf("SyncEngine","User change. New user:",t.toKey());const e=yield Wv(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach(e=>{e.forEach(e=>{e.reject(new Ff(Lf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield IE(n,e.Wn)}})).apply(this,arguments)}function RE(e,t){const n=Df(e),r=n.Fo.get(t);if(r&&r.Co)return py().add(r.key);{let e=py();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function NE(e,t){return PE.apply(this,arguments)}function PE(){return(PE=(0,hu.Z)(function*(e,t){const n=Df(e),r=yield iw(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&CE(n,t.targetId,i.vo),i})).apply(this,arguments)}function OE(e){return DE.apply(this,arguments)}function DE(){return(DE=(0,hu.Z)(function*(e){const t=Df(e);return ow(t.localStore).then(e=>IE(t,e))})).apply(this,arguments)}function LE(e,t,n,r){return FE.apply(this,arguments)}function FE(){return(FE=(0,hu.Z)(function*(e,t,n,r){const i=Df(e),s=yield function(e,t){const n=Df(e),r=Df(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):k_.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield pb(i.remoteStore):"acknowledged"===n||"rejected"===n?(wE(i,t,r||null),vE(i,t),function(e,t){Df(Df(e).In).te(t)}(i.localStore,t)):Pf(),yield IE(i,s)):xf("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function ME(){return(ME=(0,hu.Z)(function*(e,t){const n=Df(e);if($E(n),ZE(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield VE(n,e.toArray());n.qo=!0,yield kb(n.remoteStore,!0);for(const r of t)Yw(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(bE(n,i),nw(n.localStore,i,!0))),Qw(n.remoteStore,i)}),yield t,yield VE(n,e),function(e){const t=Df(e);t.Fo.forEach((e,n)=>{Qw(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new ty(ym.comparator)}(n),n.qo=!1,yield kb(n.remoteStore,!1)}})).apply(this,arguments)}function VE(e,t,n){return UE.apply(this,arguments)}function UE(){return(UE=(0,hu.Z)(function*(e,t,n){const r=Df(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield tw(r.localStore,ug(t[0]));for(const e of t){const t=r.xo.get(e),n=yield NE(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield sw(r.localStore,o);e=yield tw(r.localStore,t),yield iE(r,jE(t),o,!1)}i.push(e)}return r.No.Tr(s),i})).apply(this,arguments)}function jE(e){return ng(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qE(e){const t=Df(e);return Df(Df(t.localStore).persistence).pn()}function BE(e,t,n,r){return zE.apply(this,arguments)}function zE(){return(zE=(0,hu.Z)(function*(e,t,n,r){const i=Df(e);if(i.qo)xf("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=yield ow(i.localStore),r=gy.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield IE(i,e,r);break}case"rejected":yield nw(i.localStore,t,!0),bE(i,t,r);break;default:Pf()}})).apply(this,arguments)}function HE(e,t,n){return GE.apply(this,arguments)}function GE(){return(GE=(0,hu.Z)(function*(e,t,n){const r=$E(e);if(r.qo){for(const e of t){if(r.ko.has(e)){xf("SyncEngine","Adding an already active target "+e);continue}const t=yield sw(r.localStore,e),n=yield tw(r.localStore,t);yield iE(r,jE(t),n.targetId,!1),Yw(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield nw(r.localStore,e,!1).then(()=>{Qw(r.remoteStore,e),bE(r,e)}).catch(wv))}})).apply(this,arguments)}function $E(e){const t=Df(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dE.bind(null,t),t.No.Tr=Bb.bind(null,t.eventManager),t.No.jo=zb.bind(null,t.eventManager),t}function ZE(e){const t=Df(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gE.bind(null,t),t}class WE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,hu.Z)(function*(){t.N=Vw(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return Zv(this.persistence,new Gv,e.initialUser,this.N)}Go(e){return new _w(ww.Ns,this.N)}Wo(e){return new Rw}terminate(){var e=this;return(0,hu.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KE extends WE{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,hu.Z)(function*(){yield t().call(n,e),yield function(e){return aw.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield ZE(n.Jo.syncEngine),yield pb(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return Zv(this.persistence,new Gv,e.initialUser,this.N)}zo(e){return new Sv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=qv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?av.withCacheSize(this.cacheSizeBytes):av.DEFAULT;return new Vv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Fw(),Mw(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new Rw}}class YE extends KE{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,hu.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof Aw&&(n.sharedClientState.syncEngine={_i:LE.bind(null,r),mi:BE.bind(null,r),gi:HE.bind(null,r),pn:qE.bind(null,r),wi:OE.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,hu.Z)(function*(e){yield function(e,t){return ME.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=Fw();if(!Aw.bt(t))throw new Ff(Lf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Aw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class QE{initialize(e,t){var n=this;return(0,hu.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>hE(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=xE.bind(null,n.syncEngine),yield kb(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mb}createDatastore(e){const t=Vw(e.databaseInfo.databaseId),n=new Lw(e.databaseInfo);return function(e,t,n){return new zw(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>hE(this.syncEngine,e,0),s=Pw.bt()?new Pw:new Nw,new Gw(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new tE(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,hu.Z)(function*(e){const t=Df(e);xf("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield Ww(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JE(e,t=10240){let n=0;return{read:()=>(0,hu.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,hu.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class XE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class eC{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Mf,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,hu.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,hu.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,hu.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const i=yield e.ia(r);return new $b(JSON.parse(i),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,hu.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,hu.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,hu.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class tC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,hu.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ff(Lf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,hu.Z)(function*(e,t){const n=Df(e),r=Vy(n.N)+"/documents",i={documents:t.map(e=>Dy(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Of(!!t.found);const n=Ly(e,t.found.name),r=Ny(t.found.updateTime),i=new Pm({mapValue:{fields:t.found.fields}});return Dm.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Of(!!t.missing),Of(!!t.readTime);const n=Ly(e,t.missing),r=Ny(t.readTime);return Dm.newNoDocument(n,r)}(e,t):Pf()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Of(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,hu.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=ym.fromPath(n);e.mutations.push(new Kg(r,e.precondition(r)))}),yield(n=(0,hu.Z)(function*(e,t){const n=Df(e),r=Vy(n.N)+"/documents",i={writes:t.map(e=>By(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pf();t=Qf.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ff(Lf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Lg.updateTime(t):Lg.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Qf.min()))throw new Ff(Lf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lg.updateTime(t)}return Lg.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nC{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Uw(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,hu.Z)(function*(){const t=new tC(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!fm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Xg(t)}return!1}}class rC{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Sf.UNAUTHENTICATED,this.clientId=$f.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,hu.Z)(function*(e){xf("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,hu.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ff(Lf.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,hu.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=Pb(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function iC(e,t){return sC.apply(this,arguments)}function sC(){return(sC=(0,hu.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),xf("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,hu.Z)(function*(e){r.isEqual(e)||(yield Wv(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function oC(e,t){return aC.apply(this,arguments)}function aC(){return(aC=(0,hu.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield lC(e);xf("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,hu.Z)(function*(e,t){const n=Df(e);n.asyncQueue.verifyOperationInProgress(),xf("RemoteStore","RemoteStore received new credentials");const r=nb(n);n.Kr.add(3),yield Ww(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield $w(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function lC(e){return cC.apply(this,arguments)}function cC(){return(cC=(0,hu.Z)(function*(e){return e.offlineComponents||(xf("FirestoreClient","Using default OfflineComponentProvider"),yield iC(e,new WE)),e.offlineComponents})).apply(this,arguments)}function uC(e){return hC.apply(this,arguments)}function hC(){return(hC=(0,hu.Z)(function*(e){return e.onlineComponents||(xf("FirestoreClient","Using default OnlineComponentProvider"),yield oC(e,new QE)),e.onlineComponents})).apply(this,arguments)}function dC(e){return lC(e).then(e=>e.persistence)}function pC(e){return lC(e).then(e=>e.localStore)}function fC(e){return uC(e).then(e=>e.remoteStore)}function mC(e){return uC(e).then(e=>e.syncEngine)}function gC(e){return yC.apply(this,arguments)}function yC(){return(yC=(0,hu.Z)(function*(e){const t=yield uC(e),n=t.eventManager;return n.onListen=nE.bind(null,t.syncEngine),n.onUnlisten=oE.bind(null,t.syncEngine),n})).apply(this,arguments)}function _C(e,t,n={}){const r=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t,n,r,i){const s=new XE({next:s=>{t.enqueueAndForget(()=>jb(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ff(Lf.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ff(Lf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Gb(rg(n.path),s,{includeMetadataChanges:!0,uo:!0});return Vb(e,o)}(yield gC(e),e.asyncQueue,t,n,r)})),r.promise}function vC(e,t,n={}){const r=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t,n,r,i){const s=new XE({next:n=>{t.enqueueAndForget(()=>jb(e,o)),n.fromCache&&"server"===r.source?i.reject(new Ff(Lf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Gb(n,s,{includeMetadataChanges:!0,uo:!0});return Vb(e,o)}(yield gC(e),e.asyncQueue,t,n,r)})),r.promise}class wC{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class bC{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof bC&&e.projectId===this.projectId&&e.database===this.database}}const EC=new Map;function CC(e,t,n){if(!n)throw new Ff(Lf.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SC(e,t,n,r){if(!0===t&&!0===r)throw new Ff(Lf.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function TC(e){if(!ym.isDocumentKey(e))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function IC(e){if(ym.isDocumentKey(e))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function kC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Pf()}function xC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ff(Lf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kC(e);throw new Ff(Lf.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function AC(e,t){if(t<=0)throw new Ff(Lf.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class RC{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ff(Lf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ff(Lf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,SC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NC{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RC({}),this._settingsFrozen=!1,e instanceof bC?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ff(Lf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bC(e.options.projectId)}(e))}get app(){if(!this._app)throw new Ff(Lf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ff(Lf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RC(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Uf;switch(e.type){case"gapi":const t=e.client;return Of(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new zf(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ff(Lf.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EC.get(e);t&&(xf("ComponentProvider","Removing Datastore"),EC.delete(e),t.terminate())}(this),Promise.resolve()}}class PC{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new DC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new PC(this.firestore,e,this._key)}}class OC{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new OC(this.firestore,e,this._query)}}class DC extends OC{constructor(e,t,n){super(e,t,rg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new PC(this.firestore,null,new ym(e))}withConverter(e){return new DC(this.firestore,e,this._path)}}function LC(e,t,...n){if(e=(0,mu.m9)(e),CC("collection","path",t),e instanceof NC){const r=nm.fromString(t,...n);return IC(r),new DC(e,null,r)}{if(!(e instanceof PC||e instanceof DC))throw new Ff(Lf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(nm.fromString(t,...n));return IC(r),new DC(e.firestore,null,r)}}function FC(e,t,...n){if(e=(0,mu.m9)(e),1===arguments.length&&(t=$f.I()),CC("doc","path",t),e instanceof NC){const r=nm.fromString(t,...n);return TC(r),new PC(e,null,new ym(r))}{if(!(e instanceof PC||e instanceof DC))throw new Ff(Lf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(nm.fromString(t,...n));return TC(r),new PC(e.firestore,e instanceof DC?e.converter:null,new ym(r))}}function MC(e,t){return e=(0,mu.m9)(e),t=(0,mu.m9)(t),(e instanceof PC||e instanceof DC)&&(t instanceof PC||t instanceof DC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function VC(e,t){return e=(0,mu.m9)(e),t=(0,mu.m9)(t),e instanceof OC&&t instanceof OC&&e.firestore===t.firestore&&dg(e._query,t._query)&&e.converter===t.converter}class UC{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Uw(this,"async_queue_retry"),this.Ea=()=>{const e=Mw();e&&xf("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Mw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Mw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new Mf;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,hu.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!P_(t))throw t;xf("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,Af("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=Nb.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&Pf()}verifyOperationInProgress(){}ba(){var e=this;return(0,hu.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function jC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class qC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class BC extends NC{constructor(e,t){super(e,t),this.type="firestore",this._queue=new UC,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||HC(this),this._firestoreClient.terminate()}}function zC(e){return e._firestoreClient||HC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function HC(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new wC(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new rC(e._credentials,e._queue,r)}function GC(e,t,n){const r=new Mf;return e.asyncQueue.enqueue((0,hu.Z)(function*(){try{yield iC(e,n),yield oC(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Lf.FAILED_PRECONDITION||e.code===Lf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function $C(e){if(e._initialized||e._terminated)throw new Ff(Lf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ZC{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ff(Lf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new im(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class WC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new WC(om.fromBase64String(e))}catch(e){throw new Ff(Lf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new WC(om.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class KC{constructor(e){this._methodName=e}}class YC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ff(Lf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ff(Lf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zf(this._lat,e._lat)||Zf(this._long,e._long)}}const QC=/^__.*__$/;class JC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hg(e,this.data,this.fieldMask,t,this.fieldTransforms):new zg(e,this.data,t,this.fieldTransforms)}}class XC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pf()}}class tS{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new tS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return bS(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(eS(this.Da)&&QC.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class nS{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Vw(e)}Ba(e,t,n,r=!1){return new tS({Da:e,methodName:t,La:n,path:im.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function rS(e){const t=e._freezeSettings(),n=Vw(e._databaseId);return new nS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iS(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);yS("Data must be an object, but it was:",o,r);const a=mS(r,o);let l,c;if(s.merge)l=new sm(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=_S(t,r,n);if(!o.contains(i))throw new Ff(Lf.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);ES(e,i)||e.push(i)}l=new sm(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new JC(new Pm(a),l,c)}class sS extends KC{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sS}}function oS(e,t,n){return new tS({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class aS extends KC{_toFieldTransform(e){return new Og(e.path,new Tg)}isEqual(e){return e instanceof aS}}class lS extends KC{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=oS(this,e,!0),n=this.Ua.map(e=>fS(e,t)),r=new Ig(n);return new Og(e.path,r)}isEqual(e){return this===e}}class cS extends KC{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=oS(this,e,!0),n=this.Ua.map(e=>fS(e,t)),r=new xg(n);return new Og(e.path,r)}isEqual(e){return this===e}}class uS extends KC{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Rg(e.N,wg(e.N,this.qa));return new Og(e.path,t)}isEqual(e){return this===e}}function hS(e,t,n,r){const i=e.Ba(1,t,n);yS("Data must be an object, but it was:",i,r);const s=[],o=Pm.empty();Xf(r,(e,r)=>{const a=wS(t,e,n);r=(0,mu.m9)(r);const l=i.$a(a);if(r instanceof sS)s.push(a);else{const e=fS(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new sm(s);return new XC(o,a,i.fieldTransforms)}function dS(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[_S(t,r,n)],l=[i];if(s.length%2!=0)throw new Ff(Lf.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(_S(t,s[d])),l.push(s[d+1]);const c=[],u=Pm.empty();for(let d=a.length-1;d>=0;--d)if(!ES(c,a[d])){const e=a[d];let t=l[d];t=(0,mu.m9)(t);const n=o.$a(e);if(t instanceof sS)c.push(e);else{const r=fS(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new sm(c);return new XC(u,h,o.fieldTransforms)}function pS(e,t,n,r=!1){return fS(n,e.Ba(r?4:3,t))}function fS(e,t){if(gS(e=(0,mu.m9)(e)))return yS("Unsupported field value:",t,e),mS(e,t);if(e instanceof KC)return function(e,t){if(!eS(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=fS(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,mu.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wg(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Yf.fromDate(e);return{timestampValue:xy(t.N,n)}}if(e instanceof Yf){const n=new Yf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xy(t.N,n)}}if(e instanceof YC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof WC)return{bytesValue:Ay(t.N,e._byteString)};if(e instanceof PC){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Py(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${kC(e)}`)}(e,t)}function mS(e,t){const n={};return em(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xf(e,(e,r)=>{const i=fS(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function gS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yf||e instanceof YC||e instanceof WC||e instanceof PC||e instanceof KC)}function yS(e,t,n){if(!gS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=kC(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}}function _S(e,t,n){if((t=(0,mu.m9)(t))instanceof ZC)return t._internalPath;if("string"==typeof t)return wS(e,t);throw bS("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const vS=new RegExp("[~\\*/\\[\\]]");function wS(e,t,n){if(t.search(vS)>=0)throw bS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ZC(...t.split("."))._internalPath}catch(r){throw bS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function bS(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ff(Lf.INVALID_ARGUMENT,a+e+l)}function ES(e,t){return e.some(e=>e.isEqual(t))}class CS{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new PC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SS extends CS{data(){return super.data()}}function TS(e,t){return"string"==typeof t?wS(e,t):t instanceof ZC?t._internalPath:t._delegate._internalPath}class IS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kS extends CS{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(TS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class xS extends kS{data(e={}){return super.data(e)}}class AS{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new IS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new xS(this._firestore,this._userDataWriter,n.key,n,new IS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ff(Lf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new xS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new IS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new xS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new IS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:RS(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pf()}}function NS(e,t){return e instanceof kS&&t instanceof kS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof AS&&t instanceof AS&&e._firestore===t._firestore&&VC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function PS(e){if(sg(e)&&0===e.explicitOrderBy.length)throw new Ff(Lf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OS{}function DS(e,...t){for(const n of t)e=n._apply(e);return e}class LS extends OS{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=rS(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){BS(o,s);const t=[];for(const n of o)t.push(qS(r,e,n));a={arrayValue:{values:t}}}else a=qS(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||BS(o,s),a=pS(n,"where",o,"in"===s||"not-in"===s);const l=jm.create(i,s,a);return function(e,t){if(t.v()){const n=ag(e);if(null!==n&&!n.isEqual(t.field))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=og(e);null!==r&&zS(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Ff(Lf.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new OC(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class FS extends OS{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ff(Lf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ff(Lf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Qm(t,n);return function(e,t){if(null===og(e)){const n=ag(e);null!==n&&zS(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new OC(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new tg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class MS extends OS{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new OC(e.firestore,e.converter,hg(e._query,this.Ga,this.za))}}class VS extends OS{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=jS(e,this.type,this.Ha,this.Ja);return new OC(e.firestore,e.converter,function(e,t){return new tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class US extends OS{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=jS(e,this.type,this.Ha,this.Ja);return new OC(e.firestore,e.converter,function(e,t){return new tg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function jS(e,t,n,r){if(n[0]=(0,mu.m9)(n[0]),n[0]instanceof CS)return function(e,t,n,r,i){if(!r)throw new Ff(Lf.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of cg(e))if(o.field.isKeyField())s.push(Tm(t,r.key));else{const e=r.data.field(o.field);if(hm(e))throw new Ff(Lf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Km(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=rS(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Ff(Lf.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!lg(e)&&-1!==s.indexOf("/"))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(nm.fromString(s));if(!ym.isDocumentKey(n))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ym(n);a.push(Tm(t,i))}else{const e=pS(n,r,s);a.push(e)}}return new Km(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function qS(e,t,n){if("string"==typeof(n=(0,mu.m9)(n))){if(""===n)throw new Ff(Lf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!lg(t)&&-1!==n.indexOf("/"))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(nm.fromString(n));if(!ym.isDocumentKey(r))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tm(e,new ym(r))}if(n instanceof PC)return Tm(e,n._key);throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${kC(n)}.`)}function BS(e,t){if(!Array.isArray(e)||0===e.length)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function zS(e,t,n){if(!n.isEqual(t))throw new Ff(Lf.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class HS{convertValue(e,t="none"){switch(_m(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(um(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pf()}}convertObject(e,t){const n={};return Xf(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new YC(cm(e.latitude),cm(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pm(e));default:return null}}convertTimestamp(e){const t=lm(e);return new Yf(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=nm.fromString(e);Of(r_(n));const r=new bC(n.get(1),n.get(3)),i=new ym(n.popFirst(5));return r.isEqual(t)||Af(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function GS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $S extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new WC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new PC(this.firestore,null,t)}}class ZS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rS(e)}set(e,t,n){this._verifyNotCommitted();const r=WS(e,this._firestore),i=GS(r.converter,t,n),s=iS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Lg.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=WS(e,this._firestore);let s;return s="string"==typeof(t=(0,mu.m9)(t))||t instanceof ZC?dS(this._dataReader,"WriteBatch.update",i._key,t,n,r):hS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Lg.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=WS(e,this._firestore);return this._mutations=this._mutations.concat(new Wg(t._key,Lg.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ff(Lf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function WS(e,t){if((e=(0,mu.m9)(e)).firestore!==t)throw new Ff(Lf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class KS extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new WC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new PC(this.firestore,null,t)}}function YS(e,t,n){e=xC(e,PC);const r=xC(e.firestore,BC),i=GS(e.converter,t,n);return XS(r,[iS(rS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Lg.none())])}function QS(e,t,n,...r){e=xC(e,PC);const i=xC(e.firestore,BC),s=rS(i);let o;return o="string"==typeof(t=(0,mu.m9)(t))||t instanceof ZC?dS(s,"updateDoc",e._key,t,n,r):hS(s,"updateDoc",e._key,t),XS(i,[o.toMutation(e._key,Lg.exists(!0))])}function JS(e,...t){var n,r,i;e=(0,mu.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||jC(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(jC(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,c,u;if(e instanceof PC)c=xC(e.firestore,BC),u=rg(e._key.path),l={next:n=>{t[o]&&t[o](eT(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=xC(e,OC);c=xC(n.firestore,BC),u=n._query;const r=new KS(c);l={next:e=>{t[o]&&t[o](new AS(c,r,n,e))},error:t[o+1],complete:t[o+2]},PS(e._query)}return function(e,t,n,r){const i=new XE(r),s=new Gb(t,i,n);return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return Vb(yield gC(e),s)})),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return jb(yield gC(e),s)}))}}(zC(c),u,a,l)}function XS(e,t){return function(e,t){const n=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t,n){return lE.apply(this,arguments)}(yield mC(e),t,n)})),n.promise}(zC(e),t)}function eT(e,t,n){const r=n.docs.get(t._key),i=new KS(e);return new kS(e,i,t._key,r,new IS(n.hasPendingWrites,n.fromCache),t.converter)}class tT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rS(e)}get(e){const t=WS(e,this._firestore),n=new $S(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Pf();const r=e[0];if(r.isFoundDocument())return new CS(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new CS(this._firestore,n,t._key,null,t.converter);throw Pf()})}set(e,t,n){const r=WS(e,this._firestore),i=GS(r.converter,t,n),s=iS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=WS(e,this._firestore);let s;return s="string"==typeof(t=(0,mu.m9)(t))||t instanceof ZC?dS(this._dataReader,"Transaction.update",i._key,t,n,r):hS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=WS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=WS(e,this._firestore),n=new KS(this._firestore);return super.get(e).then(e=>new kS(this._firestore,n,t._key,e._document,new IS(!1,!1),t.converter))}}function nT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ff("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function rT(){if("undefined"==typeof Uint8Array)throw new Ff("unimplemented","Uint8Arrays are not available in this environment.")}function iT(){if("undefined"==typeof atob)throw new Ff("unimplemented","Blobs are unavailable in Firestore in this environment.")}Tf=du.SDK_VERSION,(0,du._registerComponent)(new pu.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new BC(n,new qf(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,du.registerVersion)("@firebase/firestore","3.0.2",void 0);class sT{constructor(e){this._delegate=e}static fromBase64String(e){return iT(),new sT(WC.fromBase64String(e))}static fromUint8Array(e){return rT(),new sT(WC.fromUint8Array(e))}toBase64(){return iT(),this._delegate.toBase64()}toUint8Array(){return rT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class aT{enableIndexedDbPersistence(e,t){return function(e,t){$C(e=xC(e,BC));const n=zC(e),r=e._freezeSettings(),i=new QE;return GC(n,i,new KE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){$C(e=xC(e,BC));const t=zC(e),n=e._freezeSettings(),r=new QE;return GC(t,r,new YE(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ff(Lf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Mf;return e._queue.enqueueAndForgetEvenWhileRestricted((0,hu.Z)(function*(){try{yield(n=(0,hu.Z)(function*(e){if(!A_.bt())return Promise.resolve();const t=e+"main";yield A_.delete(t)}),function(e){return n.apply(this,arguments)})(qv(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class lT{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof bC||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Rf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=xC(e,NC))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Rf("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Sf.MOCK_USER;else{t=(0,mu.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ff(Lf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sf(s)}e._credentials=new jf(new Vf(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((0,hu.Z)(function*(){const t=yield dC(e),n=yield fC(e);return t.setNetworkEnabled(!0),function(e){const t=Df(e);return t.Kr.delete(0),$w(t)}(n)}))}(zC(xC(this._delegate,BC)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((0,hu.Z)(function*(){const t=yield dC(e),n=yield fC(e);return t.setNetworkEnabled(!1),(r=(0,hu.Z)(function*(e){const t=Df(e);t.Kr.add(0),yield Ww(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(zC(xC(this._delegate,BC)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,SC("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t){return _E.apply(this,arguments)}(yield mC(e),t)})),t.promise}(zC(xC(this._delegate,BC)))}onSnapshotsInSync(e){return t=e,function(e,t){const n=new XE(t);return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t){Df(e).Zr.add(t),t.next()}(yield gC(e),n)})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return function(e,t){Df(e).Zr.delete(t)}(yield gC(e),n)}))}}(zC(xC(this._delegate,BC)),jC(t)?t:{next:t});var t}get app(){if(!this._appCompat)throw new Ff("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ET(this,LC(this._delegate,e))}catch(t){throw fT(t,"collection()","Firestore.collection()")}}doc(e){try{return new pT(this,FC(this._delegate,e))}catch(t){throw fT(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vT(this,function(e,t){if(e=xC(e,NC),CC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ff(Lf.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new OC(e,null,function(e){return new tg(nm.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw fT(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n=t=>e(new uT(this,t)),function(e,t){const n=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){const r=yield function(e){return uC(e).then(e=>e.datastore)}(e);new nC(e.asyncQueue,r,t,n).run()})),n.promise}(zC(t=this._delegate),e=>n(new tT(t,e)));var t,n}batch(){return zC(this._delegate),new hT(new ZS(this._delegate,e=>XS(this._delegate,e)))}loadBundle(e){return function(e,t){const n=zC(e=xC(e,BC)),r=new qC;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new eC(e,t)}(function(e,t){if(e instanceof Uint8Array)return JE(e,t);if(e instanceof ArrayBuffer)return JE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Vw(t));e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){!function(e,t,n){const r=Df(e);var i;(i=(0,hu.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Df(e),r=Ny(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(Kb(r));const i=new Wb(r,e.localStore,t.N);let s=yield t.Qo();for(;s;){const e=yield i.fo(s);e&&n._updateProgress(e),s=yield t.Qo()}const o=yield i.complete();yield IE(e,o.Tn,void 0),yield function(e,t){const n=Df(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Rf("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield mC(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((0,hu.Z)(function*(){return function(e,t){const n=Df(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield pC(e),t)}))}(zC(t=xC(t,BC)),n).then(e=>e?new OC(t,null,e.query):null)).then(e=>e?new vT(this,e):null);var t,n}}class cT extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new sT(new WC(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pT.forKey(t,this.firestore,null)}}class uT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}get(e){const t=CT(e);return this._delegate.get(t).then(e=>new yT(this._firestore,new kS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=CT(e);return n?(nT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=CT(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=CT(e);return this._delegate.delete(t),this}}class hT{constructor(e){this._delegate=e}set(e,t,n){const r=CT(e);return n?(nT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=CT(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=CT(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dT{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new xS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _T(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=dT.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new dT(e,new cT(e),t),r.set(t,i)),i}}dT.INSTANCES=new WeakMap;class pT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Ff("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pT(t,new PC(t._delegate,n,new ym(e)))}static forKey(e,t,n){return new pT(t,new PC(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ET(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ET(this.firestore,LC(this._delegate,e))}catch(t){throw fT(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,mu.m9)(e))instanceof PC&&MC(this._delegate,e)}set(e,t){t=nT("DocumentReference.set",t);try{return t?YS(this._delegate,e,t):YS(this._delegate,e)}catch(n){throw fT(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?QS(this._delegate,e):QS(this._delegate,e,t,...n)}catch(r){throw fT(r,"updateDoc()","DocumentReference.update()")}}delete(){return XS(xC((e=this._delegate).firestore,BC),[new Wg(e._key,Lg.none())]);var e}onSnapshot(...e){const t=mT(e),n=gT(e,e=>new yT(this.firestore,new kS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return JS(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=xC(e,PC);const t=xC(e.firestore,BC),n=zC(t),r=new KS(t);return function(e,t){const n=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return(r=(0,hu.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Df(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ff(Lf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Pb(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield pC(e),t,n);var r})),n.promise}(n,e._key).then(n=>new kS(t,r,e._key,n,new IS(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=xC(e,PC);const t=xC(e.firestore,BC);return _C(zC(t),e._key,{source:"server"}).then(n=>eT(t,e,n))}(this._delegate):function(e){e=xC(e,PC);const t=xC(e.firestore,BC);return _C(zC(t),e._key).then(n=>eT(t,e,n))}(this._delegate),t.then(e=>new yT(this.firestore,new kS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new pT(this.firestore,this._delegate.withConverter(e?dT.getInstance(this.firestore,e):null))}}function fT(e,t,n){return e.message=e.message.replace(t,n),e}function mT(e){for(const t of e)if("object"==typeof t&&!oT(t))return t;return{}}function gT(e,t){var n,r;let i;return i=oT(e[0])?e[0]:oT(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pT(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return NS(this._delegate,e._delegate)}}class _T extends yT{data(e){const t=this._delegate.data(e);return void 0!==t||Pf(),t}}class vT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}where(e,t,n){try{return new vT(this.firestore,DS(this._delegate,function(e,t,n){const r=t,i=TS("where",e);return new LS(i,r,n)}(e,t,n)))}catch(r){throw fT(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vT(this.firestore,DS(this._delegate,function(e,t="asc"){const n=t,r=TS("orderBy",e);return new FS(r,n)}(e,t)))}catch(n){throw fT(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vT(this.firestore,DS(this._delegate,(AC("limit",t=e),new MS("limit",t,"F"))))}catch(n){throw fT(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new vT(this.firestore,DS(this._delegate,(AC("limitToLast",t=e),new MS("limitToLast",t,"L"))))}catch(n){throw fT(n,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new vT(this.firestore,DS(this._delegate,function(...e){return new VS("startAt",e,!0)}(...e)))}catch(t){throw fT(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vT(this.firestore,DS(this._delegate,function(...e){return new VS("startAfter",e,!1)}(...e)))}catch(t){throw fT(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vT(this.firestore,DS(this._delegate,function(...e){return new US("endBefore",e,!0)}(...e)))}catch(t){throw fT(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vT(this.firestore,DS(this._delegate,function(...e){return new US("endAt",e,!1)}(...e)))}catch(t){throw fT(t,"endAt()","Query.endAt()")}}isEqual(e){return VC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=xC(e,OC);const t=xC(e.firestore,BC),n=zC(t),r=new KS(t);return function(e,t){const n=new Mf;return e.asyncQueue.enqueueAndForget((0,hu.Z)(function*(){return(r=(0,hu.Z)(function*(e,t,n){try{const r=yield iw(e,t,!0),i=new Jb(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Pb(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield pC(e),t,n);var r})),n.promise}(n,e._query).then(n=>new AS(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=xC(e,OC);const t=xC(e.firestore,BC),n=zC(t),r=new KS(t);return vC(n,e._query,{source:"server"}).then(n=>new AS(t,r,e,n))}(this._delegate):function(e){e=xC(e,OC);const t=xC(e.firestore,BC),n=zC(t),r=new KS(t);return PS(e._query),vC(n,e._query).then(n=>new AS(t,r,e,n))}(this._delegate),t.then(e=>new bT(this.firestore,new AS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=mT(e),n=gT(e,e=>new bT(this.firestore,new AS(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return JS(this._delegate,t,n)}withConverter(e){return new vT(this.firestore,this._delegate.withConverter(e?dT.getInstance(this.firestore,e):null))}}class wT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _T(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vT(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _T(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new wT(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new _T(this._firestore,n))})}isEqual(e){return NS(this._delegate,e._delegate)}}class ET extends vT{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pT(this.firestore,e):null}doc(e){try{return new pT(this.firestore,void 0===e?FC(this._delegate):FC(this._delegate,e))}catch(t){throw fT(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=xC(e.firestore,BC),r=FC(e),i=GS(e.converter,t);return XS(n,[iS(rS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Lg.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new pT(this.firestore,e))}isEqual(e){return MC(this._delegate,e._delegate)}withConverter(e){return new ET(this.firestore,this._delegate.withConverter(e?dT.getInstance(this.firestore,e):null))}}function CT(e){return xC(e,PC)}class ST{constructor(...e){this._delegate=new ZC(...e)}static documentId(){return new ST(im.keyField().canonicalString())}isEqual(e){return(e=(0,mu.m9)(e))instanceof ZC&&this._delegate._internalPath.isEqual(e._internalPath)}}class TT{constructor(e){this._delegate=e}static serverTimestamp(){const e=new aS("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new TT(e)}static delete(){const e=new sS("deleteField");return e._methodName="FieldValue.delete",new TT(e)}static arrayUnion(...e){const t=function(...e){return new lS("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new TT(t)}static arrayRemove(...e){const t=function(...e){return new cS("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new TT(t)}static increment(e){const t=new uS("increment",e);return t._methodName="FieldValue.increment",new TT(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IT={Firestore:lT,GeoPoint:YC,Timestamp:Yf,Blob:sT,Transaction:uT,WriteBatch:hT,DocumentReference:pT,DocumentSnapshot:yT,Query:vT,QueryDocumentSnapshot:_T,QuerySnapshot:bT,CollectionReference:ET,FieldPath:ST,FieldValue:TT,setLogLevel:function(e){If.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var kT,xT;function AT(e,t){return t?Nt(()=>e,t):Nt(()=>e)}xT=(e,t)=>new lT(e,t,new aT),(kT=uu.Z).INTERNAL.registerComponent(new pu.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return xT(t,n)},"PUBLIC").setServiceProps(Object.assign({},IT))),kT.registerVersion("@firebase/firestore-compat","0.1.2");var RT=n(9673),NT=n(7841);const PT=new r.OlP("angularfire2.auth.use-emulator"),OT=new r.OlP("angularfire2.auth.settings"),DT=new r.OlP("angularfire2.auth.tenant-id"),LT=new r.OlP("angularfire2.auth.langugage-code"),FT=new r.OlP("angularfire2.auth.use-device-language"),MT=new r.OlP("angularfire.auth.persistence"),VT=(e,t,n,r,i,s,o,a)=>(0,lu.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))l.settings[e]=t;return a&&l.setPersistence(a),l},[n,r,i,s,o,a]);let UT=(()=>{class e{constructor(e,t,r,i,s,o,a,l,c,u,h){const d=new _e.xQ,p=(0,Ee.of)(void 0).pipe((0,gs.QV)(s.outsideAngular),Nt(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,6780)))),(0,Oe.U)(()=>(0,cu.on)(e,i,t)),(0,Oe.U)(e=>VT(e,i,o,l,c,u,a,h)),ws({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ee.of)(null);else{p.pipe(sa()).subscribe();const e=p.pipe(Nt(e=>e.getRedirectResult().then(e=>e,()=>null)),lu.iC,ws({bufferSize:1,refCount:!1})),t=p.pipe(Nt(e=>new at.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(Nt(e=>new at.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(AT(t),(0,RT.R)(s.outsideAngular),(0,gs.QV)(s.insideAngular)),this.user=e.pipe(AT(n),(0,RT.R)(s.outsideAngular),(0,gs.QV)(s.insideAngular)),this.idToken=this.user.pipe(Nt(e=>e?(0,Rt.D)(e.getIdToken()):(0,Ee.of)(null))),this.idTokenResult=this.user.pipe(Nt(e=>e?(0,Rt.D)(e.getIdTokenResult()):(0,Ee.of)(null))),this.credential=(0,St.T)(e,d,this.authState.pipe(Re(e=>!e))).pipe((0,Oe.U)(e=>(null==e?void 0:e.user)?e:null),(0,RT.R)(s.outsideAngular),(0,gs.QV)(s.insideAngular))}return(0,cu.pX)(this,p,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>d.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(cu.Dh),r.LFG(cu.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(lu.HU),r.LFG(PT,8),r.LFG(OT,8),r.LFG(DT,8),r.LFG(LT,8),r.LFG(FT,8),r.LFG(MT,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),jT=(()=>{class e{constructor(){NT.Z.registerVersion("angularfire",lu.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[UT]}),e})();function qT(e,t){return function(e,t=Ie.z){return new at.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function BT(e,t){return qT(e,t).pipe((0,Oe.U)(e=>({payload:e,type:"query"})))}function zT(e,t){return BT(e,t).pipe(At(void 0),ds(),(0,Oe.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function HT(e,t,n){return zT(e,n).pipe(jo((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return GT(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return GT(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return GT(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),qe(),(0,Oe.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function GT(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function $T(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class ZT{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=zT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Oe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(At(void 0),ds(),Re(([e,t])=>t.length>0||!e),(0,Oe.U)(([e,t])=>t),lu.iC)}auditTrail(e){return this.stateChanges(e).pipe(jo((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=$T(e);return HT(this.query,t,this.afs.schedulers.outsideAngular).pipe(lu.iC)}valueChanges(e={}){return BT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),lu.iC)}get(e){return(0,Rt.D)(this.query.get(e)).pipe(lu.iC)}add(e){return this.ref.add(e)}doc(e){return new WT(this.ref.doc(e),this.afs)}}class WT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=eI(n,t);return new ZT(r,i,this.afs)}snapshotChanges(){return function(e,t){return qT(e,t).pipe(At(void 0),ds(),(0,Oe.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(lu.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Oe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rt.D)(this.ref.get(e)).pipe(lu.iC)}}class KT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Re(e=>e.length>0),lu.iC):zT(this.query,this.afs.schedulers.outsideAngular).pipe(lu.iC)}auditTrail(e){return this.stateChanges(e).pipe(jo((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=$T(e);return HT(this.query,t,this.afs.schedulers.outsideAngular).pipe(lu.iC)}valueChanges(e={}){return BT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),lu.iC)}get(e){return(0,Rt.D)(this.query.get(e)).pipe(lu.iC)}}const YT=new r.OlP("angularfire2.enableFirestorePersistence"),QT=new r.OlP("angularfire2.firestore.persistenceSettings"),JT=new r.OlP("angularfire2.firestore.settings"),XT=new r.OlP("angularfire2.firestore.use-emulator");function eI(e,t=(e=>e)){return{query:t(e),ref:e}}let tI=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c,u,h,d,p,f,m){this.schedulers=o;const g=(0,cu.on)(e,s,t),y=l;c&&VT(g,s,u,d,p,f,h,m),[this.firestore,this.persistenceEnabled$]=(0,lu.cc)(`${g.name}.firestore`,"AngularFirestore",g.name,()=>{const e=s.runOutsideAngular(()=>g.firestore());if(r&&e.settings(r),y&&e.useEmulator(...y),n&&!M(i)){const t=()=>{try{return(0,Rt.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Ee.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,Ee.of)(!1)]},[r,y,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=eI(n,t),s=this.schedulers.ngZone.run(()=>r);return new ZT(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new KT(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new WT(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(cu.Dh),r.LFG(cu.xv,8),r.LFG(YT,8),r.LFG(JT,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(lu.HU),r.LFG(QT,8),r.LFG(XT,8),r.LFG(UT,8),r.LFG(PT,8),r.LFG(OT,8),r.LFG(DT,8),r.LFG(LT,8),r.LFG(FT,8),r.LFG(MT,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),nI=(()=>{class e{constructor(){NT.Z.registerVersion("angularfire",lu.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:YT,useValue:!0},{provide:QT,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[tI]}),e})(),rI=(()=>{class e{constructor(e){this.afs=e,this.NOME_COLECAO="users",this.colecaoUsers=e.collection(this.NOME_COLECAO)}list(){return this.colecaoUsers.valueChanges({idField:"id"})}create(e){return(0,Rt.D)(this.colecaoUsers.add(Object.assign({},e)))}delete(e){return(0,Rt.D)(this.colecaoUsers.doc(e).delete())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(tI))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var iI=n(1555);function sI(e,t){return new at.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const l=(0,Rt.D)(e[a]);let c=!1;n.add(l.subscribe({next:e=>{c||(c=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&c||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let oI=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),aI=(()=>{class e extends oI{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const lI=new r.OlP("NgValueAccessor"),cI={provide:lI,useExisting:(0,r.Gpc)(()=>hI),multi:!0},uI=new r.OlP("CompositionEventMode");let hI=(()=>{class e extends oI{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(uI,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([cI]),r.qOj]}),e})();const dI=new r.OlP("NgValidators"),pI=new r.OlP("NgAsyncValidators");function fI(e){return null!=e}function mI(e){const t=(0,r.QGY)(e)?(0,Rt.D)(e):e;return(0,r.CqO)(t),t}function gI(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function yI(e,t){return t.map(t=>t(e))}function _I(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function vI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(fI);return 0==t.length?null:function(e){return gI(yI(e,t))}}(_I(e)):null}function wI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(fI);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,es.k)(t))return sI(t,null);if((0,iI.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return sI(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return sI(e=1===e.length&&(0,es.k)(e[0])?e[0]:e,null).pipe((0,Oe.U)(e=>t(...e)))}return sI(e,null)}(yI(e,t).map(mI)).pipe((0,Oe.U)(gI))}}(_I(e)):null}function bI(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}let EI=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),CI=(()=>{class e extends EI{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class SI extends EI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class TI{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let II=(()=>{class e extends TI{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(SI,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),kI=(()=>{class e extends TI{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(CI,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function xI(e,t){RI(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&NI(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&NI(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function AI(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function RI(e,t){const n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(bI(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(bI(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();AI(t._rawValidators,i),AI(t._rawAsyncValidators,i)}function NI(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function PI(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const OI="VALID",DI="INVALID",LI="PENDING",FI="DISABLED";function MI(e){return(qI(e)?e.validators:e)||null}function VI(e){return Array.isArray(e)?vI(e):e||null}function UI(e,t){return(qI(t)?t.asyncValidators:e)||null}function jI(e){return Array.isArray(e)?wI(e):e||null}function qI(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class BI{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=VI(this._rawValidators),this._composedAsyncValidatorFn=jI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===OI}get invalid(){return this.status===DI}get pending(){return this.status==LI}get disabled(){return this.status===FI}get enabled(){return this.status!==FI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=VI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jI(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=LI,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FI,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=OI,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==OI&&this.status!==LI||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?FI:OI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=LI,this._hasOwnPendingAsyncValidator=!0;const t=mI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof HI?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof GI&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?FI:this.errors?DI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(LI)?LI:this._anyControlsHaveStatus(DI)?DI:OI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class zI extends BI{constructor(e=null,t,n){super(MI(t),UI(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class HI extends BI{constructor(e,t,n){super(MI(t),UI(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof zI?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class GI extends BI{constructor(e,t,n){super(MI(t),UI(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof zI?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const $I={provide:CI,useExisting:(0,r.Gpc)(()=>WI)},ZI=(()=>Promise.resolve(null))();let WI=(()=>{class e extends CI{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new HI({},vI(e),wI(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ZI.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),xI(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ZI.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),PI(this._directives,e)})}addFormGroup(e){ZI.then(()=>{const t=this._findContainer(e.path),n=new HI({});(function(e,t){RI(e,t)})(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ZI.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){ZI.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(dI,10),r.Y36(pI,10))},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([$I]),r.qOj]}),e})();const KI={provide:SI,useExisting:(0,r.Gpc)(()=>QI)},YI=(()=>Promise.resolve(null))();let QI=(()=>{class e extends SI{constructor(e,t,n,i){super(),this.control=new zI,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===hI?n=e:Object.getPrototypeOf(e.constructor)===aI?r=e:i=e}),i||r||n||null}(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xI(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){YI.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;YI.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(CI,9),r.Y36(dI,10),r.Y36(pI,10),r.Y36(lI,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([KI]),r.qOj,r.TTD]}),e})(),JI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),XI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const ek={provide:lI,useExisting:(0,r.Gpc)(()=>nk),multi:!0};function tk(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let nk=(()=>{class e extends aI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);const n=tk(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([ek]),r.qOj]}),e})(),rk=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(tk(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(nk,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const ik={provide:lI,useExisting:(0,r.Gpc)(()=>ok),multi:!0};function sk(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let ok=(()=>{class e extends aI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([ik]),r.qOj]}),e})(),ak=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(sk(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(sk(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(ok,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),lk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[XI]]}),e})(),ck=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[lk]}),e})(),uk=(()=>{class e{constructor(e,t,n){this.userService=e,this.currentRoute=t,this.router=n,this.user=new au}ngOnInit(){}insertUser(){this.userService.create(this.user).subscribe(e=>{this.router.navigate(["/"])})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(rI),r.Y36(gl),r.Y36(Vc))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-signup"]],decls:23,vars:4,consts:[[1,"container"],[1,"card","form-signup-card"],[1,"mb-5"],[1,"mb-3"],["for","nomeinput",1,"form-label"],["type","text","id","nomeinput","name","nome",1,"form-control",3,"ngModel","ngModelChange"],["for","logininput",1,"form-label"],["type","text","id","logininput","name","login",1,"form-control",3,"ngModel","ngModelChange"],["for","emailinput",1,"form-label"],["type","email","id","emailinput","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","senhainput",1,"form-label"],["type","password","id","senhainput","name","senha",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"form"),r.TgZ(3,"h2",2),r._uU(4,"Cadastrar Usu\xe1rio"),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"label",4),r._uU(7,"Nome"),r.qZA(),r.TgZ(8,"input",5),r.NdJ("ngModelChange",function(e){return t.user.nome=e}),r.qZA(),r.qZA(),r.TgZ(9,"div",3),r.TgZ(10,"label",6),r._uU(11,"Login"),r.qZA(),r.TgZ(12,"input",7),r.NdJ("ngModelChange",function(e){return t.user.login=e}),r.qZA(),r.qZA(),r.TgZ(13,"div",3),r.TgZ(14,"label",8),r._uU(15,"Email address"),r.qZA(),r.TgZ(16,"input",9),r.NdJ("ngModelChange",function(e){return t.user.email=e}),r.qZA(),r.qZA(),r.TgZ(17,"div",2),r.TgZ(18,"label",10),r._uU(19,"Password"),r.qZA(),r.TgZ(20,"input",11),r.NdJ("ngModelChange",function(e){return t.user.senha=e}),r.qZA(),r.qZA(),r.TgZ(21,"button",12),r.NdJ("click",function(){return t.insertUser()}),r._uU(22,"Cadastrar"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(8),r.Q6J("ngModel",t.user.nome),r.xp6(4),r.Q6J("ngModel",t.user.login),r.xp6(4),r.Q6J("ngModel",t.user.email),r.xp6(4),r.Q6J("ngModel",t.user.senha))},directives:[JI,kI,WI,hI,II,QI],styles:[".form-signup-card[_ngcontent-%COMP%]{margin:10rem auto;padding:3rem}"]}),e})();const hk=["*",[["mat-card-footer"]]],dk=["*","mat-card-footer"],pk=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],fk=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let mk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),e})(),gk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),e})(),yk=(()=>{class e{constructor(e){this._animationMode=e}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Pi,8))},e.\u0275cmp=r.Xpm({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,t){2&e&&r.ekj("_mat-animation-noopable","NoopAnimations"===t._animationMode)},exportAs:["matCard"],ngContentSelectors:dk,decls:2,vars:0,template:function(e,t){1&e&&(r.F$t(hk),r.Hsn(0),r.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),e})(),_k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:fk,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,t){1&e&&(r.F$t(pk),r.Hsn(0),r.TgZ(1,"div",0),r.Hsn(2,1),r.qZA(),r.Hsn(3,2))},encapsulation:2,changeDetection:0}),e})(),vk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[ji],ji]}),e})();function wk(e,t){if(1&e&&(r.TgZ(0,"mat-card-subtitle"),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" Email: ",e.email," ")}}function bk(e,t){if(1&e&&(r.TgZ(0,"mat-card",4),r.TgZ(1,"mat-card-header"),r.TgZ(2,"mat-card-title"),r._uU(3),r.qZA(),r.YNc(4,wk,2,1,"mat-card-subtitle",5),r.qZA(),r.TgZ(5,"button",6),r._uU(6,"VER TASKS"),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(3),r.hij(" Nome: ",e.nome," "),r.xp6(1),r.Q6J("ngIf",e.email)}}const Ek=[{path:"",component:(()=>{class e{constructor(e,t){this.usrService=e,this.roteador=t,this.users=[]}ngOnInit(){this.usrService.list().subscribe(e=>this.users=e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(rI),r.Y36(Vc))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-homepage"]],decls:5,vars:1,consts:[[1,"container"],[1,"mt-5","home_header","border","border-white","bg-warning"],[1,"cardscont"],["class","mat-card-listusr","fxFlex","20%",4,"ngFor","ngForOf"],["fxFlex","20%",1,"mat-card-listusr"],[4,"ngIf"],["mat-stroked-button","",1,"usrcardbtn"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"h1",1),r._uU(2,"Lista de Colaboradores"),r.qZA(),r.TgZ(3,"div",2),r.YNc(4,bk,7,2,"mat-card",3),r.qZA(),r.qZA()),2&e&&(r.xp6(4),r.Q6J("ngForOf",t.users))},directives:[N,yk,_k,mk,O,ko,gk],styles:[".cardscont[_ngcontent-%COMP%]{margin-top:100px;display:flex;flex-wrap:wrap;justify-content:center}.mat-card-listusr[_ngcontent-%COMP%]{width:350px;margin:5px}.usrcardbtn[_ngcontent-%COMP%]{font-size:12px}.mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mat-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:14px}.home_header[_ngcontent-%COMP%]{width:320px;background-color:red;padding:15px;text-align:center;border-radius:.3rem}"]}),e})()},{path:"signup",component:uk},{path:"login",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-login"]],decls:2,vars:0,template:function(e,t){1&e&&(r.TgZ(0,"p"),r._uU(1,"login works!"),r.qZA())},styles:[""]}),e})()},{path:"listtasks",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-listtasks"]],decls:2,vars:0,template:function(e,t){1&e&&(r.TgZ(0,"p"),r._uU(1,"listtasks works!"),r.qZA())},styles:[""]}),e})()},{path:"createtask",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-createtask"]],decls:15,vars:0,consts:[[1,"container"],[1,"card","form-createtask-card"],[1,"mb-5"],[1,"mb-3"],["for","selectusuario",1,"form-label"],["aria-label","Default select example",1,"form-select"],["value","1"],["value","2"],["value","3"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"form"),r.TgZ(3,"h2",2),r._uU(4,"Criar uma nova Task"),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"label",4),r._uU(7,"Usu\xe1rio"),r.qZA(),r.qZA(),r.TgZ(8,"select",5),r.TgZ(9,"option",6),r._uU(10,"One"),r.qZA(),r.TgZ(11,"option",7),r._uU(12,"Two"),r.qZA(),r.TgZ(13,"option",8),r._uU(14,"Three"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[JI,kI,WI,rk,ak],styles:[".form-createtask-card[_ngcontent-%COMP%]{margin:10rem auto;padding:3rem}"]}),e})()}];let Ck=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[Qc.forRoot(Ek,{relativeLinkResolution:"legacy"})],Qc]}),e})();const Sk=function(){return[""]},Tk=function(){return["/signup"]},Ik=function(){return["/createtask"]},kk=function(){return["/listtasks"]},xk=function(){return["/login"]};let Ak=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-menu"]],decls:18,vars:11,consts:[[1,"bg-primary","text-light"],[1,"container",2,"display","flex"],[2,"margin-bottom","0",3,"routerLink"],[1,"menu-header","text-light"],[1,"menu-cont"],["mat-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"]],template:function(e,t){if(1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r.TgZ(3,"div",3),r._uU(4," TRELLO SOLO "),r.qZA(),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"button",5),r._uU(7,"Op\xe7\xf5es"),r.qZA(),r.TgZ(8,"mat-menu",null,6),r.TgZ(10,"button",7),r._uU(11,"Cadastro"),r.qZA(),r.TgZ(12,"button",7),r._uU(13,"Create Task"),r.qZA(),r.TgZ(14,"button",7),r._uU(15,"List Tasks"),r.qZA(),r.TgZ(16,"button",7),r._uU(17,"Login"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.MAs(9);r.xp6(2),r.Q6J("routerLink",r.DdM(6,Sk)),r.xp6(4),r.Q6J("matMenuTriggerFor",e),r.xp6(4),r.Q6J("routerLink",r.DdM(7,Tk)),r.xp6(2),r.Q6J("routerLink",r.DdM(8,Ik)),r.xp6(2),r.Q6J("routerLink",r.DdM(9,kk)),r.xp6(2),r.Q6J("routerLink",r.DdM(10,xk))}},directives:[Uc,ko,wo,go,ho],styles:[".menu-background[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center}.menu-background[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#ffffff0d;margin:3px}.menu-background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;text-align:center;margin:0}.menu-background[_ngcontent-%COMP%]   .menu-cont[_ngcontent-%COMP%]   .mat-menu-trigger[_ngcontent-%COMP%]{width:7rem;margin:auto}.menu-background[_ngcontent-%COMP%]   .menu-cont[_ngcontent-%COMP%]   .mat-menu-trigger[_ngcontent-%COMP%]:hover{background-color:#ffffff26}.menu-cont[_ngcontent-%COMP%]{margin:auto 0 auto auto}.menu-header[_ngcontent-%COMP%]{margin:.5rem;width:10rem;cursor:pointer}"]}),e})(),Rk=(()=>{class e{constructor(){this.titulo="Trelo-Solo"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(r._UZ(0,"app-menu"),r._UZ(1,"router-outlet"))},directives:[Ak,qc],styles:["body[_ngcontent-%COMP%]{margin:0}"]}),e})();class Nk{call(e,t){return t.subscribe(new Pk(e))}}class Pk extends Ao{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let n=0;n<t&&!this.hasFirst;n++){const t=Po(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(t),this.add(t)}this.observables=null}}notifyNext(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==n){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}var Ok=n(8640);new at.y(Ok.Z);var Dk=n(377);function Lk(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),(0,Oo.n)(e,void 0).lift(new Fk(t))}class Fk{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Mk(e,this.resultSelector))}}class Mk extends Te.L{constructor(e,t,n=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,es.k)(e)?t.push(new Uk(e)):t.push("function"==typeof e[Dk.hZ]?new Vk(e[Dk.hZ]()):new jk(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let n=0;n<t;n++){let t=e[n];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,n=this.destination;for(let s=0;s<t;s++){let t=e[s];if("function"==typeof t.hasValue&&!t.hasValue())return}let r=!1;const i=[];for(let s=0;s<t;s++){let t=e[s],o=t.next();if(t.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class Vk{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class Uk{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[Dk.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class jk extends He.Ds{constructor(e,t,n){super(e),this.parent=t,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Dk.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,He.ft)(this.observable,new He.IY(this))}}function qk(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Bk(e,n))}}class Bk{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new zk(e,this.observables,this.project))}}class zk extends Ao{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Po(this,t[i],void 0,i))}notifyNext(e,t,n){this.values[n]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var Hk=n(8819);const Gk=["*"],$k=["dialog"];function Zk(e){return null!=e}function Wk(e){return(e||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const Kk={animation:!0,transitionTimerDelayMs:5};let Yk=(()=>{class e{constructor(){this.animation=Kk.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Qk=()=>{},{transitionTimerDelayMs:Jk}=Kk,Xk=new Map,ex=(e,t,n,r)=>{let i=r.context||{};const s=Xk.get(t);if(s)switch(r.runningTransition){case"continue":return Le.E;case"stop":e.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),Xk.delete(t)}const o=n(t,r.animation,i)||Qk;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>o()),(0,Ee.of)(void 0).pipe(function(e){return t=>new at.y(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())))}(e));const a=new _e.xQ,l=new _e.xQ,c=a.pipe(function(...e){return t=>kt(t,(0,Ee.of)(...e))}(!0));Xk.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:i});const u=function(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const n=ns(t,"transitionend").pipe(Ge(c),Re(({target:e})=>e===t));(function(...e){if(1===e.length){if(!(0,es.k)(e[0]))return e[0];e=e[0]}return(0,Oo.n)(e,void 0).lift(new Nk)})(cs(u+Jk).pipe(Ge(c)),n,l).pipe(Ge(c)).subscribe(()=>{Xk.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let tx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),nx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),rx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),ix=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),sx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();var ox=(()=>(function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}(ox||(ox={})),ox))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const ax=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function lx(e){const t=Array.from(e.querySelectorAll(ax)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))n=e.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const t=this.offsetParent(e);n=this.offset(e,!1),t!==document.documentElement&&(r=this.offset(t,!1)),r.top+=t.clientTop,r.left+=t.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,t&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(e,t=!0){const n=e.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||e.offsetHeight,width:n.width||e.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(e,t,n,r){const[i="top",s="center"]=n.split("-"),o=r?this.offset(e,!1):this.position(e,!1),a=this.getAllStyles(t),l=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),u=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,p=0;switch(i){case"top":d=o.top-(t.offsetHeight+l+c);break;case"bottom":d=o.top+o.height;break;case"left":p=o.left-(t.offsetWidth+u+h);break;case"right":p=o.left+o.width}switch(s){case"top":d=o.top;break;case"bottom":d=o.top+o.height-t.offsetHeight;break;case"left":p=o.left;break;case"right":p=o.left+o.width-t.offsetWidth;break;case"center":"top"===i||"bottom"===i?p=o.left+o.width/2-t.offsetWidth/2:d=o.top+o.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(p)}px, ${Math.round(d)}px)`;const f=t.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,y=window.innerWidth||m.clientWidth;return f.left>=0&&f.top>=0&&f.right<=y&&f.bottom<=g}},new Date(1882,10,12),new Date(2174,10,25);let cx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F,ck]]}),e})(),ux=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),hx=(()=>{class e{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Yk))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(Yk))},token:e,providedIn:"root"}),e})();class dx{constructor(e,t,n){this.nodes=e,this.viewRef=t,this.componentRef=n}}const px=()=>{};let fx=(()=>{class e{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):px}_adjustBody(e){const t=this._document.body,n=t.style.paddingRight,r=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=`${r+e}px`,()=>t.style["padding-right"]=n}_isPresent(e){const t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const t=this._document.body;t.appendChild(e);const n=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),n}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})(),mx=(()=>{class e{constructor(e,t){this._el=e,this._zone=t}ngOnInit(){this._zone.onStable.asObservable().pipe(Fe(1)).subscribe(()=>{ex(this._zone,this._el.nativeElement,(e,t)=>{t&&Wk(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ex(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,t){2&e&&(r.Tol("modal-backdrop"+(t.backdropClass?" "+t.backdropClass:"")),r.ekj("show",!t.animation)("fade",t.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();class gx{close(e){}dismiss(e){}}class yx{constructor(e,t,n,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new _e.xQ,this._dismissed=new _e.xQ,this._hidden=new _e.xQ,e.instance.dismissEvent.subscribe(e=>{this.dismiss(e)}),this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ge(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ge(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(t=>{!1!==t&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ee.of)(void 0);e.subscribe(()=>{const{nativeElement:e}=this._windowCmptRef.location;e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:e}=this._backdropCmptRef.location;e.parentNode.removeChild(e),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Lk(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var _x=(()=>(function(e){e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC"}(_x||(_x={})),_x))();let vx=(()=>{class e{constructor(e,t,n){this._document=e,this._elRef=t,this._zone=n,this._closed$=new _e.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new _e.xQ,this.hidden=new _e.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Fe(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},n=Lk(ex(this._zone,e,()=>e.classList.remove("show"),t),ex(this._zone,this._dialogEl.nativeElement,()=>{},t));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const e={animation:this.animation,runningTransition:"continue"};Lk(ex(this._zone,this._elRef.nativeElement,(e,t)=>{t&&Wk(e),e.classList.add("show")},e),ex(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ns(e,"keydown").pipe(Ge(this._closed$),Re(e=>e.which===ox.Escape)).subscribe(e=>{this.keyboard?requestAnimationFrame(()=>{e.defaultPrevented||this._zone.run(()=>this.dismiss(_x.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let t=!1;ns(this._dialogEl.nativeElement,"mousedown").pipe(Ge(this._closed$),(0,Se.b)(()=>t=!1),Nt(()=>ns(e,"mouseup").pipe(Ge(this._closed$),Fe(1))),Re(({target:t})=>e===t)).subscribe(()=>{t=!0}),ns(e,"click").pipe(Ge(this._closed$)).subscribe(({target:n})=>{e===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||t||this._zone.run(()=>this.dismiss(_x.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const t=e.querySelector("[ngbAutofocus]"),n=lx(e)[0];(t||n||e).focus()}}_restoreFocus(){const e=this._document.body,t=this._elWithFocus;let n;n=t&&t.focus&&e.contains(t)?t:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ex(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o),r.Y36(r.SBq),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){if(1&e&&r.Gf($k,7),2&e){let e;r.iGM(e=r.CRH())&&(t._dialogEl=e.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,t){2&e&&(r.uIk("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),r.Tol("modal d-block"+(t.windowClass?" "+t.windowClass:"")),r.ekj("fade",t.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Gk,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&e&&r.Tol("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":"")+(t.modalDialogClass?" "+t.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),e})(),wx=(()=>{class e{constructor(e,t,n,i,s,o){this._applicationRef=e,this._injector=t,this._document=n,this._scrollBar=i,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new _e.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const e=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const e=ns(t,"focusin").pipe(Ge(n),(0,Oe.U)(e=>e.target));ns(t,"keydown").pipe(Ge(n),Re(e=>e.which===ox.Tab),qk(e)).subscribe(([e,n])=>{const[r,i]=lx(t);n!==r&&n!==t||!e.shiftKey||(i.focus(),e.preventDefault()),n!==i||e.shiftKey||(r.focus(),e.preventDefault())}),r&&ns(t,"click").pipe(Ge(n),qk(e),(0,Oe.U)(e=>e[1])).subscribe(e=>e.focus())})})(0,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}open(e,t,n,r){const i=r.container instanceof HTMLElement?r.container:Zk(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const l=new gx,c=this._getContentRef(e,r.injector||t,n,l,r);let u=!1!==r.backdrop?this._attachBackdrop(e,i):void 0,h=this._attachWindowComponent(e,i,c),d=new yx(h,c,u,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(o,o),d.result.then(a,a),l.close=e=>{d.close(e)},l.dismiss=e=>{d.dismiss(e)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),u&&u.instance&&(this._applyBackdropOptions(u.instance,r),u.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,t){let n=e.resolveComponentFactory(mx).create(this._injector);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,t,n){let r=e.resolveComponentFactory(vx).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_applyWindowOptions(e,t){this._windowAttributes.forEach(n=>{Zk(t[n])&&(e[n]=t[n])})}_applyBackdropOptions(e,t){this._backdropAttributes.forEach(n=>{Zk(t[n])&&(e[n]=t[n])})}_getContentRef(e,t,n,i,s){return n?n instanceof r.Rgc?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(e,t,n,i,s):new dx([])}_createFromTemplateRef(e,t){const n=e.createEmbeddedView({$implicit:t,close(e){t.close(e)},dismiss(e){t.dismiss(e)}});return this._applicationRef.attachView(n),new dx([n.rootNodes],n)}_createFromString(e){const t=this._document.createTextNode(`${e}`);return new dx([[t]])}_createFromComponent(e,t,n,i,s){const o=e.resolveComponentFactory(n),a=r.zs3.create({providers:[{provide:gx,useValue:i}],parent:t}),l=o.create(a),c=l.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new dx([[c]],l.hostView,l)}_setAriaHidden(e){const t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(t=>{t!==e&&"SCRIPT"!==t.nodeName&&(this._ariaHiddenValues.set(t,t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const t=()=>{const t=this._modalRefs.indexOf(e);t>-1&&(this._modalRefs.splice(t,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(o),r.LFG(fx),r.LFG(r.FYo),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.z2F),r.LFG(r.gxx),r.LFG(o),r.LFG(fx),r.LFG(r.FYo),r.LFG(r.R0b))},token:e,providedIn:"root"}),e})(),bx=(()=>{class e{constructor(e,t,n,r){this._moduleCFR=e,this._injector=t,this._modalStack=n,this._config=r}open(e,t={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._moduleCFR,this._injector,e,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(wx),r.LFG(hx))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(wx),r.LFG(hx))},token:e,providedIn:"root"}),e})(),Ex=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[bx]}),e})(),Cx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),Sx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),Tx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),Ix=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),kx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),xx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),Ax=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})(),Rx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();new r.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Nx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F]]}),e})();const Px=[tx,nx,rx,ix,sx,cx,ux,Ex,Cx,Sx,Tx,Ix,kx,xx,Ax,Rx,Nx];let Ox=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Px,tx,nx,rx,ix,sx,cx,ux,Ex,Cx,Sx,Tx,Ix,kx,xx,Ax,Rx,Nx]}),e})(),Dx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[rt]]}),e})(),Lx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F,ji,ct],ji]}),e})(),Fx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Hi],imports:[[Dx,Lx,ji],Dx,Lx]}),e})();class Mx{}class Vx{}class Ux{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ux?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ux;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ux?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jx{encodeKey(e){return qx(e)}encodeValue(e){return qx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function qx(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Bx(e){return`${e}`}class zx{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jx,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new zx({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Bx(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(Bx(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Hx{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Gx(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function $x(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Zx(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Wx{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Ux),this.context||(this.context=new Hx),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new zx,this.urlWithParams=t}serializeBody(){return null===this.body?null:Gx(this.body)||$x(this.body)||Zx(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof zx?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zx(this.body)?null:$x(this.body)?this.body.type||null:Gx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zx?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new Wx(n,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var Kx=(()=>((Kx=Kx||{})[Kx.Sent=0]="Sent",Kx[Kx.UploadProgress=1]="UploadProgress",Kx[Kx.ResponseHeader=2]="ResponseHeader",Kx[Kx.DownloadProgress=3]="DownloadProgress",Kx[Kx.Response=4]="Response",Kx[Kx.User=5]="User",Kx))();class Yx{constructor(e,t=200,n="OK"){this.headers=e.headers||new Ux,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Qx extends Yx{constructor(e={}){super(e),this.type=Kx.ResponseHeader}clone(e={}){return new Qx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jx extends Yx{constructor(e={}){super(e),this.type=Kx.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jx({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xx extends Yx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function eA(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let tA=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof Wx)r=e;else{let i,s;i=n.headers instanceof Ux?n.headers:new Ux(n.headers),n.params&&(s=n.params instanceof zx?n.params:new zx({fromObject:n.params})),r=new Wx(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Ee.of)(r).pipe(Zo(e=>this.handler.handle(e)));if(e instanceof Wx||"events"===n.observe)return i;const s=i.pipe(Re(e=>e instanceof Jx));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,Oe.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe((0,Oe.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe((0,Oe.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe((0,Oe.U)(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new zx).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,eA(n,t))}post(e,t,n={}){return this.request("POST",e,eA(n,t))}put(e,t,n={}){return this.request("PUT",e,eA(n,t))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Mx))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class nA{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const rA=new r.OlP("HTTP_INTERCEPTORS");let iA=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const sA=/^\)\]\}',?\n/;let oA=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new at.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Ux(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new Qx({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(sA,"");try{l=""!==l?JSON.parse(l):null}catch(DA){l=e,c&&(c=!1,l={error:DA,text:l})}}c?(t.next(new Jx({body:l,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new Xx({error:l,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new Xx({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let l=!1;const c=r=>{l||(t.next(s()),l=!0);let i={type:Kx.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},u=e=>{let n={type:Kx.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),t.next({type:Kx.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(q))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const aA=new r.OlP("XSRF_COOKIE_NAME"),lA=new r.OlP("XSRF_HEADER_NAME");class cA{}let uA=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(r.Lbi),r.LFG(aA))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),hA=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(cA),r.LFG(lA))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),dA=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(rA,[]);this.chain=e.reduceRight((e,t)=>new nA(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Vx),r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),pA=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:hA,useClass:iA}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:aA,useValue:t.cookieName}:[],t.headerName?{provide:lA,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[hA,{provide:rA,useExisting:hA,multi:!0},{provide:cA,useClass:uA},{provide:aA,useValue:"XSRF-TOKEN"},{provide:lA,useValue:"X-XSRF-TOKEN"}]}),e})(),fA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[tA,{provide:Mx,useClass:dA},oA,{provide:Vx,useExisting:oA}],imports:[[pA.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();const mA={apiKey:"AIzaSyD9bS9zzrB1iddlqCleX3EwBxUU87iJD-I",authDomain:"hpoggi-trelosolo.firebaseapp.com",projectId:"hpoggi-trelosolo",storageBucket:"hpoggi-trelosolo.appspot.com",messagingSenderId:"787403891635",appId:"1:787403891635:web:a5e4fbcc9f66e7ff1821c6"};class gA{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new yA(e,this.predicate))}}class yA extends Te.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}let _A="";function vA(e){_A=e}class wA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,mu.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,mu.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class bA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,mu.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const EA=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wA(t)}}catch(t){}return new bA},CA=EA("localStorage"),SA=EA("sessionStorage"),TA=new fu.Yd("@firebase/database"),IA=function(){let e=1;return function(){return e++}}(),kA=function(e){const t=(0,mu.dS)(e),n=new mu.gQ;n.update(t);const r=n.digest();return mu.US.encodeByteArray(r)},xA=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=xA.apply(null,r):t+="object"==typeof r?(0,mu.Pz)(r):r,t+=" "}return t};let AA=null,RA=!0;const NA=function(e,t){(0,mu.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(TA.logLevel=fu.in.VERBOSE,AA=TA.log.bind(TA),t&&SA.set("logging_enabled",!0)):"function"==typeof e?AA=e:(AA=null,SA.remove("logging_enabled"))},PA=function(...e){if(!0===RA&&(RA=!1,null===AA&&!0===SA.get("logging_enabled")&&NA(!0)),AA){const t=xA.apply(null,e);AA(t)}},OA=function(e){return function(...t){PA(e,...t)}},DA=function(...e){const t="FIREBASE INTERNAL ERROR: "+xA(...e);TA.error(t)},LA=function(...e){const t=`FIREBASE FATAL ERROR: ${xA(...e)}`;throw TA.error(t),new Error(t)},FA=function(...e){const t="FIREBASE WARNING: "+xA(...e);TA.warn(t)},MA=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},VA="[MIN_NAME]",UA="[MAX_NAME]",jA=function(e,t){if(e===t)return 0;if(e===VA||t===UA)return-1;if(t===VA||e===UA)return 1;{const n=WA(e),r=WA(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},qA=function(e,t){return e===t?0:e<t?-1:1},BA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,mu.Pz)(t))},zA=function(e){if("object"!=typeof e||null===e)return(0,mu.Pz)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,mu.Pz)(t[r]),n+=":",n+=zA(e[t[r]]);return n+="}",n},HA=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function GA(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const $A=function(e){let t,n,r,i,s;(0,mu.hu)(!MA(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},ZA=new RegExp("^-?(0*)\\d{1,10}$"),WA=function(e){if(ZA.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},KA=function(e){try{e()}catch(t){setTimeout(()=>{throw FA("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},YA=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class QA{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){FA(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class JA{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(PA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',FA(e)}}let XA=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const eR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tR="websocket",nR="long_polling";class rR{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=CA.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&CA.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function iR(e,t,n){let r;if((0,mu.hu)("string"==typeof t,"typeof type must == string"),(0,mu.hu)("object"==typeof n,"typeof params must == object"),t===tR)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==nR)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return GA(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class sR{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,mu.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,mu.p$)(this.counters_)}}const oR={},aR={};function lR(e){const t=e.toString();return oR[t]||(oR[t]=new sR),oR[t]}class cR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&KA(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uR{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=OA(e),this.stats_=lR(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),iR(t,nR,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,mu.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hR((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&eR.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uR.forceAllow_=!0}static forceDisallow(){uR.forceDisallow_=!0}static isAvailable(){return!((0,mu.Yr)()||!uR.forceAllow_&&(uR.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,mu.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,mu.h$)(t),r=HA(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,mu.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,mu.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hR{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,mu.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=IA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hR.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){PA("frame writing exception"),i.stack&&PA(i.stack),PA(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||PA("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,mu.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{PA("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let dR=null;"undefined"!=typeof MozWebSocket?dR=MozWebSocket:"undefined"!=typeof WebSocket&&(dR=WebSocket);let pR=(()=>{class e{constructor(t,n,r,i,s,o,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=OA(this.connId),this.stats_=lR(n),this.connURL=e.connectionURL_(n,o,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r){const i={v:"5"};return!(0,mu.Yr)()&&"undefined"!=typeof location&&location.hostname&&eR.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),iR(e,tR,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,CA.set("previous_websocket_failure",!0);try{if((0,mu.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${_A}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new dR(this.connURL,[],e)}else this.mySock=new dR(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==dR&&!e.forceDisallow_}static previouslyFailed(){return CA.isInMemoryStorage||!0===CA.get("previous_websocket_failure")}markConnectionHealthy(){CA.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,mu.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,mu.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,mu.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=HA(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class fR{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[uR,pR]}initTransports_(e){const t=pR&&pR.isAvailable();let n=t&&!pR.previouslyFailed();if(e.webSocketOnly&&(t||FA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[pR];else{const e=this.transports_=[];for(const t of fR.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class mR{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=OA("c:"+this.id+":"),this.transportManager_=new fR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=YA(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=BA("t",e),n=BA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=BA("t",e),n=BA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=BA("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?DA("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&FA("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),YA(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):YA(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(CA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gR{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class yR{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,mu.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,mu.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class _R extends yR{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,mu.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new _R}getInitialEvent(e){return(0,mu.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class vR{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wR(){return new vR("")}function bR(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ER(e){return e.pieces_.length-e.pieceNum_}function CR(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new vR(e.pieces_,t)}function SR(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function TR(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function IR(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new vR(t,0)}function kR(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof vR)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new vR(n,0)}function xR(e){return e.pieceNum_>=e.pieces_.length}function AR(e,t){const n=bR(e),r=bR(t);if(null===n)return t;if(n===r)return AR(CR(e),CR(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function RR(e,t){const n=TR(e,0),r=TR(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=jA(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function NR(e,t){if(ER(e)!==ER(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function PR(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ER(e)>ER(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class OR{constructor(e,t){this.errorPrefix_=t,this.parts_=TR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,mu.ug)(this.parts_[n]);DR(this)}}function DR(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+LR(e))}function LR(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class FR extends yR{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new FR}getInitialEvent(e){return(0,mu.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const MR=1e3;let VR,UR=(()=>{class e extends gR{constructor(t,n,r,i,s,o,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=OA("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=MR,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,mu.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&_R.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,mu.Pz)(i)),(0,mu.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new mu.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[i];void 0!==e&&r===e&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,mu.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,mu.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r};t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(r,i),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,mu.r3)(e,"w")){const n=(0,mu.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();FA(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,mu.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,mu.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,mu.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,mu.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):DA("Unrecognized action received from server: "+(0,mu.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,mu.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=MR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=MR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=MR),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,hu.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const n=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),i=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+e.nextConnectionId_++,o=t.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,i())};t.realtime_={close:c,sendRequest:function(e){(0,mu.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};const u=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[e,c]=yield Promise.all([t.authTokenProvider_.getToken(u),t.appCheckTokenProvider_.getToken(u)]);a?PA("getToken() completed but was canceled"):(PA("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,t.appCheckToken_=c&&c.token,l=new mR(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,n,r,i,e=>{FA(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},o))}catch(DA){t.log_("Failed to get token: "+DA),a||(t.repoInfo_.nodeAdmin&&FA(DA),c())}}})()}interrupt(e){PA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){PA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,mu.xb)(this.interruptReasons_)&&(this.reconnectDelay_=MR,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>zA(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new vR(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){PA("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){PA("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,mu.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+_A.replace(/\./g,"-")]=1,(0,mu.uI)()?e["framework.cordova"]=1:(0,mu.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=_R.getInstance().currentlyOnline();return(0,mu.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class jR{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new jR(e,t)}}class qR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new jR(VA,e),r=new jR(VA,t);return 0!==this.compare(n,r)}minPost(){return jR.MIN}}class BR extends qR{static get __EMPTY_NODE(){return VR}static set __EMPTY_NODE(e){VR=e}compare(e,t){return jA(e.name,t.name)}isDefinedOn(e){throw(0,mu.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return jR.MIN}maxPost(){return new jR(UA,VR)}makePost(e,t){return(0,mu.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new jR(e,VR)}toString(){return".key"}}const zR=new BR;class HR{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let GR,$R=(()=>{class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ZR.EMPTY_NODE,this.right=null!=s?s:ZR.EMPTY_NODE}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ZR.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ZR.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class ZR{constructor(e,t=ZR.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ZR(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$R.BLACK,null,null))}remove(e){return new ZR(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$R.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new HR(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new HR(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new HR(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new HR(this.root_,null,this.comparator_,!0,e)}}function WR(e,t){return jA(e.name,t.name)}function KR(e,t){return jA(e,t)}ZR.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new $R(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YR=function(e){return"number"==typeof e?"number:"+$A(e):"string:"+e},QR=function(e){if(e.isLeafNode()){const t=e.val();(0,mu.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,mu.r3)(t,".sv"),"Priority must be a string or number.")}else(0,mu.hu)(e===GR||e.isEmpty(),"priority of unexpected type.");(0,mu.hu)(e===GR||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JR,XR,eN,tN=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,mu.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),QR(this.priorityNode_)}static set __childrenNodeConstructor(e){JR=e}static get __childrenNodeConstructor(){return JR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xR(t)?this:".priority"===bR(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=bR(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,mu.hu)(".priority"!==r||1===ER(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(CR(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+YR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?$A(this.value_):this.value_,this.lazyHash_=kA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,mu.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return(0,mu.hu)(i>=0,"Unknown leaf type: "+n),(0,mu.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const nN=new class extends qR{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?jA(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return jR.MIN}maxPost(){return new jR(UA,new tN("[PRIORITY-POST]",eN))}makePost(e,t){const n=XR(e);return new jR(t,new tN("[PRIORITY-POST]",n))}toString(){return".priority"}},rN=Math.log(2);class iN{constructor(e){this.count=parseInt(Math.log(e+1)/rN,10),this.current_=this.count-1;const t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sN=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new $R(a,o.node,$R.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new $R(a,o.node,$R.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new $R(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,$R.BLACK):(a(r,$R.BLACK),a(r,$R.RED))}return s}(new iN(e.length));return new ZR(r||t,s)};let oN;const aN={};class lN{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,mu.hu)(aN&&nN,"ChildrenNode.ts has not been loaded"),oN=oN||new lN({".priority":aN},{".priority":nN}),oN}get(e){const t=(0,mu.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ZR?t:null}hasIndex(e){return(0,mu.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,mu.hu)(e!==zR,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(jR.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?sN(n,e.getCompare()):aN;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new lN(c,l)}addToIndexes(e,t){const n=(0,mu.UI)(this.indexes_,(n,r)=>{const i=(0,mu.DV)(this.indexSet_,r);if((0,mu.hu)(i,"Missing index implementation for "+r),n===aN){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(jR.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),sN(n,i.getCompare())}return aN}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new jR(e.name,r))),i.insert(e,e.node)}});return new lN(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,mu.UI)(this.indexes_,n=>{if(n===aN)return n;{const r=t.get(e.name);return r?n.remove(new jR(e.name,r)):n}});return new lN(n,this.indexSet_)}}let cN,uN=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&QR(this.priorityNode_),this.children_.isEmpty()&&(0,mu.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cN||(cN=new e(new ZR(KR),null,lN.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cN}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?cN:t}}getChild(e){const t=bR(e);return null===t?this:this.getImmediateChild(t).getChild(CR(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,mu.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const r=new jR(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?cN:this.priorityNode_;return new e(i,o,s)}}updateChild(e,t){const n=bR(e);if(null===n)return t;{(0,mu.hu)(".priority"!==bR(e)||1===ER(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(CR(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(nN,(o,a)=>{n[o]=a.val(t),r++,s&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+YR(this.getPriority().val())+":"),this.forEachChild(nN,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":kA(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new jR(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new jR(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new jR(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,jR.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,jR.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hN?-1:0}withIndex(t){if(t===zR||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===zR||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(nN),n=t.getIterator(nN);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===zR?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const hN=new class extends uN{constructor(){super(new ZR(KR),uN.EMPTY_NODE,lN.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return uN.EMPTY_NODE}isEmpty(){return!1}};function dN(e,t=null){if(null===e)return uN.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,mu.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new tN(e,dN(t));if(e instanceof Array){let n=uN.EMPTY_NODE;return GA(e,(t,r)=>{if((0,mu.r3)(e,t)&&"."!==t.substring(0,1)){const e=dN(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(dN(t))}{const n=[];let r=!1;if(GA(e,(e,t)=>{if("."!==e.substring(0,1)){const i=dN(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new jR(e,i)))}}),0===n.length)return uN.EMPTY_NODE;const i=sN(n,WR,e=>e.name,KR);if(r){const e=sN(n,nN.getCompare());return new uN(i,dN(t),new lN({".priority":e},{".priority":nN}))}return new uN(i,dN(t),lN.Default)}}Object.defineProperties(jR,{MIN:{value:new jR(VA,uN.EMPTY_NODE)},MAX:{value:new jR(UA,hN)}}),BR.__EMPTY_NODE=uN.EMPTY_NODE,tN.__childrenNodeConstructor=uN,GR=hN,eN=hN,XR=dN;class pN extends qR{constructor(e){super(),this.indexPath_=e,(0,mu.hu)(!xR(e)&&".priority"!==bR(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?jA(e.name,t.name):i}makePost(e,t){const n=dN(e),r=uN.EMPTY_NODE.updateChild(this.indexPath_,n);return new jR(t,r)}maxPost(){const e=uN.EMPTY_NODE.updateChild(this.indexPath_,hN);return new jR(UA,e)}toString(){return TR(this.indexPath_,0).join("/")}}const fN=new class extends qR{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?jA(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return jR.MIN}maxPost(){return jR.MAX}makePost(e,t){const n=dN(e);return new jR(t,n)}toString(){return".value"}},mN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gN=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=mN.charAt(n%64),n=Math.floor(n/64);(0,mu.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=mN.charAt(t[i]);return(0,mu.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),yN=function(e){if("2147483647"===e)return"-";const t=WA(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e.charAt(s);if(n.length<786)return n.push("-"),n.join("");let r=n.length-1;for(;r>=0&&"z"===n[r];)r--;if(-1===r)return UA;const i=mN.charAt(mN.indexOf(n[r])+1);return n[r]=i,n.slice(0,r+1).join("")},_N=function(e){if("-2147483648"===e)return VA;const t=WA(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=mN.charAt(mN.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function vN(e){return{type:"value",snapshotNode:e}}function wN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function bN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function EN(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class CN{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,mu.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(bN(t,o)):(0,mu.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(wN(t,n)):s.trackChildChange(EN(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(nN,(e,r)=>{t.hasChild(e)||n.trackChildChange(bN(e,r))}),t.isLeafNode()||t.forEachChild(nN,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(EN(t,r,i))}else n.trackChildChange(wN(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?uN.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class SN{constructor(e){this.indexedFilter_=new CN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=SN.getStartPost_(e),this.endPost_=SN.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new jR(t,n))||(n=uN.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=uN.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(uN.EMPTY_NODE);const i=this;return t.forEachChild(nN,(e,t)=>{i.matches(new jR(e,t))||(r=r.updateImmediateChild(e,uN.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class TN{constructor(e){this.rangedFilter_=new SN(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new jR(t,n))||(n=uN.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=uN.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=uN.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,i,s;if(r=t.withIndex(this.index_),r=r.updatePriority(uN.EMPTY_NODE),this.reverse_){s=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();i=(e,n)=>t(n,e)}else s=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&i(e,t)<=0&&(a=!0),a&&o<this.limit_&&i(t,n)<=0?o++:r=r.updateImmediateChild(t.name,uN.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;(0,mu.hu)(o.numChildren()===this.limit_,"");const a=new jR(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(EN(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(bN(t,e));const n=o.updateImmediateChild(t,uN.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(wN(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(bN(l.name,l.node)),i.trackChildChange(wN(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,uN.EMPTY_NODE)):e}}class IN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nN}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,mu.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,mu.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:VA}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,mu.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,mu.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:UA}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,mu.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nN}copy(){const e=new IN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kN(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xN(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function AN(e,t){const n=e.copy();return n.index_=t,n}function RN(e){const t={};if(e.isDefault())return t;let n;return e.index_===nN?n="$priority":e.index_===fN?n="$value":e.index_===zR?n="$key":((0,mu.hu)(e.index_ instanceof pN,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,mu.Pz)(n),e.startSet_&&(t.startAt=(0,mu.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,mu.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,mu.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,mu.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function NN(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==nN&&(t.i=e.index_.toString()),t}class PN extends gR{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=OA("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,mu.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=PN.getListenId_(e,n),o={};this.listens_[s]=o;const a=RN(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),(0,mu.DV)(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=PN.getListenId_(e,t);delete this.listens_[n]}get(e){const t=RN(e._queryParams),n=e._path.toString(),r=new mu.BH;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,mu.xO)(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,mu.cI)(o.responseText)}catch(e){FA("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&FA("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class ON{constructor(){this.rootNode_=uN.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function DN(){return{value:null,children:new Map}}function LN(e,t,n){if(xR(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=bR(t);e.children.has(r)||e.children.set(r,DN()),LN(e.children.get(r),t=CR(t),n)}}function FN(e,t){if(xR(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(nN,(t,n)=>{LN(e,new vR(t),n)}),FN(e,t)}}if(e.children.size>0){const n=bR(t);return t=CR(t),e.children.has(n)&&FN(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function MN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{MN(r,new vR(t.toString()+"/"+e),n)})}class VN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&GA(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class UN{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new VN(e);const n=1e4+2e4*Math.random();YA(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;GA(e,(e,r)=>{r>0&&(0,mu.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),YA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var jN=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jN||(jN={})),jN))();function qN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class BN{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=jN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(xR(this.path)){if(null!=this.affectedTree.value)return(0,mu.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vR(e));return new BN(wR(),t,this.revert)}}return(0,mu.hu)(bR(this.path)===e,"operationForChild called for unrelated child."),new BN(CR(this.path),this.affectedTree,this.revert)}}class zN{constructor(e,t){this.source=e,this.path=t,this.type=jN.LISTEN_COMPLETE}operationForChild(e){return xR(this.path)?new zN(this.source,wR()):new zN(this.source,CR(this.path))}}class HN{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=jN.OVERWRITE}operationForChild(e){return xR(this.path)?new HN(this.source,wR(),this.snap.getImmediateChild(e)):new HN(this.source,CR(this.path),this.snap)}}class GN{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=jN.MERGE}operationForChild(e){if(xR(this.path)){const t=this.children.subtree(new vR(e));return t.isEmpty()?null:t.value?new HN(this.source,wR(),t.value):new GN(this.source,wR(),t)}return(0,mu.hu)(bR(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new GN(this.source,CR(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $N{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xR(e))return this.isFullyInitialized()&&!this.filtered_;const t=bR(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ZN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function WN(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,mu.g5)("Should only compare child_ events.");const r=new jR(t.childName,t.snapshotNode),i=new jR(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function KN(e,t){return{eventCache:e,serverCache:t}}function YN(e,t,n,r){return KN(new $N(t,n,r),e.serverCache)}function QN(e,t,n,r){return KN(e.eventCache,new $N(t,n,r))}function JN(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function XN(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let eP;class tP{constructor(e,t=(()=>(eP||(eP=new ZR(qA)),eP))()){this.value=e,this.children=t}static fromObject(e){let t=new tP(null);return GA(e,(e,n)=>{t=t.set(new vR(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wR(),value:this.value};if(xR(e))return null;{const n=bR(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(CR(e),t);return null!=i?{path:kR(new vR(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xR(e))return this;{const t=bR(e),n=this.children.get(t);return null!==n?n.subtree(CR(e)):new tP(null)}}set(e,t){if(xR(e))return new tP(t,this.children);{const n=bR(e),r=(this.children.get(n)||new tP(null)).set(CR(e),t),i=this.children.insert(n,r);return new tP(this.value,i)}}remove(e){if(xR(e))return this.children.isEmpty()?new tP(null):new tP(null,this.children);{const t=bR(e),n=this.children.get(t);if(n){const r=n.remove(CR(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new tP(null):new tP(this.value,i)}return this}}get(e){if(xR(e))return this.value;{const t=bR(e),n=this.children.get(t);return n?n.get(CR(e)):null}}setTree(e,t){if(xR(e))return t;{const n=bR(e),r=(this.children.get(n)||new tP(null)).setTree(CR(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new tP(this.value,i)}}fold(e){return this.fold_(wR(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(kR(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,wR(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(xR(e))return null;{const r=bR(e),i=this.children.get(r);return i?i.findOnPath_(CR(e),kR(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wR(),t)}foreachOnPath_(e,t,n){if(xR(e))return this;{this.value&&n(t,this.value);const r=bR(e),i=this.children.get(r);return i?i.foreachOnPath_(CR(e),kR(t,r),n):new tP(null)}}foreach(e){this.foreach_(wR(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(kR(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class nP{constructor(e){this.writeTree_=e}static empty(){return new nP(new tP(null))}}function rP(e,t,n){if(xR(t))return new nP(new tP(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=AR(i,t);return s=s.updateChild(o,n),new nP(e.writeTree_.set(i,s))}{const r=new tP(n),i=e.writeTree_.setTree(t,r);return new nP(i)}}}function iP(e,t,n){let r=e;return GA(n,(e,n)=>{r=rP(r,kR(t,e),n)}),r}function sP(e,t){if(xR(t))return nP.empty();{const n=e.writeTree_.setTree(t,new tP(null));return new nP(n)}}function oP(e,t){return null!=aP(e,t)}function aP(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(AR(n.path,t)):null}function lP(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(nN,(e,n)=>{t.push(new jR(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new jR(e,n.value))}),t}function cP(e,t){if(xR(t))return e;{const n=aP(e,t);return new nP(null!=n?new tP(n):e.writeTree_.subtree(t))}}function uP(e){return e.writeTree_.isEmpty()}function hP(e,t){return dP(wR(),e.writeTree_,t)}function dP(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,mu.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=dP(kR(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(kR(e,".priority"),r)),n}}function pP(e,t){return SP(t,e)}function fP(e,t){if(e.snap)return PR(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&PR(kR(e.path,n),t))return!0;return!1}function mP(e){return e.visible}function gP(e,t,n){let r=nP.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)PR(n,e)?(t=AR(n,e),r=rP(r,t,s.snap)):PR(e,n)&&(t=AR(e,n),r=rP(r,wR(),s.snap.getChild(t)));else{if(!s.children)throw(0,mu.g5)("WriteRecord should have .snap or .children");if(PR(n,e))t=AR(n,e),r=iP(r,t,s.children);else if(PR(e,n))if(t=AR(e,n),xR(t))r=iP(r,wR(),s.children);else{const e=(0,mu.DV)(s.children,bR(t));if(e){const n=e.getChild(CR(t));r=rP(r,wR(),n)}}}}}return r}function yP(e,t,n,r,i){if(r||i){const s=cP(e.visibleWrites,t);return!i&&uP(s)?n:i||null!=n||oP(s,wR())?hP(gP(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(PR(e.path,t)||PR(t,e.path))},t),n||uN.EMPTY_NODE):null}{const r=aP(e.visibleWrites,t);if(null!=r)return r;{const r=cP(e.visibleWrites,t);return uP(r)?n:null!=n||oP(r,wR())?hP(r,n||uN.EMPTY_NODE):null}}}function _P(e,t,n,r){return yP(e.writeTree,e.treePath,t,n,r)}function vP(e,t){return function(e,t,n){let r=uN.EMPTY_NODE;const i=aP(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(nN,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=cP(e.visibleWrites,t);return n.forEachChild(nN,(e,t)=>{const n=hP(cP(i,new vR(e)),t);r=r.updateImmediateChild(e,n)}),lP(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return lP(cP(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function wP(e,t,n,r){return function(e,t,n,r,i){(0,mu.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=kR(t,n);if(oP(e.visibleWrites,s))return null;{const t=cP(e.visibleWrites,s);return uP(t)?i.getChild(n):hP(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function bP(e,t){return function(e,t){return aP(e.visibleWrites,t)}(e.writeTree,kR(e.treePath,t))}function EP(e,t,n){return function(e,t,n,r){const i=kR(t,n),s=aP(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?hP(cP(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function CP(e,t){return SP(kR(e.treePath,t),e.writeTree)}function SP(e,t){return{treePath:e,writeTree:t}}class TP{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,mu.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,mu.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,EN(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,bN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,wN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,mu.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,EN(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const IP=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class kP{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new $N(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return EP(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:XN(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=cP(e.visibleWrites,t),c=aP(l,wR());if(null!=c)a=c;else{if(null==n)return[];a=hP(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let i=n.getNext();for(;i&&e.length<1;)0!==t(i,r)&&e.push(i),i=n.getNext();return e}}(e.writeTree,e.treePath,t,n,0,i,s)}(this.writes_,r,t,0,n,e);return 0===i.length?null:i[0]}}function xP(e,t,n,r,i,s){const o=t.eventCache;if(null!=bP(r,n))return t;{let a,l;if(xR(n))if((0,mu.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=XN(t),i=vP(r,n instanceof uN?n:uN.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=_P(r,XN(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=bR(n);if(".priority"===c){(0,mu.hu)(1===ER(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=wP(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=CR(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=wP(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=EP(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return YN(t,a,o.isFullyInitialized()||xR(n),e.filter.filtersNodes())}}function AP(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(xR(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=bR(n);if(!l.isCompleteForPath(n)&&ER(n)>1)return t;const i=CR(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,IP,null)}const h=QN(t,c,l.isFullyInitialized()||xR(n),u.filtersNodes());return xP(e,h,n,i,new kP(i,h,s),a)}function RP(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new kP(i,t,s);if(xR(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=YN(t,c,!0,e.filter.filtersNodes());else{const i=bR(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=YN(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=CR(n),c=a.getNode().getImmediateChild(i);let h;if(xR(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===SR(s)&&e.getChild(IR(s)).isEmpty()?e:e.updateChild(s,r):uN.EMPTY_NODE}l=c.equals(h)?t:YN(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function NP(e,t){return e.eventCache.isCompleteForChild(t)}function PP(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function OP(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=xR(n)?r:new tP(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=PP(0,t.serverCache.getNode().getImmediateChild(n),r);c=AP(e,c,new vR(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!u.hasChild(n)&&!l){const l=PP(0,t.serverCache.getNode().getImmediateChild(n),r);c=AP(e,c,new vR(n),l,i,s,o,a)}}),c}class DP{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new CN(n.getIndex()),i=(s=n).loadsAllData()?new CN(s.getIndex()):s.hasLimit()?new TN(s):new SN(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(uN.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(uN.EMPTY_NODE,a.getNode(),null),u=new $N(l,o.isFullyInitialized(),r.filtersNodes()),h=new $N(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=KN(h,u),this.eventGenerator_=new ZN(this.query_)}get query(){return this.query_}}function LP(e,t){const n=XN(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!xR(t)&&!n.getImmediateChild(bR(t)).isEmpty())?n.getChild(t):null}function FP(e){return 0===e.eventRegistrations_.length}function MP(e,t,n){const r=[];if(n){(0,mu.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function VP(e,t,n,r){t.type===jN.MERGE&&null!==t.source.queryId&&((0,mu.hu)(XN(e.viewCache_),"We should always have a full cache before handling merges"),(0,mu.hu)(JN(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new TP;let o,a;if(n.type===jN.OVERWRITE){const l=n;l.source.fromUser?o=RP(e,t,l.path,l.snap,r,i,s):((0,mu.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!xR(l.path),o=AP(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===jN.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=kR(n,r);NP(t,bR(c))&&(a=RP(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=kR(n,r);NP(t,bR(c))||(a=RP(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):((0,mu.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=OP(e,t,l.path,l.children,r,i,a,s))}else if(n.type===jN.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=bP(r,n))return t;{const a=new kP(r,t,i),l=t.eventCache.getNode();let c;if(xR(n)||".priority"===bR(n)){let n;if(t.serverCache.isFullyInitialized())n=_P(r,XN(t));else{const e=t.serverCache.getNode();(0,mu.hu)(e instanceof uN,"serverChildren would be complete if leaf node"),n=vP(r,e)}n=n,c=e.filter.updateFullNode(l,n,s)}else{const i=bR(n);let u=EP(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,CR(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,uN.EMPTY_NODE,CR(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=_P(r,XN(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=bP(r,wR()),YN(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=bP(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(xR(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return AP(e,t,n,l.getNode().getChild(n),i,s,a,o);if(xR(n)){let r=new tP(null);return l.getNode().forEachChild(zR,(e,t)=>{r=r.set(new vR(e),t)}),OP(e,t,n,r,i,s,a,o)}return t}{let c=new tP(null);return r.foreach((e,t)=>{const r=kR(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),OP(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==jN.LISTEN_COMPLETE)throw(0,mu.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache;return xP(e,QN(t,s.getNode(),s.isFullyInitialized()||xR(n),s.isFiltered()),n,r,IP,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=JN(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(vN(JN(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,i,t,n,r);var o,a;return o=e.processor_,(0,mu.hu)((a=s.viewCache).eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,mu.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,mu.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,UP(e,s.changes,s.viewCache.eventCache.getNode(),null)}function UP(e,t,n,r){return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),WN(e,i,"child_removed",t,r,n),WN(e,i,"child_added",t,r,n),WN(e,i,"child_moved",s,r,n),WN(e,i,"child_changed",t,r,n),WN(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let jP,qP;class BP{constructor(){this.views=new Map}}function zP(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,mu.hu)(null!=s,"SyncTree gave us an op for an invalid query."),VP(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(VP(s,t,n,r));return i}}function HP(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let e=_P(n,i?r:null),s=!1;e?s=!0:r instanceof uN?(e=vP(n,r),s=!1):(e=uN.EMPTY_NODE,s=!1);const o=KN(new $N(e,s,!1),new $N(r,i,!1));return new DP(t,o)}return s}function GP(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function $P(e,t){let n=null;for(const r of e.views.values())n=n||LP(r,t);return n}function ZP(e,t){return t._queryParams.loadsAllData()?YP(e):e.views.get(t._queryIdentifier)}function WP(e,t){return null!=ZP(e,t)}function KP(e){return null!=YP(e)}function YP(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let QP=1;class JP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tP(null),this.pendingWriteTree_={visibleWrites:nP.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XP(e,t,n,r,i){return function(e,t,n,r,i){(0,mu.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=rP(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?sO(e,new HN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function eO(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,mu.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&fP(t,r.path)?i=!1:PR(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=gP(e.allWrites,mP,wR()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=sP(e.visibleWrites,r.path):GA(r.children,t=>{e.visibleWrites=sP(e.visibleWrites,kR(r.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new tP(null);return null!=r.snap?t=t.set(wR(),!0):GA(r.children,e=>{t=t.set(new vR(e),!0)}),sO(e,new BN(r.path,t,n))}return[]}function tO(e,t,n){return sO(e,new HN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function nO(e,t,n,r){const i=t._path,s=e.syncPointTree_.get(i);let o=[];if(s&&("default"===t._queryIdentifier||WP(s,t))){const a=function(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=KP(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(MP(c,n,r)),FP(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(MP(t,n,r)),FP(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!KP(e)&&s.push(new((0,mu.hu)(jP,"Reference.ts has not been loaded"),jP)(t._repo,t._path)),{removed:s,events:o}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const l=a.removed;o=a.events;const c=-1!==l.findIndex(e=>e._queryParams.loadsAllData()),u=e.syncPointTree_.findOnPath(i,(e,t)=>KP(t));if(c&&!u){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&KP(t))return[YP(t)];{let e=[];return t&&(e=GP(t)),GA(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=lO(e,r);e.listenProvider_.startListening(fO(i),cO(e,i),s.hashFn,s.onComplete)}}}if(!u&&l.length>0&&!r)if(c){const n=null;e.listenProvider_.stopListening(fO(t),n)}else l.forEach(t=>{const n=e.queryToTagMap.get(uO(t));e.listenProvider_.stopListening(fO(t),n)});!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=uO(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function rO(e,t,n){const r=t._path;let i=null,s=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=AR(e,r);i=i||$P(t,n),s=s||KP(t)});let o,a=e.syncPointTree_.get(r);a?(s=s||KP(a),i=i||$P(a,wR())):(a=new BP,e.syncPointTree_=e.syncPointTree_.set(r,a)),null!=i?o=!0:(o=!1,i=uN.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=$P(t,wR());n&&(i=i.updateImmediateChild(e,n))}));const l=WP(a,t);if(!l&&!t._queryParams.loadsAllData()){const n=uO(t);(0,mu.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=QP++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=function(e,t,n,r,i,s){const o=HP(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nN,(e,t)=>{r.push(wN(e,t))}),n.isFullyInitialized()&&r.push(vN(n.getNode())),UP(e,r,n.getNode(),t)}(o,n)}(a,t,n,pP(e.pendingWriteTree_,r),i,o);if(!l&&!s){const n=ZP(a,t);c=c.concat(function(e,t,n){const r=t._path,i=cO(e,t),s=lO(e,n),o=e.listenProvider_.startListening(fO(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)(0,mu.hu)(!KP(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!xR(e)&&t&&KP(t))return[YP(t).query];{let e=[];return t&&(e=e.concat(GP(t).map(e=>e.query))),GA(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(fO(r),cO(e,r))}}return o}(e,t,n))}return c}function iO(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=$P(n,AR(e,t));if(r)return r});return yP(r,t,i,n,!0)}function sO(e,t){return oO(t,e.syncPointTree_,null,pP(e.pendingWriteTree_,wR()))}function oO(e,t,n,r){if(xR(e.path))return aO(e,t,n,r);{const i=t.get(wR());null==n&&null!=i&&(n=$P(i,wR()));let s=[];const o=bR(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=CP(r,o);s=s.concat(oO(a,l,e,t))}return i&&(s=s.concat(zP(i,e,r,n))),s}}function aO(e,t,n,r){const i=t.get(wR());null==n&&null!=i&&(n=$P(i,wR()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=CP(r,t),l=e.operationForChild(t);l&&(s=s.concat(aO(l,i,o,a)))}),i&&(s=s.concat(zP(i,e,r,n))),s}function lO(e,t){const n=t.query,r=cO(e,n);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||uN.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=hO(e,n);if(r){const n=dO(r),i=n.path,s=n.queryId,o=AR(i,t);return pO(e,i,new zN(qN(s),o))}return[]}(e,n._path,r):function(e,t){return sO(e,new zN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return nO(e,n,null,r)}}}}function cO(e,t){const n=uO(t);return e.queryToTagMap.get(n)}function uO(e){return e._path.toString()+"$"+e._queryIdentifier}function hO(e,t){return e.tagToQueryMap.get(t)}function dO(e){const t=e.indexOf("$");return(0,mu.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new vR(e.substr(0,t))}}function pO(e,t,n){const r=e.syncPointTree_.get(t);return(0,mu.hu)(r,"Missing sync point for query tag that we're tracking"),zP(r,n,pP(e.pendingWriteTree_,t),null)}function fO(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,mu.hu)(qP,"Reference.ts has not been loaded"),qP)(e._repo,e._path):e}class mO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new mO(t)}node(){return this.node_}}class gO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=kR(this.path_,e);return new gO(this.syncTree_,t)}node(){return iO(this.syncTree_,this.path_)}}const yO=function(e,t,n){return e&&"object"==typeof e?((0,mu.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?_O(e[".sv"],t,n):"object"==typeof e[".sv"]?vO(e[".sv"],t):void(0,mu.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},_O=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,mu.hu)(!1,"Unexpected server value: "+e)}},vO=function(e,t,n){e.hasOwnProperty("increment")||(0,mu.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,mu.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,mu.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},wO=function(e,t,n,r){return EO(t,new gO(n,e),r)},bO=function(e,t,n){return EO(e,new mO(t),n)};function EO(e,t,n){const r=e.getPriority().val(),i=yO(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=yO(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new tN(s,dN(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new tN(i))),r.forEachChild(nN,(e,r)=>{const i=EO(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class CO{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function SO(e,t){let n=t instanceof vR?t:new vR(t),r=e,i=bR(n);for(;null!==i;){const e=(0,mu.DV)(r.node.children,i)||{children:{},childCount:0};r=new CO(i,r,e),n=CR(n),i=bR(n)}return r}function TO(e){return e.node.value}function IO(e,t){e.node.value=t,NO(e)}function kO(e){return e.node.childCount>0}function xO(e,t){GA(e.node.children,(n,r)=>{t(new CO(n,e,r))})}function AO(e,t,n,r){n&&!r&&t(e),xO(e,e=>{AO(e,t,!0,r)}),n&&r&&t(e)}function RO(e){return new vR(null===e.parent?e.name:RO(e.parent)+"/"+e.name)}function NO(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===TO(e)&&!kO(e)}(n),i=(0,mu.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,NO(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,NO(e))}(e.parent,e.name,e)}const PO=/[\[\].#$\/\u0000-\u001F\u007F]/,OO=/[\[\].#$\u0000-\u001F\u007F]/,DO=10485760,LO=function(e){return"string"==typeof e&&0!==e.length&&!PO.test(e)},FO=function(e){return"string"==typeof e&&0!==e.length&&!OO.test(e)},MO=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!MA(e)||e&&"object"==typeof e&&(0,mu.r3)(e,".sv")},VO=function(e,t,n,r){r&&void 0===t||UO((0,mu.gK)(e,"value"),t,n)},UO=function(e,t,n){const r=n instanceof vR?new OR(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+LR(r));if("function"==typeof t)throw new Error(e+"contains a function "+LR(r)+" with contents = "+t.toString());if(MA(t))throw new Error(e+"contains "+t.toString()+" "+LR(r));if("string"==typeof t&&t.length>DO/3&&(0,mu.ug)(t)>DO)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+LR(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(GA(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!LO(t)))throw new Error(e+" contains an invalid key ("+t+") "+LR(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,mu.ug)(t),DR(e)}(r,t),UO(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,mu.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+LR(r)+" in addition to actual children.")}},jO=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,mu.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];GA(t,(e,t)=>{const r=new vR(e);if(UO(i,t,kR(n,r)),".priority"===SR(r)&&!MO(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=TR(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!LO(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(RR);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&PR(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},qO=function(e,t,n){if(!n||void 0!==t){if(MA(t))throw new Error((0,mu.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!MO(t))throw new Error((0,mu.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},BO=function(e,t,n,r){if(!(r&&void 0===n||LO(n)))throw new Error((0,mu.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},zO=function(e,t,n,r){if(!(r&&void 0===n||FO(n)))throw new Error((0,mu.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},HO=function(e,t){if(".info"===bR(t))throw new Error(e+" failed = Can't modify data under /.info/")},GO=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!LO(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),FO(e)}(n))throw new Error((0,mu.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $O{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ZO(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||NR(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function WO(e,t,n){ZO(e,n),YO(e,e=>NR(e,t))}function KO(e,t,n){ZO(e,n),YO(e,e=>PR(e,t)||PR(t,e))}function YO(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(QO(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function QO(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();AA&&PA("event: "+n.toString()),KA(r)}}}const JO="repo_interrupt";class XO{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $O,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DN(),this.transactionQueueTree_=new CO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eD(e){const t=e.infoData_.getNode(new vR(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function tD(e){return(t=(t={timestamp:eD(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function nD(e,t,n,r,i){e.dataUpdateCount++;const s=new vR(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=(0,mu.UI)(n,e=>dN(e));o=function(e,t,n,r){const i=hO(e,r);if(i){const r=dO(i),s=r.path,o=r.queryId,a=AR(s,t),l=tP.fromObject(n);return pO(e,s,new GN(qN(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=dN(n);o=function(e,t,n,r){const i=hO(e,r);if(null!=i){const r=dO(i),s=r.path,o=r.queryId,a=AR(s,t);return pO(e,s,new HN(qN(o),a,n))}return[]}(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,mu.UI)(n,e=>dN(e));o=function(e,t,n){const r=tP.fromObject(n);return sO(e,new GN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=dN(n);o=tO(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=mD(e,s)),KO(e.eventQueue_,a,o)}function rD(e,t){iD(e,"connected",t),!1===t&&function(e){hD(e,"onDisconnectEvents");const t=tD(e),n=DN();MN(e.onDisconnect_,wR(),(r,i)=>{const s=wO(r,i,e.serverSyncTree_,t);LN(n,r,s)});let r=[];MN(n,wR(),(t,n)=>{r=r.concat(tO(e.serverSyncTree_,t,n));const i=wD(e,t);mD(e,i)}),e.onDisconnect_=DN(),KO(e.eventQueue_,wR(),r)}(e)}function iD(e,t,n){const r=new vR("/.info/"+t),i=dN(n);e.infoData_.updateSnapshot(r,i);const s=tO(e.infoSyncTree_,r,i);KO(e.eventQueue_,r,s)}function sD(e){return e.nextWriteId_++}function oD(e,t,n,r,i){hD(e,"set",{path:t.toString(),value:n,priority:r});const s=tD(e),o=dN(n,r),a=iO(e.serverSyncTree_,t),l=bO(o,a,s),c=sD(e),u=XP(e.serverSyncTree_,t,l,c,!0);ZO(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||FA("set at "+t+" failed: "+n);const o=eO(e.serverSyncTree_,c,!s);KO(e.eventQueue_,t,o),dD(0,i,n,r)});const h=wD(e,t);mD(e,h),KO(e.eventQueue_,h,[])}function aD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&FN(e.onDisconnect_,t),dD(0,n,r,i)})}function lD(e,t,n,r){const i=dN(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&LN(e.onDisconnect_,t,i),dD(0,r,n,s)})}function cD(e,t,n){let r;r=".info"===bR(t._path)?nO(e.infoSyncTree_,t,n):nO(e.serverSyncTree_,t,n),WO(e.eventQueue_,t._path,r)}function uD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(JO)}function hD(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),PA(n,...t)}function dD(e,t,n,r){t&&KA(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function pD(e,t,n){return iO(e.serverSyncTree_,t,n)||uN.EMPTY_NODE}function fD(e,t=e.transactionQueueTree_){if(t||vD(e,t),TO(t)){const n=yD(e,t);(0,mu.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=pD(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];(0,mu.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=AR(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{hD(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(eO(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();vD(e,SO(e.transactionQueueTree_,t)),fD(e,e.transactionQueueTree_),KO(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)KA(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{FA("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}mD(e,t)}},o)}(e,RO(t),n)}else kO(t)&&xO(t,t=>{fD(e,t)})}function mD(e,t){const n=gD(e,t),r=RO(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const a=t[o],l=AR(n,a.path);let c,u=!1;if((0,mu.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)u=!0,c=a.abortReason,i=i.concat(eO(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)u=!0,c="maxretry",i=i.concat(eO(e.serverSyncTree_,a.currentWriteId,!0));else{const n=pD(e,a.path,s);a.currentInputSnapshot=n;const r=t[o].update(n.val());if(void 0!==r){UO("transaction failed: Data returned ",r,a.path);let t=dN(r);"object"==typeof r&&null!=r&&(0,mu.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,l=tD(e),c=bO(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=c,a.currentWriteId=sD(e),s.splice(s.indexOf(o),1),i=i.concat(XP(e.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally)),i=i.concat(eO(e.serverSyncTree_,o,!0))}else u=!0,c="nodata",i=i.concat(eO(e.serverSyncTree_,a.currentWriteId,!0))}KO(e.eventQueue_,n,i),i=[],u&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&r.push("nodata"===c?()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot):()=>t[o].onComplete(new Error(c),!1,null)))}vD(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)KA(r[o]);fD(e,e.transactionQueueTree_)}(e,yD(e,n),r),r}function gD(e,t){let n,r=e.transactionQueueTree_;for(n=bR(t);null!==n&&void 0===TO(r);)r=SO(r,n),n=bR(t=CR(t));return r}function yD(e,t){const n=[];return _D(e,t,n),n.sort((e,t)=>e.order-t.order),n}function _D(e,t,n){const r=TO(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xO(t,t=>{_D(e,t,n)})}function vD(e,t){const n=TO(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,IO(t,n.length>0?n:void 0)}xO(t,t=>{vD(e,t)})}function wD(e,t){const n=RO(gD(e,t)),r=SO(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{bD(e,t)}),bD(e,r),AO(r,t=>{bD(e,t)}),n}function bD(e,t){const n=TO(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,mu.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,mu.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(eO(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?IO(t,void 0):n.length=s+1,KO(e.eventQueue_,RO(t),i);for(let e=0;e<r.length;e++)KA(r[e])}}const ED=function(e,t){const n=CD(e),r=n.namespace;return"firebase.com"===n.domain&&LA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||LA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&FA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rR(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new vR(n.pathString)}},CD=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):FA(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class SD{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,mu.Pz)(this.snapshot.exportVal())}}class TD{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ID{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,mu.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class kD{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new mu.BH;return aD(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){HO("OnDisconnect.remove",this._path);const e=new mu.BH;return lD(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){HO("OnDisconnect.set",this._path),VO("OnDisconnect.set",e,this._path,!1);const t=new mu.BH;return lD(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){HO("OnDisconnect.setWithPriority",this._path),VO("OnDisconnect.setWithPriority",e,this._path,!1),qO("OnDisconnect.setWithPriority",t,!1);const n=new mu.BH;return function(e,t,n,r,i){const s=dN(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&LN(e.onDisconnect_,t,s),dD(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){HO("OnDisconnect.update",this._path),jO("OnDisconnect.update",e,this._path,!1);const t=new mu.BH;return function(e,t,n,r){if((0,mu.xb)(n))return PA("onDisconnect().update() called with empty data.  Don't do anything."),void dD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&GA(n,(n,r)=>{const i=dN(r);LN(e.onDisconnect_,kR(t,n),i)}),dD(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class xD{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return xR(this._path)?null:SR(this._path)}get ref(){return new PD(this._repo,this._path)}get _queryIdentifier(){const e=NN(this._queryParams),t=zA(e);return"{}"===t?"default":t}get _queryObject(){return NN(this._queryParams)}isEqual(e){if(!((e=(0,mu.m9)(e))instanceof xD))return!1;const t=this._repo===e._repo,n=NR(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function AD(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function RD(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===zR){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==VA)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==UA)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===nN){if(null!=t&&!MO(t)||null!=n&&!MO(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,mu.hu)(e.getIndex()instanceof pN||e.getIndex()===fN,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ND(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class PD extends xD{constructor(e,t){super(e,t,new IN,!1)}get parent(){const e=IR(this._path);return null===e?null:new PD(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class OD{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new vR(e),n=FD(this.ref,e);return new OD(this._node.getChild(t),n,nN)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new OD(n,FD(this.ref,t),nN)))}hasChild(e){const t=new vR(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DD(e,t){return(e=(0,mu.m9)(e))._checkNotDeleted("ref"),void 0!==t?FD(e._root,t):e._root}function LD(e,t){(e=(0,mu.m9)(e))._checkNotDeleted("refFromURL");const n=ED(t,e._repo.repoInfo_.nodeAdmin);GO("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||LA("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),DD(e,n.path.toString())}function FD(e,t){var n;return null===bR((e=(0,mu.m9)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zO("child","path",n,!1)):zO("child","path",t,!1),new PD(e._repo,kR(e._path,t))}function MD(e,t){e=(0,mu.m9)(e),HO("set",e._path),VO("set",t,e._path,!1);const n=new mu.BH;return oD(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class VD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new SD("value",this,new OD(e.snapshotNode,new PD(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TD(this,e,t):null}matches(e){return e instanceof VD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class UD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TD(this,e,t):null}createEvent(e,t){(0,mu.hu)(null!=e.childName,"Child events should have a childName.");const n=FD(new PD(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new SD(e.type,this,new OD(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof UD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jD(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{cD(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new ID(n,s||void 0),a="value"===t?new VD(o):new UD(t,o);return function(e,t,n){let r;r=".info"===bR(t._path)?rO(e.infoSyncTree_,t,n):rO(e.serverSyncTree_,t,n),WO(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>cD(e._repo,e,a)}function qD(e,t,n,r){return jD(e,"value",t,n,r)}function BD(e,t,n,r){return jD(e,"child_added",t,n,r)}function zD(e,t,n,r){return jD(e,"child_changed",t,n,r)}function HD(e,t,n,r){return jD(e,"child_moved",t,n,r)}function GD(e,t,n,r){return jD(e,"child_removed",t,n,r)}function $D(e,t,n){let r=null;const i=n?new ID(n):null;"value"===t?r=new VD(i):t&&(r=new UD(t,i)),cD(e._repo,e,r)}class ZD{}class WD extends ZD{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){VO("endAt",this._value,e._path,!0);const t=xN(e._queryParams,this._value,this._key);if(ND(t),RD(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xD(e._repo,e._path,t,e._orderByCalled)}}class KD extends ZD{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){VO("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,i;return e.index_===zR?("string"==typeof t&&(t=_N(t)),i=xN(e,t,n)):(r=null==n?VA:_N(n),i=xN(e,t,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ND(t),RD(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xD(e._repo,e._path,t,e._orderByCalled)}}class YD extends ZD{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){VO("startAt",this._value,e._path,!0);const t=kN(e._queryParams,this._value,this._key);if(ND(t),RD(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xD(e._repo,e._path,t,e._orderByCalled)}}class QD extends ZD{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){VO("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===zR)"string"==typeof t&&(t=yN(t)),r=kN(e,t,n);else{let i;i=null==n?UA:yN(n),r=kN(e,t,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ND(t),RD(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xD(e._repo,e._path,t,e._orderByCalled)}}class JD extends ZD{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xD(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class XD extends ZD{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xD(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class eL extends ZD{constructor(e){super(),this._path=e}_apply(e){AD(e,"orderByChild");const t=new vR(this._path);if(xR(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new pN(t),r=AN(e._queryParams,n);return RD(r),new xD(e._repo,e._path,r,!0)}}class tL extends ZD{_apply(e){AD(e,"orderByKey");const t=AN(e._queryParams,zR);return RD(t),new xD(e._repo,e._path,t,!0)}}class nL extends ZD{_apply(e){AD(e,"orderByPriority");const t=AN(e._queryParams,nN);return RD(t),new xD(e._repo,e._path,t,!0)}}class rL extends ZD{_apply(e){AD(e,"orderByValue");const t=AN(e._queryParams,fN);return RD(t),new xD(e._repo,e._path,t,!0)}}class iL extends ZD{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(VO("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new WD(this._value,this._key)._apply(new YD(this._value,this._key)._apply(e))}}function sL(e,...t){let n=(0,mu.m9)(e);for(const r of t)n=r._apply(n);return n}!function(e){(0,mu.hu)(!jP,"__referenceConstructor has already been defined"),jP=e}(PD),function(e){(0,mu.hu)(!qP,"__referenceConstructor has already been defined"),qP=e}(PD);const oL={};function aL(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||LA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),PA("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=ED(s,i),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=ED(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new XA(XA.OWNER):new JA(e.name,e.options,t);GO("Invalid Firebase Database URL",l),xR(l.path)||LA("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=oL[t.name];i||(i={},oL[t.name]=i);let s=i[e.toURLString()];return s&&LA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new XO(e,!1,n,r),i[e.toURLString()]=s,s}(c,e,u,new QA(e.name,n));return new lL(h,e)}class lL{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=lR(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new PN(e.repoInfo_,(t,n,r,i)=>{nD(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>rD(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,mu.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new UR(e.repoInfo_,t,(t,n,r,i)=>{nD(e,t,n,r,i)},t=>{rD(e,t)},t=>{!function(e,t){GA(t,(t,n)=>{iD(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t,n){const r=t.toString();return aR[r]||(aR[r]=new UN(e.stats_,e.server_)),aR[r]}(e.repoInfo_),e.infoData_=new ON,e.infoSyncTree_=new JP({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=tO(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),iD(e,"connected",!1),e.serverSyncTree_=new JP({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);KO(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new PD(this._repo,wR())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=oL[t];n&&n[e.key]===e||LA(`Database ${t}(${e.repoInfo_}) has already been deleted.`),uD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&LA("Cannot call "+e+" on a deleted database.")}}function cL(e,t){NA(e,t)}class uL{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}UR.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},UR.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},vA(du.SDK_VERSION),(0,du._registerComponent)(new pu.wA("database",(e,{instanceIdentifier:t})=>aL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,du.registerVersion)("@firebase/database","0.12.0",void 0);const hL=new fu.Yd("@firebase/database-compat"),dL=function(e){hL.warn("FIREBASE WARNING: "+e)};class pL{constructor(e){this._delegate=e}cancel(e){(0,mu.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,mu.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,mu.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,mu.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,mu.Dv)("OnDisconnect.set",1,2,arguments.length),(0,mu.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,mu.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,mu.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then(()=>n(null),e=>n(e)),r}update(e,t){if((0,mu.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,dL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,mu.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class fL{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,mu.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class mL{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,mu.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,mu.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,mu.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,mu.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,mu.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),zO("DataSnapshot.child","path",e,!1),new mL(this._database,this._delegate.child(e))}hasChild(e){return(0,mu.Dv)("DataSnapshot.hasChild",1,1,arguments.length),zO("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,mu.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,mu.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,mu.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new mL(this._database,t)))}hasChildren(){return(0,mu.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,mu.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,mu.Dv)("DataSnapshot.ref",0,0,arguments.length),new yL(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class gL{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,mu.Dv)("Query.on",2,4,arguments.length),(0,mu.Wj)("Query.on","callback",t,!1);const s=gL.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new mL(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return qD(this._delegate,o,a),t;case"child_added":return BD(this._delegate,o,a),t;case"child_removed":return GD(this._delegate,o,a),t;case"child_changed":return zD(this._delegate,o,a),t;case"child_moved":return HD(this._delegate,o,a),t;default:throw new Error((0,mu.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,mu.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,mu.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,mu.Wj)("Query.off","callback",t,!0),(0,mu.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,$D(this._delegate,e,r)}else $D(this._delegate,e)}get(){return(e=this._delegate,function(e,t){const n=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=AR(e,n);r=r||$P(t,i)});let i=e.syncPointTree_.get(n);i?r=r||$P(i,wR()):(i=new BP,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new $N(r,!0,!1):null;return JN(HP(i,t,pP(e.pendingWriteTree_,t._path),s?o.getNode():uN.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(n=>{const r=dN(n).withIndex(t._queryParams.getIndex()),i=tO(e.serverSyncTree_,t._path,r);return WO(e.eventQueue_,t._path,i),Promise.resolve(r)},n=>(hD(e,"get for query "+(0,mu.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))))}((e=(0,mu.m9)(e))._repo,e).then(t=>new OD(t,new PD(e._repo,e._path),e._queryParams.getIndex()))).then(e=>new mL(this.database,e));var e}once(e,t,n,r){(0,mu.Dv)("Query.once",1,4,arguments.length),(0,mu.Wj)("Query.once","callback",t,!0);const i=gL.getCancelAndContextArgs_("Query.once",n,r),s=new mu.BH,o=(e,n)=>{const r=new mL(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":qD(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":BD(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":GD(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":zD(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":HD(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,mu.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,mu.Dv)("Query.limitToFirst",1,1,arguments.length),new gL(this.database,sL(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new JD(e)}(e)))}limitToLast(e){return(0,mu.Dv)("Query.limitToLast",1,1,arguments.length),new gL(this.database,sL(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new XD(e)}(e)))}orderByChild(e){return(0,mu.Dv)("Query.orderByChild",1,1,arguments.length),new gL(this.database,sL(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zO("orderByChild","path",e,!1),new eL(e)}(e)))}orderByKey(){return(0,mu.Dv)("Query.orderByKey",0,0,arguments.length),new gL(this.database,sL(this._delegate,new tL))}orderByPriority(){return(0,mu.Dv)("Query.orderByPriority",0,0,arguments.length),new gL(this.database,sL(this._delegate,new nL))}orderByValue(){return(0,mu.Dv)("Query.orderByValue",0,0,arguments.length),new gL(this.database,sL(this._delegate,new rL))}startAt(e=null,t){return(0,mu.Dv)("Query.startAt",0,2,arguments.length),new gL(this.database,sL(this._delegate,function(e=null,t){return BO("startAt","key",t,!0),new YD(e,t)}(e,t)))}startAfter(e=null,t){return(0,mu.Dv)("Query.startAfter",0,2,arguments.length),new gL(this.database,sL(this._delegate,function(e,t){return BO("startAfter","key",t,!0),new QD(e,t)}(e,t)))}endAt(e=null,t){return(0,mu.Dv)("Query.endAt",0,2,arguments.length),new gL(this.database,sL(this._delegate,function(e,t){return BO("endAt","key",t,!0),new WD(e,t)}(e,t)))}endBefore(e=null,t){return(0,mu.Dv)("Query.endBefore",0,2,arguments.length),new gL(this.database,sL(this._delegate,function(e,t){return BO("endBefore","key",t,!0),new KD(e,t)}(e,t)))}equalTo(e,t){return(0,mu.Dv)("Query.equalTo",1,2,arguments.length),new gL(this.database,sL(this._delegate,function(e,t){return BO("equalTo","key",t,!0),new iL(e,t)}(e,t)))}toString(){return(0,mu.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,mu.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,mu.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof gL))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,mu.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,mu.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,mu.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new yL(this.database,new PD(this._delegate._repo,this._delegate._path))}}class yL extends gL{constructor(e,t){super(e,new xD(t._repo,t._path,new IN,!1)),this.database=e,this._delegate=t}getKey(){return(0,mu.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,mu.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new yL(this.database,FD(this._delegate,e))}getParent(){(0,mu.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new yL(this.database,e):null}getRoot(){return(0,mu.Dv)("Reference.root",0,0,arguments.length),new yL(this.database,this._delegate.root)}set(e,t){(0,mu.Dv)("Reference.set",1,2,arguments.length),(0,mu.Wj)("Reference.set","onComplete",t,!0);const n=MD(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,mu.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,dL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}HO("Reference.update",this._delegate._path),(0,mu.Wj)("Reference.update","onComplete",t,!0);const n=function(e,t){jO("update",t,e._path,!1);const n=new mu.BH;return function(e,t,n,r){hD(e,"update",{path:t.toString(),value:n});let i=!0;const s=tD(e),o={};if(GA(n,(n,r)=>{i=!1,o[n]=wO(kR(t,n),dN(r),e.serverSyncTree_,s)}),i)PA("update() called with empty data.  Don't do anything."),dD(0,r,"ok",void 0);else{const i=sD(e),s=function(e,t,n,r){!function(e,t,n,r){(0,mu.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=iP(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=tP.fromObject(n);return sO(e,new GN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,o,i);ZO(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||FA("update at "+t+" failed: "+n);const a=eO(e.serverSyncTree_,i,!o),l=a.length>0?mD(e,t):t;KO(e.eventQueue_,l,a),dD(0,r,n,s)}),GA(n,n=>{const r=wD(e,kR(t,n));mD(e,r)}),KO(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,mu.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,mu.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(HO("setWithPriority",e._path),VO("setWithPriority",t,e._path,!1),qO("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new mu.BH;return oD(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return n&&r.then(()=>n(null),e=>n(e)),r}remove(e){(0,mu.Dv)("Reference.remove",0,1,arguments.length),(0,mu.Wj)("Reference.remove","onComplete",e,!0);const t=function(e){return HO("remove",e._path),MD(e,null)}(this._delegate);return e&&t.then(()=>e(null),t=>e(t)),t}transaction(e,t,n){(0,mu.Dv)("Reference.transaction",1,3,arguments.length),(0,mu.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,mu.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,mu.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=function(e,t,n){var r;if(e=(0,mu.m9)(e),HO("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new mu.BH,o=qD(e,()=>{});return function(t,n,r,i,o,a){hD(t,"transaction on "+n);const l={path:n,update:r,onComplete:(t,n,r)=>{let i=null;t?s.reject(t):(i=new OD(r,new PD(e._repo,e._path),nN),s.resolve(new uL(n,i)))},status:null,order:IA(),applyLocally:a,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=pD(t,n,void 0);l.currentInputSnapshot=c;const u=l.update(c.val());if(void 0===u)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{UO("transaction failed: Data returned ",u,l.path),l.status=0;const e=SO(t.transactionQueueTree_,n),r=TO(e)||[];let i;r.push(l),IO(e,r),"object"==typeof u&&null!==u&&(0,mu.r3)(u,".priority")?(i=(0,mu.DV)(u,".priority"),(0,mu.hu)(MO(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(iO(t.serverSyncTree_,n)||uN.EMPTY_NODE).getPriority().val();const s=tD(t),o=dN(u,i),a=bO(o,c,s);l.currentOutputSnapshotRaw=o,l.currentOutputSnapshotResolved=a,l.currentWriteId=sD(t);const h=XP(t.serverSyncTree_,n,a,l.currentWriteId,l.applyLocally);KO(t.eventQueue_,n,h),fD(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,o,i),s.promise}(this._delegate,e,{applyLocally:n}).then(e=>new fL(e.committed,new mL(this.database,e.snapshot)));return t&&r.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),r}setPriority(e,t){(0,mu.Dv)("Reference.setPriority",1,2,arguments.length),(0,mu.Wj)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,mu.m9)(e),HO("setPriority",e._path),qO("setPriority",t,!1);const n=new mu.BH;return oD(e._repo,kR(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,mu.Dv)("Reference.push",0,2,arguments.length),(0,mu.Wj)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,mu.m9)(e),HO("push",e._path),VO("push",t,e._path,!0);const n=eD(e._repo),r=gN(n),i=FD(e,r),s=FD(e,r);let o;return o=null!=t?MD(s,t).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then(e=>new yL(this.database,e));t&&r.then(()=>t(null),e=>t(e));const i=new yL(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return HO("Reference.onDisconnect",this._delegate._path),new pL(new kD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _L{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){!function(e,t,n,r={}){(e=(0,mu.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&LA("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&LA('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new XA(XA.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:(0,mu.Sg)(r.mockUserToken,e.app.options.projectId);s=new XA(t)}!function(e,t,n,r){e.repoInfo_=new rR(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(this._delegate,e,t,n)}ref(e){if((0,mu.Dv)("database.ref",0,1,arguments.length),e instanceof yL){const t=LD(this._delegate,e.toString());return new yL(this,t)}{const t=DD(this._delegate,e);return new yL(this,t)}}refFromURL(e){(0,mu.Dv)("database.refFromURL",1,1,arguments.length);const t=LD(this._delegate,e);return new yL(this,t)}goOffline(){return(0,mu.Dv)("database.goOffline",0,0,arguments.length),function(e){(e=(0,mu.m9)(e))._checkNotDeleted("goOffline"),uD(e._repo)}(this._delegate)}goOnline(){return(0,mu.Dv)("database.goOnline",0,0,arguments.length),function(e){var t;(e=(0,mu.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(JO)}(this._delegate)}}_L.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>function(e){return{".sv":{increment:e}}}(e)};var vL=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){vA(n);const o=new pu.zt("auth-internal",new pu.H0("database-standalone"));return o.setComponent(new pu.wA("auth-internal",()=>r,"PRIVATE")),{instance:new _L(aL(e,o,void 0,t,s),e),namespace:i}}});const wL=_L.ServerValue;function bL(e){return null==e}function EL(e){return"function"==typeof e.set}function CL(e,t){return EL(t)?t:e.ref(t)}function SL(e,t){if("string"==typeof e)return t.stringCase();if(EL(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function TL(e,t,n="on",r=Ie.z){return new at.y(i=>{let s=null;return s=e[n](t,(e,t)=>{r.schedule(()=>{i.next({snapshot:e,prevKey:t})}),"once"===n&&r.schedule(()=>i.complete())},e=>{r.schedule(()=>i.error(e))}),"on"===n?{unsubscribe(){null!=s&&e.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Oe.U)(e=>{const{snapshot:n,prevKey:r}=e;let i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}),(0,Hk.B)())}function IL(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function kL(e,t){const{payload:n,prevKey:r,key:i}=t,s=IL(e,i),o=function(e,t){if(bL(t))return 0;{const n=IL(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case"child_added":if(s>-1){const i=e[s-1];(i&&i.key||null)!==r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(o,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===i?t:e);case"child_moved":if(s>-1){const t=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,t),e}return e;default:return e}}function xL(e){return(bL(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function AL(e,t,n){return function(e,t,n){return TL(e,"value","once",n).pipe(Nt(r=>{const i=[(0,Ee.of)(r)];return t.forEach(t=>i.push(TL(e,t,"on",n))),(0,St.T)(...i).pipe(jo(kL,[]))}),qe())}(e,t=xL(t),n)}function RL(e,t,n){const r=(t=xL(t)).map(t=>TL(e,t,"on",n));return(0,St.T)(...r)}function NL(e,t){return function(n,r){return SL(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function PL(e){return function(t){return t?SL(t,{stringCase:()=>e.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):e.remove()}}function OL(e,t){return function(){return TL(e,"value","on",t)}}!function(e){e.INTERNAL.registerComponent(new pu.wA("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new _L(r,n)},"PUBLIC").setServiceProps({Reference:yL,Query:gL,Database:_L,DataSnapshot:mL,enableLogging:cL,INTERNAL:vL,ServerValue:wL}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.0")}(uu.Z);const DL=new r.OlP("angularfire2.realtimeDatabaseURL"),LL=new r.OlP("angularfire2.database.use-emulator");let FL=(()=>{class e{constructor(e,t,n,r,i,s,o,a,l,c,u,h,d,p){this.schedulers=s;const f=o,m=(0,cu.on)(e,i,t);a&&VT(m,i,l,u,h,d,c,p),this.database=(0,lu.cc)(`${m.name}.database.${n}`,"AngularFireDatabase",m.name,()=>{const e=i.runOutsideAngular(()=>m.database(n||void 0));return f&&e.useEmulator(...f),e},[f])}list(e,t){const n=this.schedulers.ngZone.runOutsideAngular(()=>CL(this.database,e));let r=n;return t&&(r=t(n)),function(e,t){const n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:NL(r,"update"),set:NL(r,"set"),push:e=>r.push(e),remove:PL(r),snapshotChanges:t=>AL(e,t,n).pipe(lu.iC),stateChanges:t=>RL(e,t,n).pipe(lu.iC),auditTrail:t=>function(e,t,n){return function(e,t,n){return function(e,t){return TL(e,"value","on",t).pipe((0,Oe.U)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e,n).pipe(qk(t),(0,Oe.U)(([e,t])=>{const n=e.lastKeyToLoad,r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(r=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new gA(r))),(0,Oe.U)(e=>e.actions));var r}(e,RL(e,t).pipe(jo((e,t)=>[...e,t],[])),n)}(e,t,n).pipe(lu.iC),valueChanges:(t,r)=>AL(e,t,n).pipe((0,Oe.U)(e=>e.map(e=>r&&r.idField?Object.assign(Object.assign({},e.payload.val()),{[r.idField]:e.key}):e.payload.val())),lu.iC)}}(r,this)}object(e){return t=this.schedulers.ngZone.runOutsideAngular(()=>CL(this.database,e)),n=this,{query:t,snapshotChanges:()=>OL(t,n.schedulers.outsideAngular)().pipe(lu.iC),update:e=>t.ref.update(e),set:e=>t.ref.set(e),remove:()=>t.ref.remove(),valueChanges:()=>OL(t,n.schedulers.outsideAngular)().pipe(lu.iC,(0,Oe.U)(e=>e.payload.exists()?e.payload.val():null))};var t,n}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(cu.Dh),r.LFG(cu.xv,8),r.LFG(DL,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(lu.HU),r.LFG(LL,8),r.LFG(UT,8),r.LFG(PT,8),r.LFG(OT,8),r.LFG(DT,8),r.LFG(LT,8),r.LFG(FT,8),r.LFG(MT,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),ML=(()=>{class e{constructor(){NT.Z.registerVersion("angularfire",lu.q4.full,"rtdb-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[FL]}),e})(),VL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[F,cu.hO.initializeApp(mA),nI,jT,ML]]}),e})(),UL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[Rk]}),e.\u0275inj=r.cJS({providers:[],imports:[[Ck,ou,vk,Ox,ck,ye,Fi,xo,Fx,Lx,fA,VL],ck]}),e})();(0,r.G48)(),me().bootstrapModule(UL).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,l,"next",e)}function l(e){r(o,i,s,a,l,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>i})},4762:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,pi:()=>s,_T:()=>o,mG:()=>a,Jh:()=>l,XA:()=>c,CR:()=>u,ev:()=>h});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}function l(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}}},e=>{"use strict";e(e.s=9661)}]);